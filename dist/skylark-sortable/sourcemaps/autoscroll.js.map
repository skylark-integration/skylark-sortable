{"version":3,"sources":["autoscroll.js"],"names":["define","langx","isBrowser","geom","styler","scrollingElement","autoScrolls","scrolling","IE11OrLess","ie","Edge","edge","Safari","firefox","safari","_throttleTimeout","_getParentAutoScrollElement","el","includeSelf","getBoundingClientRect","elem","gotSelf","clientWidth","scrollWidth","clientHeight","scrollHeight","elemCSS","css","overflowX","overflowY","document","body","parentNode","_autoScroll","_throttle","evt","options","rootEl","isFallback","scroll","_this","expando","window","sens","scrollSensitivity","speed","scrollSpeed","x","clientX","y","clientY","winScroller","scrollThisInstance","scrollParentEl","_clearAutoScrolls","scrollEl","scrollCustomFn","scrollFn","layersOut","currentParent","vx","vy","canScrollX","canScrollY","scrollPosX","scrollPosY","rect","boundingRect","top","bottom","left","right","width","height","scrollLeft","scrollTop","abs","i","clearInterval","pid","setInterval","this","layer","Sortable","active","_emulateDragOver","_onTouchMove","touchEvt","scrollOffsetY","scrollOffsetX","call","scrollBy","bind","bubbleScroll","forEach","autoScroll","callback","ms","debounce","_isScrolledPast","side","parent","elSide","parentSide","_getRelativeScrollOffset","offsetLeft","offsetTop","matrix","transforms","scaleX","a","scaleY","d","_handleAutoScroll","fallback","elementFromPoint","ogElemScroller","pointerElemChangedInterval","lastPointerElemX","lastPointerElemY","dragEl","newElem","_cancelThrottle","stop"],"mappings":"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","file":"../autoscroll.js","sourcesContent":["define([\r\n\t\"skylark-langx/langx\",\r\n\t\"skylark-langx-hoster/isBrowser\",\r\n\t\"skylark-domx-geom\",\r\n\t\"skylark-domx-styler\",\r\n\t\"skylark-domx-scrolls/scrollingElement\"\r\n],function(\r\n\tlangx,\r\n\tisBrowser,\r\n\tgeom,\r\n\tstyler,\r\n\tscrollingElement\r\n){\r\n\tvar autoScrolls = [],\r\n\t\tscrolling = false;\r\n\r\n\tvar\r\n\t\tIE11OrLess = isBrowser && isBrowser.ie,\r\n\t\tEdge = isBrowser && isBrowser.edge,\r\n\t\tFireFox = isBrowser && isBrowser.firefox,\r\n\t\tSafari = isBrowser && isBrowser.safari;\r\n\r\n\r\n\t/**\r\n\t * Checks if a side of an element is scrolled past a side of it's parents\r\n\t * @param  {HTMLElement}  el       The element who's side being scrolled out of view is in question\r\n\t * @param  {String}       side     Side of the element in question ('top', 'left', 'right', 'bottom')\r\n\t * @return {HTMLElement}           The parent scroll element that the el's side is scrolled past, or null if there is no such element\r\n\t */\r\n\tfunction _isScrolledPast(el, side) {\r\n\t\tvar parent = _getParentAutoScrollElement(el, true),\r\n\t\t\telSide = geom.boundingRect(el)[side];\r\n\r\n\t\t/* jshint boss:true */\r\n\t\twhile (parent) {\r\n\t\t\tvar parentSide = geom.boundingRect(parent)[side],\r\n\t\t\t\tvisible;\r\n\r\n\t\t\tif (side === 'top' || side === 'left') {\r\n\t\t\t\tvisible = elSide >= parentSide;\r\n\t\t\t} else {\r\n\t\t\t\tvisible = elSide <= parentSide;\r\n\t\t\t}\r\n\r\n\t\t\tif (!visible) return parent;\r\n\r\n\t\t\tif (parent === scrollingElement()) break;\r\n\r\n\t\t\tparent = _getParentAutoScrollElement(parent, false);\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the scroll offset of the given element, added with all the scroll offsets of parent elements.\r\n\t * The value is returned in real pixels.\r\n\t * @param  {HTMLElement} el\r\n\t * @return {Array}             Offsets in the format of [left, top]\r\n\t */\r\n\tfunction _getRelativeScrollOffset(el) {\r\n\t\tvar offsetLeft = 0,\r\n\t\t\toffsetTop = 0,\r\n\t\t\twinScroller = scrollingElement();\r\n\r\n\t\tif (el) {\r\n\t\t\tdo {\r\n\t\t\t\tvar matrix = transforms.matrix(el),\r\n\t\t\t\t\tscaleX = matrix.a,\r\n\t\t\t\t\tscaleY = matrix.d;\r\n\r\n\t\t\t\toffsetLeft += el.scrollLeft * scaleX;\r\n\t\t\t\toffsetTop += el.scrollTop * scaleY;\r\n\t\t\t} while (el !== winScroller && (el = el.parentNode));\r\n\t\t}\r\n\r\n\t\treturn [offsetLeft, offsetTop];\r\n\t}\r\n\r\n\tvar _getParentAutoScrollElement = function(el, includeSelf) {\r\n\t\t// skip to window\r\n\t\tif (!el || !el.getBoundingClientRect) return scrollingElement();\r\n\r\n\t\tvar elem = el;\r\n\t\tvar gotSelf = false;\r\n\t\tdo {\r\n\t\t\t// we don't need to get elem css if it isn't even overflowing in the first place (performance)\r\n\t\t\tif (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {\r\n\t\t\t\tvar elemCSS = styler.css(elem);\r\n\t\t\t\tif (\r\n\t\t\t\t\telem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == 'auto' || elemCSS.overflowX == 'scroll') ||\r\n\t\t\t\t\telem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == 'auto' || elemCSS.overflowY == 'scroll')\r\n\t\t\t\t) {\r\n\t\t\t\t\tif (!elem || !elem.getBoundingClientRect || elem === document.body) return scrollingElement();\r\n\r\n\t\t\t\t\tif (gotSelf || includeSelf) return elem;\r\n\t\t\t\t\tgotSelf = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t/* jshint boss:true */\r\n\t\t} while (elem = elem.parentNode);\r\n\r\n\t\treturn scrollingElement();\r\n\t},\r\n\r\n\r\n\t_autoScroll = _throttle(function (/**Event*/evt, /**Object*/options, /**HTMLElement*/rootEl, /**Boolean*/isFallback) {\r\n\t\t// Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\r\n\t\tif (options.scroll) {\r\n\t\t\tvar _this = rootEl ? rootEl[expando] : window,\r\n\t\t\t\tsens = options.scrollSensitivity,\r\n\t\t\t\tspeed = options.scrollSpeed,\r\n\r\n\t\t\t\tx = evt.clientX,\r\n\t\t\t\ty = evt.clientY,\r\n\r\n\t\t\t\twinScroller = scrollingElement(),\r\n\r\n\t\t\t\tscrollThisInstance = false;\r\n\r\n\t\t\t// Detect scrollEl\r\n\t\t\tif (scrollParentEl !== rootEl) {\r\n\t\t\t\t_clearAutoScrolls();\r\n\r\n\t\t\t\tscrollEl = options.scroll;\r\n\t\t\t\tscrollCustomFn = options.scrollFn;\r\n\r\n\t\t\t\tif (scrollEl === true) {\r\n\t\t\t\t\tscrollEl = _getParentAutoScrollElement(rootEl, true);\r\n\t\t\t\t\tscrollParentEl = scrollEl;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar layersOut = 0;\r\n\t\t\tvar currentParent = scrollEl;\r\n\t\t\tdo {\r\n\t\t\t\tvar\tel = currentParent,\r\n\t\t\t\t\trect = geom.boundingRect(el),\r\n\r\n\t\t\t\t\ttop = rect.top,\r\n\t\t\t\t\tbottom = rect.bottom,\r\n\t\t\t\t\tleft = rect.left,\r\n\t\t\t\t\tright = rect.right,\r\n\r\n\t\t\t\t\twidth = rect.width,\r\n\t\t\t\t\theight = rect.height,\r\n\r\n\t\t\t\t\tscrollWidth,\r\n\t\t\t\t\tscrollHeight,\r\n\r\n\t\t\t\t\tcss,\r\n\r\n\t\t\t\t\tvx,\r\n\t\t\t\t\tvy,\r\n\r\n\t\t\t\t\tcanScrollX,\r\n\t\t\t\t\tcanScrollY,\r\n\r\n\t\t\t\t\tscrollPosX,\r\n\t\t\t\t\tscrollPosY;\r\n\r\n\r\n\t\t\t\tscrollWidth = el.scrollWidth;\r\n\t\t\t\tscrollHeight = el.scrollHeight;\r\n\r\n\t\t\t\tcss = styler.css(el);\r\n\r\n\t\t\t\tscrollPosX = el.scrollLeft;\r\n\t\t\t\tscrollPosY = el.scrollTop;\r\n\r\n\t\t\t\tif (el === winScroller) {\r\n\t\t\t\t\tcanScrollX = width < scrollWidth && (css.overflowX === 'auto' || css.overflowX === 'scroll' || css.overflowX === 'visible');\r\n\t\t\t\t\tcanScrollY = height < scrollHeight && (css.overflowY === 'auto' || css.overflowY === 'scroll' || css.overflowY === 'visible');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcanScrollX = width < scrollWidth && (css.overflowX === 'auto' || css.overflowX === 'scroll');\r\n\t\t\t\t\tcanScrollY = height < scrollHeight && (css.overflowY === 'auto' || css.overflowY === 'scroll');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvx = canScrollX && (abs(right - x) <= sens && (scrollPosX + width) < scrollWidth) - (abs(left - x) <= sens && !!scrollPosX);\r\n\r\n\t\t\t\tvy = canScrollY && (abs(bottom - y) <= sens && (scrollPosY + height) < scrollHeight) - (abs(top - y) <= sens && !!scrollPosY);\r\n\r\n\r\n\t\t\t\tif (!autoScrolls[layersOut]) {\r\n\t\t\t\t\tfor (var i = 0; i <= layersOut; i++) {\r\n\t\t\t\t\t\tif (!autoScrolls[i]) {\r\n\t\t\t\t\t\t\tautoScrolls[i] = {};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (autoScrolls[layersOut].vx != vx || autoScrolls[layersOut].vy != vy || autoScrolls[layersOut].el !== el) {\r\n\t\t\t\t\tautoScrolls[layersOut].el = el;\r\n\t\t\t\t\tautoScrolls[layersOut].vx = vx;\r\n\t\t\t\t\tautoScrolls[layersOut].vy = vy;\r\n\r\n\t\t\t\t\tclearInterval(autoScrolls[layersOut].pid);\r\n\r\n\t\t\t\t\tif (el && (vx != 0 || vy != 0)) {\r\n\t\t\t\t\t\tscrollThisInstance = true;\r\n\t\t\t\t\t\t/* jshint loopfunc:true */\r\n\t\t\t\t\t\tautoScrolls[layersOut].pid = setInterval((function () {\r\n\t\t\t\t\t\t\t// emulate drag over during autoscroll (fallback), emulating native DnD behaviour\r\n\t\t\t\t\t\t\tif (isFallback && this.layer === 0) {\r\n\t\t\t\t\t\t\t\tSortable.active._emulateDragOver(true);\r\n\t\t\t\t\t\t\t\tSortable.active._onTouchMove(touchEvt, true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar scrollOffsetY = autoScrolls[this.layer].vy ? autoScrolls[this.layer].vy * speed : 0;\r\n\t\t\t\t\t\t\tvar scrollOffsetX = autoScrolls[this.layer].vx ? autoScrolls[this.layer].vx * speed : 0;\r\n\r\n\t\t\t\t\t\t\tif ('function' === typeof(scrollCustomFn)) {\r\n\t\t\t\t\t\t\t\tif (scrollCustomFn.call(_this, scrollOffsetX, scrollOffsetY, evt, touchEvt, autoScrolls[this.layer].el) !== 'continue') {\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tgeom.scrollBy(autoScrolls[this.layer].el, scrollOffsetX, scrollOffsetY);\r\n\t\t\t\t\t\t}).bind({layer: layersOut}), 24);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tlayersOut++;\r\n\t\t\t} while (options.bubbleScroll && currentParent !== winScroller && (currentParent = _getParentAutoScrollElement(currentParent, false)));\r\n\t\t\tscrolling = scrollThisInstance; // in case another function catches scrolling as false in between when it is not\r\n\t\t}\r\n\t}, 30),\r\n\r\n\t_clearAutoScrolls = function () {\r\n\t\tautoScrolls.forEach(function(autoScroll) {\r\n\t\t\tclearInterval(autoScroll.pid);\r\n\t\t});\r\n\t\tautoScrolls = [];\r\n\t},\r\n\r\n\t_handleAutoScroll = function(evt, options,fallback) {\r\n\t\tvar x = evt.clientX,\r\n\t\t\ty = evt.clientY,\r\n\r\n\t\t\telem = document.elementFromPoint(x, y);\r\n\r\n\t\t// IE does not seem to have native autoscroll,\r\n\t\t// Edge's autoscroll seems too conditional,\r\n\t\t// MACOS Safari does not have autoscroll,\r\n\t\t// Firefox and Chrome are good\r\n\t\tif (fallback || Edge || IE11OrLess || Safari) {\r\n\t\t\t_throttleTimeout = _autoScroll(evt, options, elem, fallback);\r\n\r\n\t\t\t// Listener for pointer element change\r\n\t\t\tvar ogElemScroller = _getParentAutoScrollElement(elem, true);\r\n\t\t\tif (\r\n\t\t\t\tscrolling &&\r\n\t\t\t\t(\r\n\t\t\t\t\t!pointerElemChangedInterval ||\r\n\t\t\t\t\tx !== lastPointerElemX ||\r\n\t\t\t\t\ty !== lastPointerElemY\r\n\t\t\t\t)\r\n\t\t\t) {\r\n\r\n\t\t\t\tpointerElemChangedInterval && clearInterval(pointerElemChangedInterval);\r\n\t\t\t\t// Detect for pointer elem change, emulating native DnD behaviour\r\n\t\t\t\tpointerElemChangedInterval = setInterval(function() {\r\n\t\t\t\t\tif (!dragEl) return;\r\n\t\t\t\t\t// could also check if scroll direction on newElem changes due to parent autoscrolling\r\n\t\t\t\t\tvar newElem = _getParentAutoScrollElement(document.elementFromPoint(x, y), true);\r\n\t\t\t\t\tif (newElem !== ogElemScroller) {\r\n\t\t\t\t\t\togElemScroller = newElem;\r\n\t\t\t\t\t\t_clearAutoScrolls();\r\n\t\t\t\t\t\t_throttleTimeout = _autoScroll(evt, options, ogElemScroller, fallback);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 10);\r\n\t\t\t\tlastPointerElemX = x;\r\n\t\t\t\tlastPointerElemY = y;\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\t// if DnD is enabled (and browser has good autoscrolling), first autoscroll will already scroll, so get parent autoscroll of first autoscroll\r\n\t\t\tif (!options.bubbleScroll || _getParentAutoScrollElement(elem, true) === scrollingElement()) {\r\n\t\t\t\t_clearAutoScrolls();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_throttleTimeout = _autoScroll(evt, options, _getParentAutoScrollElement(elem, false), false);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tvar _throttleTimeout;\r\n\tfunction _throttle(callback, ms) {\r\n\t\treturn langx.debounce(callback,ms);\r\n\t}\r\n\r\n\tfunction _cancelThrottle() {\r\n\t\t//clearTimeout(_throttleTimeout);\r\n\t\t//_throttleTimeout = void 0;\r\n\t\tif (_throttleTimeout && _throttleTimeout.stop) {\r\n\t\t\t_throttleTimeout.stop();\r\n\t\t\t_throttleTimeout = void 0;\r\n\t\t}\r\n\t}\r\n\r\n\t\r\n\treturn {\r\n\t\tautoScrolls,\r\n\t\t\r\n\t\t_isScrolledPast,\r\n\t\t_getRelativeScrollOffset,\r\n\t\t_autoScroll,\r\n\r\n\t\t_clearAutoScrolls,\r\n\t\t_handleAutoScroll,\r\n\r\n\t\t_throttle,\r\n\t\t_cancelThrottle\r\n\t}\r\n});"]}