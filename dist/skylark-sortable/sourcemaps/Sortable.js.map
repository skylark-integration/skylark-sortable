{"version":3,"sources":["Sortable.js"],"names":["define","skylark","langx","isBrowser","isMobile","$","browser","noder","finder","geom","styler","eventer","transforms","oriented","plugins","touch","dnd","Draggable","Droppable","_prepareGroup","options","toFn","value","pull","to","from","dragEl","evt","sameGroup","group","name","otherGroup","join","indexOf","originalGroup","checkPull","checkPut","put","revertClone","win","window","document","parseInt","setTimeout","supportDraggable","Polymer","ie","edge","firefox","safari","apple","device","createElement","Sortable","support","cssPointerEvents","Plugin","inherit","klassName","pluginName","sort","disabled","store","handle","scroll","scrollSensitivity","scrollSpeed","bubbleScroll","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","target","ghostEl","this","el","mixin","excluding","ghostClass","chosenClass","dragClass","ignore","filter","preventOnFilter","animation","easing","setData","dataTransfer","textContent","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","devicePixelRatio","fallbackOnBody","forceFallback","fallbackClass","fallbackTolerance","fallbackOffset","x","y","emptyInsertThreshold","_construct","fn","overrided","expando","draggable","test","nodeName","charAt","bind","nativeDraggable","sortables","push","get","droppable","_getDirection","call","_animate","prevRect","currentRect","scaleX","scaleY","ms","boundingRect","nodeType","left","width","top","height","matrix","a","d","css","reflow","animated","clearTimeout","_hideClone","_showClone","putSortable","rootEl","active","nextEl","lastPutMode","cloneEl","cloneHidden","contains","insertBefore","appendChild","show","_dispatchEvent","sortable","targetEl","toEl","fromEl","startIndex","newIndex","startDraggableIndex","newDraggableIndex","originalEvt","onName","toUpperCase","substr","create","item","clone","oldIndex","oldDraggableIndex","originalEvent","pullMode","undefined","dispatchEvent","toArray","order","children","i","n","length","closest","getAttribute","generateId","items","forEach","id","removeChild","save","set","selector","option","destroy","Array","prototype","querySelectorAll","removeAttribute","splice","version","attach"],"mappings":"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","file":"../Sortable.js","sourcesContent":["define([\r\n\t\"skylark-langx/skylark\",\r\n\t\"skylark-langx/langx\",\r\n\t\"skylark-langx-hoster/is-browser\",\r\n\t\"skylark-langx-hoster/is-mobile\",\r\n\t\"skylark-domx-query\",\r\n\t\"skylark-domx-browser\",\r\n\t\"skylark-domx-noder\",\r\n\t\"skylark-domx-finder\",\r\n\t\"skylark-domx-geom\",\r\n\t\"skylark-domx-styler\",\r\n\t\"skylark-domx-eventer\",\r\n\t\"skylark-domx-transforms\",\r\n\t\"skylark-domx-layouts/oriented\",\r\n    \"skylark-domx-plugins-base\",\r\n\t\"skylark-devices-points/touch\",\r\n\t\"./dnd\",\r\n\t\"./draggable\",\r\n\t\"./droppable\"\r\n],function(\r\n\tskylark,\r\n\tlangx,\r\n\tisBrowser,\r\n\tisMobile,\r\n\t$,\r\n\tbrowser,\r\n\tnoder,\r\n\tfinder,\r\n\tgeom,\r\n\tstyler,\r\n\teventer,\r\n\ttransforms,\r\n\toriented,\r\n\tplugins,\r\n\ttouch,\r\n\tdnd,\r\n\tDraggable,\r\n\tDroppable\r\n){\r\n\r\n\t'use strict';\r\n\r\n\r\n\t/**\r\n\t * Returns the index of an element within its parent for a selected set of\r\n\t * elements\r\n\t * @param  {HTMLElement} el\r\n\t * @param  {selector} selector\r\n\t * @return {number}\r\n\t */\r\n\tfunction _index(el, selector) {\r\n\t\treturn finder.index(el,function(el){\r\n\t\t\tif ((el.nodeName.toUpperCase() !== 'TEMPLATE') && el !== dnd.cloneEl && (!selector || finder.matches(el, selector))) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\t\t\t\r\n\t\t})\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\tvar \r\n\r\n\t\t///realDragElRect, // dragEl rect after current animation\r\n\r\n\t\t/** @const */\r\n\t\tR_SPACE = /\\s+/g,\r\n\r\n\t\twin = window,\r\n\t\tdocument = win.document,\r\n\t\tparseInt = win.parseInt,\r\n\t\tsetTimeout = win.setTimeout,\r\n\r\n\t\tPolymer = win.Polymer,\r\n\r\n\t\tcaptureMode = {\r\n\t\t\tcapture: false,\r\n\t\t\tpassive: false\r\n\t\t},\r\n\r\n\r\n\t\tIE11OrLess = isBrowser && isBrowser.ie,\r\n\t\tEdge = isBrowser && isBrowser.edge,\r\n\t\tFireFox = isBrowser && isBrowser.firefox,\r\n\t\tSafari = isBrowser && isBrowser.safari,\r\n\r\n\t\tIOS = isMobile && isMobile.apple.device,\r\n\r\n\t\t// This will not pass for IE9, because IE9 DnD only works on anchors\r\n\t\tsupportDraggable = ('draggable' in document.createElement('div')) && !isMobile.apple.device,\r\n\r\n\r\n\t\tsupportCssPointerEvents = browser.support.cssPointerEvents,\r\n\r\n\t\t_alignedSilent = false,\r\n\r\n\t\t//savedInputChecked = [],\r\n\r\n\r\n\t\t_prepareGroup = function (options) {\r\n\t\t\tfunction toFn(value, pull) {\r\n\t\t\t\treturn function(to, from, dragEl, evt) {\r\n\t\t\t\t\tvar sameGroup = to.options.group.name &&\r\n\t\t\t\t\t\t\t\t\tfrom.options.group.name &&\r\n\t\t\t\t\t\t\t\t\tto.options.group.name === from.options.group.name;\r\n\r\n\t\t\t\t\tif (value == null && (pull || sameGroup)) {\r\n\t\t\t\t\t\t// Default pull value\r\n\t\t\t\t\t\t// Default pull and put value if same group\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else if (value == null || value === false) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t} else if (pull && value === 'clone') {\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t} else if (typeof value === 'function') {\r\n\t\t\t\t\t\treturn toFn(value(to, from, dragEl, evt), pull)(to, from, dragEl, evt);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar otherGroup = (pull ? to : from).options.group.name;\r\n\r\n\t\t\t\t\t\treturn (value === true ||\r\n\t\t\t\t\t\t(typeof value === 'string' && value === otherGroup) ||\r\n\t\t\t\t\t\t(value.join && value.indexOf(otherGroup) > -1));\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tvar group = {};\r\n\t\t\tvar originalGroup = options.group;\r\n\r\n\t\t\tif (!originalGroup || typeof originalGroup != 'object') {\r\n\t\t\t\toriginalGroup = {name: originalGroup};\r\n\t\t\t}\r\n\r\n\t\t\tgroup.name = originalGroup.name;\r\n\t\t\tgroup.checkPull = toFn(originalGroup.pull, true);\r\n\t\t\tgroup.checkPut = toFn(originalGroup.put);\r\n\t\t\tgroup.revertClone = originalGroup.revertClone;\r\n\r\n\t\t\toptions.group = group;\r\n\t\t};\r\n\r\n\r\n\tvar Sortable =  plugins.Plugin.inherit({\r\n        klassName: \"Sortable\",\r\n        \r\n        pluginName : \"intg.sortable\",\r\n\r\n\r\n\t\toptions : {\r\n\t\t\tgroup: null,\r\n\t\t\tsort: true,\r\n\t\t\tdisabled: false,\r\n\t\t\tstore: null,\r\n\t\t\thandle: null,\r\n\t\t\tscroll: true,\r\n\t\t\tscrollSensitivity: 30,\r\n\t\t\tscrollSpeed: 10,\r\n\t\t\tbubbleScroll: true,\r\n\t\t\t//draggable: /[uo]l/i.test(el.nodeName) ? '>li' : '>*',\r\n\t\t\tswapThreshold: 1, // percentage; 0 <= x <= 1\r\n\t\t\tinvertSwap: false, // invert always\r\n\t\t\tinvertedSwapThreshold: null, // will be set to same as swapThreshold if default\r\n\t\t\tremoveCloneOnHide: true,\r\n\t\t\tdirection: function(evt, target, dragEl,ghostEl) {\r\n\t\t\t\treturn oriented(this.el, langx.mixin({\r\n\t\t\t\t\t\t\t\t\texcluding : [ghostEl,dragEl]\r\n\t\t\t\t\t\t\t\t},this.options));\r\n\t\t\t},\r\n\t\t\tghostClass: 'sortable-ghost',\r\n\t\t\tchosenClass: 'sortable-chosen',\r\n\t\t\tdragClass: 'sortable-drag',\r\n\t\t\tignore: 'a, img',\r\n\t\t\tfilter: null,\r\n\t\t\tpreventOnFilter: true,\r\n\t\t\tanimation: 0,\r\n\t\t\teasing: null,\r\n\t\t\tsetData: function (dataTransfer, dragEl) {\r\n\t\t\t\tdataTransfer.setData('Text', dragEl.textContent);\r\n\t\t\t},\r\n\t\t\tdropBubble: false,\r\n\t\t\tdragoverBubble: false,\r\n\t\t\tdataIdAttr: 'data-id',\r\n\t\t\tdelay: 0,\r\n\t\t\tdelayOnTouchOnly: false,\r\n\t\t\ttouchStartThreshold: parseInt(window.devicePixelRatio, 10) || 1,\r\n\r\n\r\n\t\t\tfallbackOnBody: true,  //fix\r\n\r\n\t\t\tforceFallback: false,\r\n\t\t\tfallbackClass: 'sortable-fallback',\r\n\t\t\tfallbackTolerance: 0,\r\n\t\t\tfallbackOffset: {x: 0, y: 0},\r\n\t\t\t//supportPointer: Sortable.supportPointer !== false && ('PointerEvent' in window),\r\n\t\t\temptyInsertThreshold: 5\r\n\t\t},\r\n\r\n\r\n\t\t/**\r\n\t\t * @class  Sortable\r\n\t\t * @param  {HTMLElement}  el\r\n\t\t * @param  {Object}       [options]\r\n\t\t */\r\n\t\t_construct : function Sortable(el, options) {\r\n            this.overrided(el,options);\r\n\r\n\t\t\tthis.el = el; // root element\r\n\r\n\t\t\t// Export instance\r\n\t\t\tel[dnd.expando] = this;\r\n\r\n\t\t\toptions = this.options;\r\n\r\n\t\t\toptions.draggable = options.draggable || (/[uo]l/i.test(el.nodeName) ? '>li' : '>*');\r\n\r\n\r\n\t\t\t_prepareGroup(options);\r\n\r\n\t\t\t// Bind all private methods\r\n\t\t\tfor (var fn in this) {\r\n\t\t\t\tif (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\r\n\t\t\t\t\tthis[fn] = this[fn].bind(this);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// Setup drag mode\r\n\t\t\tthis.nativeDraggable = options.forceFallback ? false : supportDraggable;\r\n\r\n\t\t\tif (this.nativeDraggable) {\r\n\t\t\t\t// Touch start threshold cannot be greater than the native dragstart threshold\r\n\t\t\t\tthis.options.touchStartThreshold = 1;\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t\tdnd.sortables.push(this.el);\r\n\r\n\t\t\t// Restore sorting\r\n\t\t\toptions.store && options.store.get && this.sort(options.store.get(this) || []);\r\n\r\n\r\n\t\t\tthis.draggable = new Draggable(this,this.options);\r\n\r\n\t\t\tthis.droppable = new Droppable(this,this.options);\r\n\r\n\t\t},\r\n\r\n\t\t_getDirection: function(evt, target) {\r\n\t\t\tvar  dragEl = dnd.dragEl;\r\n\r\n\t\t\treturn (typeof this.options.direction === 'function') ? this.options.direction.call(this, evt, target, dragEl,null) : this.options.direction;\r\n\t\t},\r\n\r\n\t\t_animate: function (prevRect, target) {\r\n\t\t\tvar ms = this.options.animation,\r\n\t\t\t\tdragEl = dnd.dragEl;\r\n\r\n\t\t\tif (ms) {\r\n\t\t\t\tvar currentRect = geom.boundingRect(target);\r\n\r\n\t\t\t\t////if (target === dragEl) {\r\n\t\t\t\t///\trealDragElRect = currentRect;\r\n\t\t\t\t///}\r\n\r\n\t\t\t\tif (prevRect.nodeType === 1) {\r\n\t\t\t\t\tprevRect = geom.boundingRect(prevRect);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check if actually moving position\r\n\t\t\t\tif ((prevRect.left + prevRect.width / 2) !== (currentRect.left + currentRect.width / 2)\r\n\t\t\t\t\t|| (prevRect.top + prevRect.height / 2) !== (currentRect.top + currentRect.height / 2)\r\n\t\t\t\t) {\r\n\t\t\t\t\tvar matrix = transforms.matrix(this.el),\r\n\t\t\t\t\t\tscaleX = matrix && matrix.a,\r\n\t\t\t\t\t\tscaleY = matrix && matrix.d;\r\n\r\n\t\t\t\t\tstyler.css(target, 'transition', 'none');\r\n\t\t\t\t\tstyler.css(target, 'transform', 'translate3d('\r\n\t\t\t\t\t\t+ (prevRect.left - currentRect.left) / (scaleX ? scaleX : 1) + 'px,'\r\n\t\t\t\t\t\t+ (prevRect.top - currentRect.top) / (scaleY ? scaleY : 1) + 'px,0)'\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tnoder.reflow(target);\r\n\t\t\t\t\tstyler.css(target, 'transition', 'transform ' + ms + 'ms' + (this.options.easing ? ' ' + this.options.easing : ''));\r\n\t\t\t\t\tstyler.css(target, 'transform', 'translate3d(0,0,0)');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t(typeof target.animated === 'number') && clearTimeout(target.animated);\r\n\t\t\t\ttarget.animated = setTimeout(function () {\r\n\t\t\t\t\tstyler.css(target, 'transition', '');\r\n\t\t\t\t\tstyler.css(target, 'transform', '');\r\n\t\t\t\t\ttarget.animated = false;\r\n\t\t\t\t}, ms);\r\n\t\t\t}\r\n\t\t},\r\n\r\n        _hideClone: function() {\r\n        \treturn;\r\n            if (!dnd.cloneEl.cloneHidden) {\r\n                styler.hide(dnd.cloneEl);\r\n                dnd.cloneEl.cloneHidden = true;\r\n                if (dnd.cloneEl.parentNode && this.options.removeCloneOnHide) {\r\n                    noder.remove(dnd.cloneEl);\r\n                }\r\n            }\r\n        },\r\n\r\n        _showClone: function(putSortable) {\r\n            var rootEl = dnd.active.el,\r\n                nextEl = dnd.nextEl;\r\n\r\n            if (putSortable.lastPutMode !== 'clone') {\r\n                this._hideClone();\r\n                return;\r\n            }\r\n\r\n            if (dnd.cloneEl.cloneHidden) {\r\n                // show clone at dragEl or original position\r\n                if (rootEl.contains(dnd.dragEl) && !this.options.group.revertClone) {\r\n                    rootEl.insertBefore(dnd.cloneEl, dnd.dragEl);\r\n                } else if (nextEl) {\r\n                    rootEl.insertBefore(dnd.cloneEl, nextEl);\r\n                } else {\r\n                    rootEl.appendChild(dnd.cloneEl);\r\n                }\r\n\r\n                if (this.options.group.revertClone) {\r\n                    this._animate(dnd.dragEl, dnd.cloneEl);\r\n                }\r\n                styler.show(dnd.cloneEl);\r\n                dnd.cloneEl.cloneHidden = false;\r\n            }\r\n        },\r\n\r\n\t\t_dispatchEvent : function (\r\n\t\t\tsortable, \r\n\t\t\trootEl, \r\n\t\t\tname,\r\n\t\t\ttargetEl, \r\n\t\t\ttoEl, \r\n\t\t\tfromEl,\r\n\t\t\tstartIndex, \r\n\t\t\tnewIndex,\r\n\t\t\tstartDraggableIndex, \r\n\t\t\tnewDraggableIndex,\r\n\t\t\toriginalEvt\r\n\t\t) {\r\n\t\t\tsortable = (sortable || rootEl[dnd.expando]);\r\n\t\t\tvar evt,\r\n\t\t\t\toptions = sortable.options,\r\n\t\t\t\tonName = 'on' + name.charAt(0).toUpperCase() + name.substr(1),\r\n\t\t\t\tputSortable = dnd.putSortable;\r\n\r\n\t\t\tevt = eventer.create(name,{\r\n\t\t\t\tto : toEl || rootEl,\r\n\t\t\t\tfrom : fromEl || rootEl,\r\n\t\t\t\titem : targetEl || rootEl,\r\n\t\t\t\tclone : dnd.cloneEl,\r\n\t\t\t\toldIndex : startIndex,\r\n\t\t\t\tnewIndex : newIndex,\r\n\t\t\t\toldDraggableIndex : startDraggableIndex,\r\n\t\t\t\tnewDraggableIndex : newDraggableIndex,\r\n\t\t\t\toriginalEvent : originalEvt,\r\n\t\t\t\tpullMode : putSortable ? putSortable.lastPutMode : undefined\r\n\t\t\t});\r\n\t\t\tif (rootEl) {\r\n\t\t\t\trootEl.dispatchEvent(evt);\r\n\t\t\t}\r\n\r\n\t\t\tif (options[onName]) {\r\n\t\t\t\toptions[onName].call(sortable, evt);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Serializes the item into an array of string.\r\n\t\t * @returns {String[]}\r\n\t\t */\r\n\t\ttoArray: function () {\r\n\t\t\tvar order = [],\r\n\t\t\t\tel,\r\n\t\t\t\tchildren = this.el.children,\r\n\t\t\t\ti = 0,\r\n\t\t\t\tn = children.length,\r\n\t\t\t\toptions = this.options;\r\n\r\n\t\t\tfor (; i < n; i++) {\r\n\t\t\t\tel = children[i];\r\n\t\t\t\tif (finder.closest(el, options.draggable, this.el, false)) {\r\n\t\t\t\t\torder.push(el.getAttribute(options.dataIdAttr) || noder.generateId(el));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn order;\r\n\t\t},\r\n\r\n\r\n\t\t/**\r\n\t\t * Sorts the elements according to the array.\r\n\t\t * @param  {String[]}  order  order of the items\r\n\t\t */\r\n\t\tsort: function (order) {\r\n\t\t\tvar items = {}, rootEl = this.el;\r\n\r\n\t\t\tthis.toArray().forEach(function (id, i) {\r\n\t\t\t\tvar el = rootEl.children[i];\r\n\r\n\t\t\t\tif (finder.closest(el, this.options.draggable, rootEl, false)) {\r\n\t\t\t\t\titems[id] = el;\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\r\n\t\t\torder.forEach(function (id) {\r\n\t\t\t\tif (items[id]) {\r\n\t\t\t\t\trootEl.removeChild(items[id]);\r\n\t\t\t\t\trootEl.appendChild(items[id]);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\r\n\t\t/**\r\n\t\t * Save the current sorting\r\n\t\t */\r\n\t\tsave: function () {\r\n\t\t\tvar store = this.options.store;\r\n\t\t\tstore && store.set && store.set(this);\r\n\t\t},\r\n\r\n\r\n\t\t/**\r\n\t\t * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\r\n\t\t * @param   {HTMLElement}  el\r\n\t\t * @param   {String}       [selector]  default: `options.draggable`\r\n\t\t * @returns {HTMLElement|null}\r\n\t\t */\r\n\t\tclosest: function (el, selector) {\r\n\t\t\treturn finder.closest(el, selector || this.options.draggable, this.el, false);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Set/get option\r\n\t\t * @param   {string} name\r\n\t\t * @param   {*}      [value]\r\n\t\t * @returns {*}\r\n\t\t */\r\n\t\toption: function (name, value) {\r\n\t\t\tvar options = this.options;\r\n\r\n\t\t\tif (value === void 0) {\r\n\t\t\t\treturn options[name];\r\n\t\t\t} else {\r\n\t\t\t\toptions[name] = value;\r\n\r\n\t\t\t\tif (name === 'group') {\r\n\t\t\t\t\t_prepareGroup(options);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\t/**\r\n\t\t * Destroy\r\n\t\t */\r\n\t\tdestroy: function () {\r\n\t\t\tvar el = this.el;\r\n\r\n\t\t\tel[dnd.expando] = null;\r\n\r\n\r\n\t\t\t// Remove draggable attributes\r\n\t\t\tArray.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\r\n\t\t\t\tel.removeAttribute('draggable');\r\n\t\t\t});\r\n\r\n\t\t\tdnd.sortables.splice(dnd.sortables.indexOf(this.el), 1);\r\n\r\n\t\t\tthis.el = el = null;\r\n\t\t}\r\n\t});\r\n\r\n\r\n\r\n\r\n\r\n\t/**\r\n\t * Create sortable instance\r\n\t * @param {HTMLElement}  el\r\n\t * @param {Object}      [options]\r\n\t */\r\n\tSortable.create = function (el, options) {\r\n\t\treturn new Sortable(el, options);\r\n\t};\r\n\r\n\r\n\t// Export\r\n\tSortable.version = '1.9.0';\r\n\r\n\treturn skylark.attach(\"intg.Sortable\",Sortable);\r\n});"]}