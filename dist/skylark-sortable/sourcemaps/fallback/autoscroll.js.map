{"version":3,"sources":["fallback/autoscroll.js"],"names":["define","langx","isBrowser","geom","styler","scrollingElement","scrollEl","scrollCustomFn","pointerElemChangedInterval","lastPointerElemX","lastPointerElemY","autoScrolls","scrolling","scrollParentEl","IE11OrLess","ie","Edge","edge","Safari","firefox","safari","_throttleTimeout","_getParentAutoScrollElement","el","includeSelf","getBoundingClientRect","elem","gotSelf","clientWidth","scrollWidth","clientHeight","scrollHeight","elemCSS","css","overflowX","overflowY","document","body","parentNode","_autoScroll","_throttle","evt","options","rootEl","isFallback","expando","scroll","_this","window","sens","scrollSensitivity","speed","scrollSpeed","x","clientX","y","clientY","winScroller","scrollThisInstance","_clearAutoScrolls","scrollFn","layersOut","currentParent","vx","vy","canScrollX","canScrollY","scrollPosX","scrollPosY","rect","boundingRect","top","bottom","left","right","width","height","scrollLeft","scrollTop","Math","abs","i","clearInterval","pid","setInterval","scrollOffsetY","this","layer","scrollOffsetX","call","touchEvt","scrollBy","bind","bubbleScroll","forEach","autoScroll","callback","ms","debounce","_isScrolledPast","side","parent","elSide","parentSide","_getRelativeScrollOffset","offsetLeft","offsetTop","matrix","transforms","scaleX","a","scaleY","d","_handleAutoScroll","fallback","elementFromPoint","ogElemScroller","newElem","_cancelThrottle","stop","_nulling","length"],"mappings":"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","file":"../../fallback/autoscroll.js","sourcesContent":["define([\n\t\"skylark-langx/langx\",\n\t\"skylark-langx-hoster/isBrowser\",\n\t\"skylark-domx-geom\",\n\t\"skylark-domx-styler\",\n\t\"skylark-domx-plugins-scrolls/scrolling-element\"\n],function(\n\tlangx,\n\tisBrowser,\n\tgeom,\n\tstyler,\n\tscrollingElement\n){\n    'use strict';\n\n\tvar autoScrolls = [],\n\t\tscrolling = false,\n\t\tscrollEl,\n\t\tscrollCustomFn,\n\t\tpointerElemChangedInterval,\n\n\t\tlastPointerElemX,\n\t\tlastPointerElemY,\n\n\n\t\tscrollParentEl = null;\n\n\tvar\n\t\tIE11OrLess = isBrowser && isBrowser.ie,\n\t\tEdge = isBrowser && isBrowser.edge,\n\t\tFireFox = isBrowser && isBrowser.firefox,\n\t\tSafari = isBrowser && isBrowser.safari;\n\n\n\t/**\n\t * Checks if a side of an element is scrolled past a side of it's parents\n\t * @param  {HTMLElement}  el       The element who's side being scrolled out of view is in question\n\t * @param  {String}       side     Side of the element in question ('top', 'left', 'right', 'bottom')\n\t * @return {HTMLElement}           The parent scroll element that the el's side is scrolled past, or null if there is no such element\n\t */\n\tfunction _isScrolledPast(el, side) {\n\t\tvar parent = _getParentAutoScrollElement(el, true),\n\t\t\telSide = geom.boundingRect(el)[side];\n\n\t\t/* jshint boss:true */\n\t\twhile (parent) {\n\t\t\tvar parentSide = geom.boundingRect(parent)[side],\n\t\t\t\tvisible;\n\n\t\t\tif (side === 'top' || side === 'left') {\n\t\t\t\tvisible = elSide >= parentSide;\n\t\t\t} else {\n\t\t\t\tvisible = elSide <= parentSide;\n\t\t\t}\n\n\t\t\tif (!visible) return parent;\n\n\t\t\tif (parent === scrollingElement()) break;\n\n\t\t\tparent = _getParentAutoScrollElement(parent, false);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Returns the scroll offset of the given element, added with all the scroll offsets of parent elements.\n\t * The value is returned in real pixels.\n\t * @param  {HTMLElement} el\n\t * @return {Array}             Offsets in the format of [left, top]\n\t */\n\tfunction _getRelativeScrollOffset(el) {\n\t\tvar offsetLeft = 0,\n\t\t\toffsetTop = 0,\n\t\t\twinScroller = scrollingElement();\n\n\t\tif (el) {\n\t\t\tdo {\n\t\t\t\tvar matrix = transforms.matrix(el),\n\t\t\t\t\tscaleX = matrix.a,\n\t\t\t\t\tscaleY = matrix.d;\n\n\t\t\t\toffsetLeft += el.scrollLeft * scaleX;\n\t\t\t\toffsetTop += el.scrollTop * scaleY;\n\t\t\t} while (el !== winScroller && (el = el.parentNode));\n\t\t}\n\n\t\treturn [offsetLeft, offsetTop];\n\t}\n\n\tvar _getParentAutoScrollElement = function(el, includeSelf) {\n\t\t// skip to window\n\t\tif (!el || !el.getBoundingClientRect) return scrollingElement();\n\n\t\tvar elem = el;\n\t\tvar gotSelf = false;\n\t\tdo {\n\t\t\t// we don't need to get elem css if it isn't even overflowing in the first place (performance)\n\t\t\tif (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {\n\t\t\t\tvar elemCSS = styler.css(elem);\n\t\t\t\tif (\n\t\t\t\t\telem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == 'auto' || elemCSS.overflowX == 'scroll') ||\n\t\t\t\t\telem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == 'auto' || elemCSS.overflowY == 'scroll')\n\t\t\t\t) {\n\t\t\t\t\tif (!elem || !elem.getBoundingClientRect || elem === document.body) return scrollingElement();\n\n\t\t\t\t\tif (gotSelf || includeSelf) return elem;\n\t\t\t\t\tgotSelf = true;\n\t\t\t\t}\n\t\t\t}\n\t\t/* jshint boss:true */\n\t\t} while (elem = elem.parentNode);\n\n\t\treturn scrollingElement();\n\t},\n\n\n\t_autoScroll = _throttle(function (/**Event*/evt, /**Object*/options, /**HTMLElement*/rootEl, /**Boolean*/isFallback,expando) {\n\t\t// Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n\t\tif (options.scroll) {\n\t\t\tvar _this = rootEl ? rootEl[expando] : window,\n\t\t\t\tsens = options.scrollSensitivity,\n\t\t\t\tspeed = options.scrollSpeed,\n\n\t\t\t\tx = evt.clientX,\n\t\t\t\ty = evt.clientY,\n\n\t\t\t\twinScroller = scrollingElement(),\n\n\t\t\t\tscrollThisInstance = false;\n\n\t\t\t// Detect scrollEl\n\t\t\tif (scrollParentEl !== rootEl) {\n\t\t\t\t_clearAutoScrolls();\n\n\t\t\t\tscrollEl = options.scroll;\n\t\t\t\tscrollCustomFn = options.scrollFn;\n\n\t\t\t\tif (scrollEl === true) {\n\t\t\t\t\tscrollEl = _getParentAutoScrollElement(rootEl, true);\n\t\t\t\t\tscrollParentEl = scrollEl;\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\tvar layersOut = 0;\n\t\t\tvar currentParent = scrollEl;\n\t\t\tdo {\n\t\t\t\tvar\tel = currentParent,\n\t\t\t\t\trect = geom.boundingRect(el),\n\n\t\t\t\t\ttop = rect.top,\n\t\t\t\t\tbottom = rect.bottom,\n\t\t\t\t\tleft = rect.left,\n\t\t\t\t\tright = rect.right,\n\n\t\t\t\t\twidth = rect.width,\n\t\t\t\t\theight = rect.height,\n\n\t\t\t\t\tscrollWidth,\n\t\t\t\t\tscrollHeight,\n\n\t\t\t\t\tcss,\n\n\t\t\t\t\tvx,\n\t\t\t\t\tvy,\n\n\t\t\t\t\tcanScrollX,\n\t\t\t\t\tcanScrollY,\n\n\t\t\t\t\tscrollPosX,\n\t\t\t\t\tscrollPosY;\n\n\n\t\t\t\tscrollWidth = el.scrollWidth;\n\t\t\t\tscrollHeight = el.scrollHeight;\n\n\t\t\t\tcss = styler.css(el);\n\n\t\t\t\tscrollPosX = el.scrollLeft;\n\t\t\t\tscrollPosY = el.scrollTop;\n\n\t\t\t\tif (el === winScroller) {\n\t\t\t\t\tcanScrollX = width < scrollWidth && (css.overflowX === 'auto' || css.overflowX === 'scroll' || css.overflowX === 'visible');\n\t\t\t\t\tcanScrollY = height < scrollHeight && (css.overflowY === 'auto' || css.overflowY === 'scroll' || css.overflowY === 'visible');\n\t\t\t\t} else {\n\t\t\t\t\tcanScrollX = width < scrollWidth && (css.overflowX === 'auto' || css.overflowX === 'scroll');\n\t\t\t\t\tcanScrollY = height < scrollHeight && (css.overflowY === 'auto' || css.overflowY === 'scroll');\n\t\t\t\t}\n\n\t\t\t\tvx = canScrollX && (Math.abs(right - x) <= sens && (scrollPosX + width) < scrollWidth) - (Math.abs(left - x) <= sens && !!scrollPosX);\n\n\t\t\t\tvy = canScrollY && (Math.abs(bottom - y) <= sens && (scrollPosY + height) < scrollHeight) - (Math.abs(top - y) <= sens && !!scrollPosY);\n\n\n\t\t\t\tif (!autoScrolls[layersOut]) {\n\t\t\t\t\tfor (var i = 0; i <= layersOut; i++) {\n\t\t\t\t\t\tif (!autoScrolls[i]) {\n\t\t\t\t\t\t\tautoScrolls[i] = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (autoScrolls[layersOut].vx != vx || autoScrolls[layersOut].vy != vy || autoScrolls[layersOut].el !== el) {\n\t\t\t\t\tautoScrolls[layersOut].el = el;\n\t\t\t\t\tautoScrolls[layersOut].vx = vx;\n\t\t\t\t\tautoScrolls[layersOut].vy = vy;\n\n\t\t\t\t\tclearInterval(autoScrolls[layersOut].pid);\n\n\t\t\t\t\tif (el && (vx != 0 || vy != 0)) {\n\t\t\t\t\t\tscrollThisInstance = true;\n\t\t\t\t\t\t/* jshint loopfunc:true */\n\t\t\t\t\t\tautoScrolls[layersOut].pid = setInterval((function () {\n\t\t\t\t\t\t\t// emulate drag over during autoscroll (fallback), emulating native DnD behaviour\n\t\t\t\t\t\t\t///if (isFallback && this.layer === 0) {\n\t\t\t\t\t\t\t///\tSortable.active._emulateDragOver(true);\n\t\t\t\t\t\t\t///\tSortable.active._onTouchMove(toudrachEvt, true);\n\t\t\t\t\t\t\t///}\n\t\t\t\t\t\t\tvar scrollOffsetY = autoScrolls[this.layer].vy ? autoScrolls[this.layer].vy * speed : 0;\n\t\t\t\t\t\t\tvar scrollOffsetX = autoScrolls[this.layer].vx ? autoScrolls[this.layer].vx * speed : 0;\n\n\t\t\t\t\t\t\tif ('function' === typeof(scrollCustomFn)) {\n\t\t\t\t\t\t\t\tif (scrollCustomFn.call(_this, scrollOffsetX, scrollOffsetY, evt, touchEvt, autoScrolls[this.layer].el) !== 'continue') {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tgeom.scrollBy(autoScrolls[this.layer].el, scrollOffsetX, scrollOffsetY);\n\t\t\t\t\t\t}).bind({layer: layersOut}), 24);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlayersOut++;\n\t\t\t} while (options.bubbleScroll && currentParent !== winScroller && (currentParent = _getParentAutoScrollElement(currentParent, false)));\n\t\t\tscrolling = scrollThisInstance; // in case another function catches scrolling as false in between when it is not\n\t\t}\n\t}, 30),\n\n\t_clearAutoScrolls = function () {\n\t\tautoScrolls.forEach(function(autoScroll) {\n\t\t\tclearInterval(autoScroll.pid);\n\t\t});\n\t\tautoScrolls = [];\n\t},\n\n\t_handleAutoScroll = function(evt, options,fallback,expando) {\n\t\tvar x = evt.clientX,\n\t\t\ty = evt.clientY,\n\n\t\t\telem = document.elementFromPoint(x, y);\n\n\t\t// IE does not seem to have native autoscroll,\n\t\t// Edge's autoscroll seems too conditional,\n\t\t// MACOS Safari does not have autoscroll,\n\t\t// Firefox and Chrome are good\n\t\tif (fallback || Edge || IE11OrLess || Safari) {\n\t\t\t_throttleTimeout = _autoScroll(evt, options, elem, fallback,expando);\n\n\t\t\t// Listener for pointer element change\n\t\t\tvar ogElemScroller = _getParentAutoScrollElement(elem, true);\n\t\t\tif (\n\t\t\t\tscrolling &&\n\t\t\t\t(\n\t\t\t\t\t!pointerElemChangedInterval ||\n\t\t\t\t\tx !== lastPointerElemX ||\n\t\t\t\t\ty !== lastPointerElemY\n\t\t\t\t)\n\t\t\t) {\n\n\t\t\t\tpointerElemChangedInterval && clearInterval(pointerElemChangedInterval);\n\t\t\t\t// Detect for pointer elem change, emulating native DnD behaviour\n\t\t\t\tpointerElemChangedInterval = setInterval(function() {\n\t\t\t\t\t//if (!dragEl) return;\n\t\t\t\t\t// could also check if scroll direction on newElem changes due to parent autoscrolling\n\t\t\t\t\tvar newElem = _getParentAutoScrollElement(document.elementFromPoint(x, y), true);\n\t\t\t\t\tif (newElem !== ogElemScroller) {\n\t\t\t\t\t\togElemScroller = newElem;\n\t\t\t\t\t\t_clearAutoScrolls();\n\t\t\t\t\t\t_throttleTimeout = _autoScroll(evt, options, ogElemScroller, fallback);\n\t\t\t\t\t}\n\t\t\t\t}, 10);\n\t\t\t\tlastPointerElemX = x;\n\t\t\t\tlastPointerElemY = y;\n\t\t\t}\n\n\t\t} else {\n\t\t\t// if DnD is enabled (and browser has good autoscrolling), first autoscroll will already scroll, so get parent autoscroll of first autoscroll\n\t\t\tif (!options.bubbleScroll || _getParentAutoScrollElement(elem, true) === scrollingElement()) {\n\t\t\t\t_clearAutoScrolls();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_throttleTimeout = _autoScroll(evt, options, _getParentAutoScrollElement(elem, false), false);\n\t\t}\n\t};\n\n\n\tvar _throttleTimeout;\n\tfunction _throttle(callback, ms) {\n\t\treturn langx.debounce(callback,ms);\n\t}\n\n\tfunction _cancelThrottle() {\n\t\t//clearTimeout(_throttleTimeout);\n\t\t//_throttleTimeout = void 0;\n\t\tif (_throttleTimeout && _throttleTimeout.stop) {\n\t\t\t_throttleTimeout.stop();\n\t\t\t_throttleTimeout = void 0;\n\t\t}\n\t}\n\n\t\n\tfunction _nulling() {\n\t\tpointerElemChangedInterval && clearInterval(pointerElemChangedInterval);\n\t\tpointerElemChangedInterval = null;\n\t\tlastPointerElemX = null;\n\t\tlastPointerElemY = null;\n\n\t\tthis.scrollEl =\n\t\tthis.scrollParentEl =\n\t\tthis.autoScrolls.length = null;\n\n\n\n\t}\n\treturn {\n\t\tautoScrolls,\n\t\t\n\t\t_isScrolledPast,\n\t\t_getRelativeScrollOffset,\n\t\t_autoScroll,\n\n\t\t_clearAutoScrolls,\n\t\t_handleAutoScroll,\n\n\t\t_throttle,\n\t\t_cancelThrottle,\n\t\t_nulling\n\t}\n});"]}