/**
 * skylark-sortable - A version of sortable.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-sortable/
 * @license MIT
 */
define(["skylark-langx/skylark","skylark-langx/langx","skylark-domx-query","skylark-domx-browser","skylark-domx-noder","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","skylark-domx-eventer","./fallback/MousedDragDrop"],function(e,t,a,r,n,l,o,i,g,d){"use strict";var s="Sortable"+(new Date).getTime(),c={log:function(e,t){a("#console").append("<div>"+e+":"+t+"</div>")},expando:s,activeGroup:null,active:null,putSortable:null,sortables:[],cloneEl:null,ignoreNextClick:!1,awaitingDragStarted:!1,touchEvt:null,prepare:function(e){this.draggable=e,e.nativeDraggable||(this._fallbacker=new d(this))},start:function(e,t){this.draggable=e;var a=e.elm().ownerDocument;g.on(a,"dragover",this.nearestEmptyInsertDetectEvent),this.draggable.nativeDraggable&&g.on(document,"dragover",this._checkAlignment)},over:function(e){},end:function(e){g.off(document,"dragover",this.nearestEmptyInsertDetectEvent),this.draggable.nativeDraggable&&g.off(document,"dragover",this._checkAlignment),this._nulling()},nearestEmptyInsertDetectEvent:function(e){if(c.draggable.dragEl){var t=c._detectNearestEmptySortable(e.clientX,e.clientY);if(t){var a={};for(var r in e)a[r]=e[r];a.target=a.rootEl=t,a.preventDefault=void 0,a.stopPropagation=void 0,t[s]._onDragOver(a)}}},_detectNearestEmptySortable:function(e,t){for(var a=this.sortables,r=0;r<a.length;r++)if(!l.lastChild(a[r],{ignoreHidden:!0,excluding:[this.ghostEl]})){var n=o.boundingRect(a[r]),i=a[r][s].options.emptyInsertThreshold,g=e>=n.left-i&&e<=n.right+i,d=t>=n.top-i&&t<=n.bottom+i;if(i&&g&&d)return a[r]}},_checkAlignment:function(e){c.draggable.dragEl&&c.draggable.dragEl.parentNode&&c.draggable._computeIsAligned(e)},_disableDraggable:function(e){e.draggable=!1},_nulling:function(){c.rootEl=c.parentEl=c.nextEl=c.cloneEl=c.tapEvt=c.touchEvt=c.oldIndex=c.putSortable=c.activeGroup=c.active=null}};return c});
//# sourceMappingURL=sourcemaps/dnd.js.map
