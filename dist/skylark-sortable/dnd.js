/**
 * skylark-sortable - A version of sortable.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-sortable/
 * @license MIT
 */
define(["skylark-langx/skylark","skylark-langx/langx","skylark-domx-query","skylark-domx-browser","skylark-domx-noder","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","skylark-domx-eventer","./fallback/MousedDragDrop"],function(t,e,a,r,l,n,o,i,g,d){"use strict";var s="Sortable"+(new Date).getTime(),c={log:function(t,e){a("#console").append("<div>"+t+":"+e+"</div>")},expando:s,activeGroup:null,active:null,putSortable:null,sortables:[],rootEl:null,dragEl:null,cloneEl:null,nextEl:null,parentEl:null,oldIndex:null,awaitingDragStarted:!1,prepare:function(t,a){this.dragging=t,this.active=t.sortable,this.dragEl=a,this.active.nativeDraggable?(a.draggable=!0,g.on(c.dragEl,"dragend",t=>{this.dragging._onDragEnd(t)}),g.on(c.dragEl,"dragstart",t=>{this.dragging._onDragStart(t)})):this._fallbacker=new d(this),c.log("_triggerDragStart","start"),c.log("_triggerDragStart","nativeDraggable is "+this.active.nativeDraggable);try{document.selection?e.defer(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(t){}},start:function(t,e){this.dragging=t,this.active=t.sortable},over:function(t){},end:function(t){c.active.nativeDraggable&&(g.off(c.dragEl,"dragstart"),g.off(c.dragEl,"dragend")),this._nulling()},nearestEmptyInsertDetectEvent:function(t){if(c.dragEl){var e=c._detectNearestEmptySortable(t.clientX,t.clientY);if(e){var a={};for(var r in t)a[r]=t[r];a.target=a.rootEl=e,a.preventDefault=void 0,a.stopPropagation=void 0,e[s]._onDragOver(a)}}},_detectNearestEmptySortable:function(t,e){for(var a=this.sortables,r=0;r<a.length;r++)if(!n.lastChild(a[r],{ignoreHidden:!0,excluding:[this.ghostEl]})){var l=o.boundingRect(a[r]),i=a[r][s].options.emptyInsertThreshold,g=t>=l.left-i&&t<=l.right+i,d=e>=l.top-i&&e<=l.bottom+i;if(i&&g&&d)return a[r]}},_disableDraggable:function(t){t.draggable=!1},_nulling:function(){c.dragEl=c.rootEl=c.parentEl=c.nextEl=c.cloneEl=c.tapEvt=c.oldIndex=c.putSortable=c.activeGroup=c.active=null}};return c});
//# sourceMappingURL=sourcemaps/dnd.js.map
