/**
 * skylark-sortable - A version of sortable.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-sortable/
 * @license MIT
 */
define(["skylark-langx/skylark","skylark-langx/langx","skylark-langx-hoster/isBrowser","skylark-langx-hoster/isMobile","skylark-domx-query","skylark-domx-browser","skylark-domx-noder","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","skylark-domx-eventer","skylark-domx-transforms","skylark-domx-scrolls/scrollingElement","skylark-domx-layouts/oriented","skylark-devices-points/touch","./autoscroll","./fallback/MousedDragDrop"],function(e,t,o,r,l,a,n,i,s,d,g,c,u,h,k,m,v){"use strict";var f="Sortable"+(new Date).getTime(),b={log:function(e,t){l("#console").append("<div>"+e+":"+t+"</div>")},expando:f,activeGroup:null,active:null,putSortable:null,sortables:[],cloneEl:null,ignoreNextClick:!1,awaitingDragStarted:!1,touchEvt:null,prepare:function(e){this.draggable=e,e.nativeDraggable||(this._fallbacker=new v(this))},start:function(e,t){this.draggable=e;var o=e.elm().ownerDocument;g.on(o,"dragover",this.nearestEmptyInsertDetectEvent),this.draggable.nativeDraggable?(g.on(document,"dragover",this._handleAutoScroll),g.on(document,"dragover",this._checkAlignment)):g.on(document,"mousemove",this._handleAutoScroll)},over:function(e){this._handleAutoScroll(e)},end:function(e){g.off(document,"dragover",this.nearestEmptyInsertDetectEvent),this.draggable.nativeDraggable?(g.off(document,"dragover",this._handleAutoScroll),g.off(document,"dragover",this._checkAlignment)):g.off(document,"mousemove",this._onTouchMove),this._nulling()},nearestEmptyInsertDetectEvent:function(e){if(b.draggable.dragEl){var t=b._detectNearestEmptySortable(e.clientX,e.clientY);if(t){var o={};for(var r in e)o[r]=e[r];o.target=o.rootEl=t,o.preventDefault=void 0,o.stopPropagation=void 0,t[f]._onDragOver(o)}}},_detectNearestEmptySortable:function(e,t){for(var o=this.sortables,r=0;r<o.length;r++)if(!i.lastChild(o[r],{ignoreHidden:!0,excluding:[this.ghostEl]})){var l=s.boundingRect(o[r]),a=o[r][f].options.emptyInsertThreshold,n=e>=l.left-a&&e<=l.right+a,d=t>=l.top-a&&t<=l.bottom+a;if(a&&n&&d)return o[r]}},_checkAlignment:function(e){b.draggable.dragEl&&b.draggable.dragEl.parentNode&&b.draggable._computeIsAligned(e)},_disableDraggable:function(e){e.draggable=!1},_handleAutoScroll:function(e,t){if(b.draggable.dragEl&&b.draggable.options.scroll)return m._handleAutoScroll(e,b.draggable.options,t,f)},_nulling:function(){b.rootEl=b.parentEl=b.nextEl=b.cloneEl=b.tapEvt=b.touchEvt=b.oldIndex=b.putSortable=b.activeGroup=b.active=null}};return b});
//# sourceMappingURL=sourcemaps/dnd.js.map
