/**
 * skylark-sortable - A version of sortable.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-sortable/
 * @license MIT
 */
define(["skylark-langx/skylark","skylark-langx/langx","skylark-langx-hoster/isBrowser","skylark-langx-hoster/isMobile","skylark-domx-query","skylark-domx-browser","skylark-domx-noder","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","skylark-domx-eventer","skylark-domx-transforms","skylark-domx-scrolls/scrollingElement","skylark-domx-layouts/oriented","skylark-devices-points/touch"],function(e,t,n,r,o,l,a,i,s,d,c,g,u,h,m){var v="Sortable"+(new Date).getTime(),k={expando:v,active:null,putSortable:null,sortables:[],dragEl:null,cloneEl:null,touchEvt:null,prepare:function(e){var t=e.el.ownerDocument;c.on(t,"dragover",this.nearestEmptyInsertDetectEvent),c.on(t,"mousemove",this.nearestEmptyInsertDetectEvent)},start:function(e,t){},over:function(){},end:function(e){},nearestEmptyInsertDetectEvent:function(e){if(k.dragEl){e=e.touches?e.touches[0]:e;var t=k._detectNearestEmptySortable(e.clientX,e.clientY);if(t){var n={};for(var r in e)n[r]=e[r];n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[v]._onDragOver(n)}}},_detectNearestEmptySortable:function(e,t){for(var n=this.sortables,r=0;r<n.length;r++)if(!i.lastChild(n[r],{ignoreHidden:!0,excluding:[this.ghostEl]})){var o=s.boundingRect(n[r]),l=n[r][v].options.emptyInsertThreshold,a=e>=o.left-l&&e<=o.right+l,d=t>=o.top-l&&t<=o.bottom+l;if(l&&a&&d)return n[r]}},_checkAlignment:function(e){this.dragEl&&this.dragEl.parentNode&&this.dragEl.parentNode[v]&&this.dragEl.parentNode[v]._computeIsAligned(e)},_emulateDragOver:function(e){var t=this.dragEl,n=this.touchEvt;if(n){if(this._lastX===n.clientX&&this._lastY===n.clientY&&!e)return;this._lastX=n.clientX,this._lastY=n.clientY;for(var r=document.elementFromPoint(n.clientX,n.clientY),o=r;r&&r.shadowRoot&&(r=r.shadowRoot.elementFromPoint(n.clientX,n.clientY))!==o;)o=r;if(o)do{if(o[v])if(o[v]._onDragOver({clientX:n.clientX,clientY:n.clientY,target:r,rootEl:o}))break;r=o}while(o=o.parentNode);t.parentNode[v]._computeIsAligned(n)}},_onMove:function(e,t,n,r,o,l,a,i){var d,g,u=e[v],h=u.options.onMove;return d=c.create("move",{to:t,from:e,dragged:n,draggedRect:r,related:o||t,relatedRect:l||s.boundingRect(t),willInsertAfter:i,originalEvent:a}),e.dispatchEvent(d),h&&(g=h.call(u,d,a)),g},_dispatchEvent:function(e,t,n,r,o,l,a,i,s,d,g){var u,h=(e=e||t[v]).options,m="on"+n.charAt(0).toUpperCase()+n.substr(1),k=this.putSortable;u=c.create(n,{to:o||t,from:l||t,item:r||t,clone:this.cloneEl,oldIndex:a,newIndex:i,oldDraggableIndex:s,newDraggableIndex:d,originalEvent:g,pullMode:k?k.lastPutMode:void 0}),t&&t.dispatchEvent(u),h[m]&&h[m].call(e,u)}};return k});
//# sourceMappingURL=sourcemaps/dnd.js.map
