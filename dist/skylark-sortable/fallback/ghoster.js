/**
 * skylark-sortable - A version of sortable.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-sortable/
 * @license MIT
 */
define(["skylark-langx/skylark","skylark-langx/langx","skylark-langx-hoster/isBrowser","skylark-langx-hoster/isMobile","skylark-domx-query","skylark-domx-browser","skylark-domx-noder","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","skylark-domx-eventer","skylark-domx-transforms","skylark-domx-scrolls/scrollingElement","skylark-domx-layouts/oriented","skylark-devices-points/touch"],function(t,e,o,l,s,i,n,r,a,h,g,c,d,u,f){"use strict";function k(t,e,o,l){if(t.getBoundingClientRect||t===window){var{top:s,left:i,bottom:n,right:r,width:h,height:g}=a.boundingRect(t);if(e&&t!==window){var d=c.matrix(o||t),u=d&&d.a,f=d&&d.d;d&&(n=(s/=f)+(g/=f),r=(i/=u)+(h/=u))}return{top:s,left:i,bottom:n,right:r,width:h,height:g}}}return{ghostEl:null,PositionGhostAbsolutely:l.apple.device,ghostRelativeParent:null,ghostRelativeParentInitialScroll:[],_ghostIsLast:function(t,e,o){var l=a.boundingRect(r.lastChild(o,{ignoreHidden:!0,excluding:[this.ghostEl]})),s="vertical"===e?t.clientY:t.clientX,i="vertical"===e?t.clientX:t.clientY,n="vertical"===e?l.bottom:l.right,h="vertical"===e?l.left:l.top,g="vertical"===e?l.right:l.bottom;return"vertical"===e?i>g+10||i<=g&&s>n&&i>=h:s>n&&i>h||s<=n&&i>g+10},_lastChild:function(t){return r.lastChild(t,{ignoreHidden:!0,excluding:[this.ghostEl]})},_appendGhost:function(t,e,o){var l=this.ghostEl;if(!l){var s=k(t,!0,e,this.PositionGhostAbsolutely);h.css(t);if(this.PositionGhostAbsolutely){for(var i=this.ghostRelativeParent=e;"static"===h.css(i,"position")&&"none"===h.css(i,"transform")&&i!==document;)i=i.parentNode;if(i!==document){var n=k(i,!0);s.top-=n.top,s.left-=n.left}i!==document.body&&i!==document.documentElement?(i===document&&(i=this.ghostRelativeParent=d()),s.top+=i.scrollTop,s.left+=i.scrollLeft):i=this.ghostRelativeParent=d(),ghostRelativeParentInitialScroll=autoscroll._getRelativeScrollOffset(i)}l=this.ghostEl=t.cloneNode(!0),h.toggleClass(l,o.ghostClass,!1),h.toggleClass(l,o.fallbackClass,!0),h.toggleClass(l,o.dragClass,!0),h.css(l,{"box-sizing":"border-box",margin:0,top:s.top,left:s.left,width:s.width,height:s.height,opacity:"0.8",position:this.PositionGhostAbsolutely?"absolute":"fixed",zIndex:"100000",pointerEvents:"none"}),e.appendChild(l)}},getRelativeScrollOffset:function(){return this.PositionGhostAbsolutely&&this.ghostRelativeParent&&autoscroll._getRelativeScrollOffset(this.ghostRelativeParent)},remove:function(){this.ghostEl&&n.remove(this.ghostEl),this.ghostEl=null}}});
//# sourceMappingURL=../sourcemaps/fallback/ghoster.js.map
