/**
 * skylark-sortable - A version of sortable.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-sortable/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-langx-hoster/is-browser","skylark-domx-geom","skylark-domx-styler","skylark-domx-finder","skylark-domx-plugins-scrolls/scrolling-element"],function(l,o,e,r,t,n){"use strict";var a,s,c,i,f,v=[],u=null;o&&o.ie,o&&o.edge,o&&o.firefox,o&&o.safari;var h,d=b(function(l,o,c,i,f){if(o.scroll){var h=c?c[f]:window,d=o.scrollSensitivity,b=o.scrollSpeed,w=l.clientX,g=l.clientY,m=n(),k=!1;u!==c&&(y(),a=o.scroll,s=o.scrollFn,!0===a&&(a=t.scrollableParent(c,!0),u=a));var x=0,p=a;do{var S,X,Y,_,I,P,M,E,F,T=p,A=e.boundingRect(T),L=A.top,O=A.bottom,R=A.left,B=A.right,H=A.width,W=A.height;if(S=T.scrollWidth,X=T.scrollHeight,Y=r.css(T),E=T.scrollLeft,F=T.scrollTop,T===m?(P=H<S&&("auto"===Y.overflowX||"scroll"===Y.overflowX||"visible"===Y.overflowX),M=W<X&&("auto"===Y.overflowY||"scroll"===Y.overflowY||"visible"===Y.overflowY)):(P=H<S&&("auto"===Y.overflowX||"scroll"===Y.overflowX),M=W<X&&("auto"===Y.overflowY||"scroll"===Y.overflowY)),_=P&&(Math.abs(B-w)<=d&&E+H<S)-(Math.abs(R-w)<=d&&!!E),I=M&&(Math.abs(O-g)<=d&&F+W<X)-(Math.abs(L-g)<=d&&!!F),!v[x])for(var j=0;j<=x;j++)v[j]||(v[j]={});v[x].vx==_&&v[x].vy==I&&v[x].el===T||(v[x].el=T,v[x].vx=_,v[x].vy=I,clearInterval(v[x].pid),!T||0==_&&0==I||(k=!0,v[x].pid=setInterval(function(){var o=v[this.layer].vy?v[this.layer].vy*b:0,r=v[this.layer].vx?v[this.layer].vx*b:0;"function"==typeof s&&"continue"!==s.call(h,r,o,l,l,v[this.layer].el)||e.scrollBy(v[this.layer].el,r,o)}.bind({layer:x}),24))),x++}while(o.bubbleScroll&&p!==m&&(p=t.scrollableParent(p,!1)));k}},30),y=function(){v.forEach(function(l){clearInterval(l.pid)}),v=[]};function b(o,e){return l.debounce(o,e)}return{autoScrolls:v,_getRelativeScrollOffset:function(l){var o=e.scrollOffset(l);return[o.offsetLeft,o.offsetTop]},_autoScroll:d,_clearAutoScrolls:y,_handleAutoScroll:function(l,o,e,r){var n,a=l.clientX,s=l.clientY;document.elementFromPoint(a,s);c&&a===i&&s===f||(c&&clearInterval(c),c=setInterval(function(){var r=t.scrollableParent(document.elementFromPoint(a,s),!0);r!==n&&(n=r,y(),h=d(l,o,n,e))},10),i=a,f=s)},_throttle:b,_cancelThrottle:function(){h&&h.stop&&(h.stop(),h=void 0)},_nulling:function(){c&&clearInterval(c),c=null,i=null,f=null,this.scrollEl=this.scrollParentEl=this.autoScrolls.length=null}}});
//# sourceMappingURL=../sourcemaps/fallback/autoscroll.js.map
