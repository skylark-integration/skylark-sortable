/**
 * skylark-sortable - A version of sortable.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-sortable/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-langx-hoster/is-browser","skylark-domx-geom","skylark-domx-styler","skylark-domx-finder","skylark-domx-plugins-scrolls/scrolling-element"],function(l,o,e,r,t,n){"use strict";var a,s,c,i,f,v=[],u=!1,h=null;o&&o.ie,o&&o.edge,o&&o.firefox,o&&o.safari;var d,y=w(function(l,o,c,i,f){if(o.scroll){var d=c?c[f]:window,y=o.scrollSensitivity,w=o.scrollSpeed,g=l.clientX,m=l.clientY,k=n(),x=!1;h!==c&&(b(),a=o.scroll,s=o.scrollFn,!0===a&&(a=t.scrollableParent(c,!0),h=a));var p=0,S=a;do{var P,X,Y,_,I,E,M,F,T,A=S,L=e.boundingRect(A),O=L.top,R=L.bottom,B=L.left,H=L.right,W=L.width,j=L.height;if(P=A.scrollWidth,X=A.scrollHeight,Y=r.css(A),F=A.scrollLeft,T=A.scrollTop,A===k?(E=W<P&&("auto"===Y.overflowX||"scroll"===Y.overflowX||"visible"===Y.overflowX),M=j<X&&("auto"===Y.overflowY||"scroll"===Y.overflowY||"visible"===Y.overflowY)):(E=W<P&&("auto"===Y.overflowX||"scroll"===Y.overflowX),M=j<X&&("auto"===Y.overflowY||"scroll"===Y.overflowY)),_=E&&(Math.abs(H-g)<=y&&F+W<P)-(Math.abs(B-g)<=y&&!!F),I=M&&(Math.abs(R-m)<=y&&T+j<X)-(Math.abs(O-m)<=y&&!!T),!v[p])for(var q=0;q<=p;q++)v[q]||(v[q]={});v[p].vx==_&&v[p].vy==I&&v[p].el===A||(v[p].el=A,v[p].vx=_,v[p].vy=I,clearInterval(v[p].pid),!A||0==_&&0==I||(x=!0,v[p].pid=setInterval(function(){var o=v[this.layer].vy?v[this.layer].vy*w:0,r=v[this.layer].vx?v[this.layer].vx*w:0;"function"==typeof s&&"continue"!==s.call(d,r,o,l,touchEvt,v[this.layer].el)||e.scrollBy(v[this.layer].el,r,o)}.bind({layer:p}),24))),p++}while(o.bubbleScroll&&S!==k&&(S=t.scrollableParent(S,!1)));u=x}},30),b=function(){v.forEach(function(l){clearInterval(l.pid)}),v=[]};function w(o,e){return l.debounce(o,e)}return{autoScrolls:v,_getRelativeScrollOffset:function(l){var o=e.scrollOffset(l);return[o.offsetLeft,o.offsetTop]},_autoScroll:y,_clearAutoScrolls:b,_handleAutoScroll:function(l,o,e,r){var n=l.clientX,a=l.clientY,s=document.elementFromPoint(n,a);d=y(l,o,s,e,r);var v=t.scrollableParent(s,!0);!u||c&&n===i&&a===f||(c&&clearInterval(c),c=setInterval(function(){var r=t.scrollableParent(document.elementFromPoint(n,a),!0);r!==v&&(v=r,b(),d=y(l,o,v,e))},10),i=n,f=a)},_throttle:w,_cancelThrottle:function(){d&&d.stop&&(d.stop(),d=void 0)},_nulling:function(){c&&clearInterval(c),c=null,i=null,f=null,this.scrollEl=this.scrollParentEl=this.autoScrolls.length=null}}});
//# sourceMappingURL=../sourcemaps/fallback/autoscroll.js.map
