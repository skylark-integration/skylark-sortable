/**
 * skylark-sortable - A version of sortable.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-sortable/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-langx-hoster/is-browser","skylark-domx-geom","skylark-domx-styler","skylark-domx-finder","skylark-domx-plugins-scrolls/scrolling-element"],function(l,o,e,r,t,n){"use strict";var a,s,i,c=[];o&&o.ie,o&&o.edge,o&&o.firefox,o&&o.safari;var f,v=h(function(l,o,a,s,i){if(o.scroll){a?a[i]:window;var f=o.scrollSensitivity,v=o.scrollSpeed,u=l.clientX,h=l.clientY,d=n(),y=0,b=t.scrollableParent(a,!0);do{var w,g,m,k,x,p,S,X,Y,_=b,I=e.boundingRect(_),P=I.top,M=I.bottom,E=I.left,T=I.right,A=I.width,F=I.height;if(w=_.scrollWidth,g=_.scrollHeight,m=r.css(_),X=_.scrollLeft,Y=_.scrollTop,_===d?(p=A<w&&("auto"===m.overflowX||"scroll"===m.overflowX||"visible"===m.overflowX),S=F<g&&("auto"===m.overflowY||"scroll"===m.overflowY||"visible"===m.overflowY)):(p=A<w&&("auto"===m.overflowX||"scroll"===m.overflowX),S=F<g&&("auto"===m.overflowY||"scroll"===m.overflowY)),k=p&&(Math.abs(T-u)<=f&&X+A<w)-(Math.abs(E-u)<=f&&!!X),x=S&&(Math.abs(M-h)<=f&&Y+F<g)-(Math.abs(P-h)<=f&&!!Y),!c[y])for(var L=0;L<=y;L++)c[L]||(c[L]={});c[y].vx==k&&c[y].vy==x&&c[y].el===_||(c[y].el=_,c[y].vx=k,c[y].vy=x,clearInterval(c[y].pid),!_||0==k&&0==x||(!0,c[y].pid=setInterval(function(){var l=c[this.layer].vy?c[this.layer].vy*v:0,o=c[this.layer].vx?c[this.layer].vx*v:0;e.scrollBy(c[this.layer].el,o,l)}.bind({layer:y}),24))),y++}while(o.bubbleScroll&&b!==d&&(b=t.scrollableParent(b,!1)))}},30),u=function(){c.forEach(function(l){clearInterval(l.pid)}),c=[]};function h(o,e){return l.debounce(o,e)}return{autoScrolls:c,_getRelativeScrollOffset:function(l){var o=e.scrollOffset(l);return[o.offsetLeft,o.offsetTop]},_autoScroll:v,_clearAutoScrolls:u,_handleAutoScroll:function(l,o,e,r){var n,c=l.clientX,h=l.clientY;document.elementFromPoint(c,h);a&&c===s&&h===i||(a&&clearInterval(a),a=setInterval(function(){var r=t.scrollableParent(document.elementFromPoint(c,h),!0);r!==n&&(n=r,u(),f=v(l,o,n,e))},10),s=c,i=h)},_throttle:h,_cancelThrottle:function(){f&&f.stop&&(f.stop(),f=void 0)},_nulling:function(){a&&clearInterval(a),a=null,s=null,i=null,this.scrollEl=this.scrollParentEl=this.autoScrolls.length=null}}});
//# sourceMappingURL=../sourcemaps/fallback/autoscroll.js.map
