/**
 * skylark-sortable - A version of sortable.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-sortable/
 * @license MIT
 */
define(["skylark-langx/skylark","skylark-langx/langx","skylark-langx-hoster/is-browser","skylark-langx-hoster/is-mobile","skylark-domx-query","skylark-domx-browser","skylark-domx-noder","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","skylark-domx-eventer","skylark-domx-transforms","skylark-domx-plugins-scrolls/scrolling-element","skylark-domx-layouts/oriented","skylark-domx-plugins-base","skylark-devices-points/touch","./dnd","./draggable","./droppable"],function(t,e,o,n,r,i,s,a,l,d,c,h,u,p,g,f,b,m,v){"use strict";var k=window,y=k.document,x=k.parseInt,E=k.setTimeout,w=(k.Polymer,o&&o.ie,o&&o.edge,o&&o.firefox,o&&o.safari,n&&n.apple.device,"draggable"in y.createElement("div")&&!n.apple.device),C=(i.support.cssPointerEvents,function(t){function e(t,o){return function(n,r,i,s){var a=n.options.group.name&&r.options.group.name&&n.options.group.name===r.options.group.name;if(null==t&&(o||a))return!0;if(null==t||!1===t)return!1;if(o&&"clone"===t)return t;if("function"==typeof t)return e(t(n,r,i,s),o)(n,r,i,s);var l=(o?n:r).options.group.name;return!0===t||"string"==typeof t&&t===l||t.join&&t.indexOf(l)>-1}}var o={},n=t.group;n&&"object"==typeof n||(n={name:n}),o.name=n.name,o.checkPull=e(n.pull,!0),o.checkPut=e(n.put),o.revertClone=n.revertClone,t.group=o}),S=g.Plugin.inherit({klassName:"Sortable",pluginName:"intg.sortable",options:{group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(t,o,n,r){return p(this.el,e.mixin({excluding:[r,n]},this.options))},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:x(window.devicePixelRatio,10)||1,fallbackOnBody:!0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackTolerance:0,fallbackOffset:{x:0,y:0},emptyInsertThreshold:5},_construct:function(t,e){for(var o in this.overrided(t,e),this.el=t,t[b.expando]=this,(e=this.options).draggable=e.draggable||/[uo]l/i.test(t.nodeName)?">li":">*",C(e),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!e.forceFallback&&w,this.nativeDraggable&&(this.options.touchStartThreshold=1),b.sortables.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),this.draggable=new m(this,this.options),this.droppable=new v(this,this.options)},_getDirection:function(t,e){var o=b.dragEl;return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,o,null):this.options.direction},_animate:function(t,e){var o=this.options.animation;b.dragEl;if(o){var n=l.boundingRect(e);if(1===t.nodeType&&(t=l.boundingRect(t)),t.left+t.width/2!==n.left+n.width/2||t.top+t.height/2!==n.top+n.height/2){var r=h.matrix(this.el),i=r&&r.a,a=r&&r.d;d.css(e,"transition","none"),d.css(e,"transform","translate3d("+(t.left-n.left)/(i||1)+"px,"+(t.top-n.top)/(a||1)+"px,0)"),s.reflow(e),d.css(e,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),d.css(e,"transform","translate3d(0,0,0)")}"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=E(function(){d.css(e,"transition",""),d.css(e,"transform",""),e.animated=!1},o)}},_hideClone:function(){},_showClone:function(t){var e=b.active.el,o=b.nextEl;"clone"===t.lastPutMode?b.cloneEl.cloneHidden&&(e.contains(b.dragEl)&&!this.options.group.revertClone?e.insertBefore(b.cloneEl,b.dragEl):o?e.insertBefore(b.cloneEl,o):e.appendChild(b.cloneEl),this.options.group.revertClone&&this._animate(b.dragEl,b.cloneEl),d.show(b.cloneEl),b.cloneEl.cloneHidden=!1):this._hideClone()},_dispatchEvent:function(t,e,o,n,r,i,s,a,l,d,h){var u,p=(t=t||e[b.expando]).options,g="on"+o.charAt(0).toUpperCase()+o.substr(1),f=b.putSortable;u=c.create(o,{to:r||e,from:i||e,item:n||e,clone:b.cloneEl,oldIndex:s,newIndex:a,oldDraggableIndex:l,newDraggableIndex:d,originalEvent:h,pullMode:f?f.lastPutMode:void 0}),e&&e.dispatchEvent(u),p[g]&&p[g].call(t,u)},toArray:function(){for(var t,e=[],o=this.el.children,n=0,r=o.length,i=this.options;n<r;n++)t=o[n],a.closest(t,i.draggable,this.el,!1)&&e.push(t.getAttribute(i.dataIdAttr)||s.generateId(t));return e},sort:function(t){var e={},o=this.el;this.toArray().forEach(function(t,n){var r=o.children[n];a.closest(r,this.options.draggable,o,!1)&&(e[t]=r)},this),t.forEach(function(t){e[t]&&(o.removeChild(e[t]),o.appendChild(e[t]))})},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return a.closest(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var o=this.options;if(void 0===e)return o[t];o[t]=e,"group"===t&&C(o)},destroy:function(){var t=this.el;t[b.expando]=null,c.off(t,"mousedown",this._onTapStart),this.nativeDraggable&&(c.off(t,"dragover",this),c.off(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),b.sortables.splice(b.sortables.indexOf(this.el),1),this.el=t=null}});return S.create=function(t,e){return new S(t,e)},S.version="1.9.0",t.attach("intg.Sortable",S)});
//# sourceMappingURL=sourcemaps/Sortable.js.map
