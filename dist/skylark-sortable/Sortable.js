/**
 * skylark-sortable - A version of sortable.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-sortable/
 * @license MIT
 */
define(["skylark-langx/skylark","skylark-langx/langx","skylark-langx-hoster/is-browser","skylark-langx-hoster/is-mobile","skylark-domx-query","skylark-domx-browser","skylark-domx-noder","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","skylark-domx-eventer","skylark-domx-transforms","skylark-domx-plugins-scrolls/scrolling-element","skylark-domx-layouts/oriented","skylark-domx-plugins-base","skylark-devices-points/touch","./dnd","./draggable","./droppable"],function(e,t,o,n,r,i,l,s,a,d,c,h,u,p,g,f,m,b,v){"use strict";var k=window,y=k.document,x=k.parseInt,E=k.setTimeout,w=(k.Polymer,o&&o.ie,o&&o.edge,o&&o.firefox,o&&o.safari,n&&n.apple.device,"draggable"in y.createElement("div")&&!n.apple.device),C=(i.support.cssPointerEvents,function(e){function t(e,o){return function(n,r,i,l){var s=n.options.group.name&&r.options.group.name&&n.options.group.name===r.options.group.name;if(null==e&&(o||s))return!0;if(null==e||!1===e)return!1;if(o&&"clone"===e)return e;if("function"==typeof e)return t(e(n,r,i,l),o)(n,r,i,l);var a=(o?n:r).options.group.name;return!0===e||"string"==typeof e&&e===a||e.join&&e.indexOf(a)>-1}}var o={},n=e.group;n&&"object"==typeof n||(n={name:n}),o.name=n.name,o.checkPull=t(n.pull,!0),o.checkPut=t(n.put),o.revertClone=n.revertClone,e.group=o}),S=g.Plugin.inherit({klassName:"Sortable",pluginName:"intg.sortable",options:{group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(e,o,n,r){return p(this.el,t.mixin({excluding:[r,n]},this.options))},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:x(window.devicePixelRatio,10)||1,fallbackOnBody:!0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackTolerance:0,fallbackOffset:{x:0,y:0},emptyInsertThreshold:5},_construct:function(e,t){for(var o in this.overrided(e,t),this.el=e,e[m.expando]=this,(t=this.options).draggable=t.draggable||/[uo]l/i.test(e.nodeName)?">li":">*",C(t),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&w,this.nativeDraggable&&(this.options.touchStartThreshold=1),m.sortables.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),this.draggable=new b(this,this.options),this.droppable=new v(this,this.options)},_getDirection:function(e,t){var o=m.dragEl;return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,o,null):this.options.direction},_animate:function(e,t){var o=this.options.animation;m.dragEl;if(o){var n=a.boundingRect(t);if(1===e.nodeType&&(e=a.boundingRect(e)),e.left+e.width/2!==n.left+n.width/2||e.top+e.height/2!==n.top+n.height/2){var r=h.matrix(this.el),i=r&&r.a,s=r&&r.d;d.css(t,"transition","none"),d.css(t,"transform","translate3d("+(e.left-n.left)/(i||1)+"px,"+(e.top-n.top)/(s||1)+"px,0)"),l.reflow(t),d.css(t,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),d.css(t,"transform","translate3d(0,0,0)")}"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=E(function(){d.css(t,"transition",""),d.css(t,"transform",""),t.animated=!1},o)}},_hideClone:function(){m.cloneEl.cloneHidden||(d.hide(m.cloneEl),m.cloneEl.cloneHidden=!0,m.cloneEl.parentNode&&this.options.removeCloneOnHide&&l.remove(m.cloneEl))},_showClone:function(e){var t=m.active.el,o=m.nextEl;"clone"===e.lastPutMode?m.cloneEl.cloneHidden&&(t.contains(m.dragEl)&&!this.options.group.revertClone?t.insertBefore(m.cloneEl,m.dragEl):o?t.insertBefore(m.cloneEl,o):t.appendChild(m.cloneEl),this.options.group.revertClone&&this._animate(m.dragEl,m.cloneEl),d.show(m.cloneEl),m.cloneEl.cloneHidden=!1):this._hideClone()},_dispatchEvent:function(e,t,o,n,r,i,l,s,a,d,h){var u,p=(e=e||t[m.expando]).options,g="on"+o.charAt(0).toUpperCase()+o.substr(1),f=m.putSortable;u=c.create(o,{to:r||t,from:i||t,item:n||t,clone:m.cloneEl,oldIndex:l,newIndex:s,oldDraggableIndex:a,newDraggableIndex:d,originalEvent:h,pullMode:f?f.lastPutMode:void 0}),t&&t.dispatchEvent(u),p[g]&&p[g].call(e,u)},toArray:function(){for(var e,t=[],o=this.el.children,n=0,r=o.length,i=this.options;n<r;n++)e=o[n],s.closest(e,i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||l.generateId(e));return t},sort:function(e){var t={},o=this.el;this.toArray().forEach(function(e,n){var r=o.children[n];s.closest(r,this.options.draggable,o,!1)&&(t[e]=r)},this),e.forEach(function(e){t[e]&&(o.removeChild(t[e]),o.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return s.closest(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var o=this.options;if(void 0===t)return o[e];o[e]=t,"group"===e&&C(o)},destroy:function(){var e=this.el;e[m.expando]=null,c.off(e,"mousedown",this._onTapStart),this.nativeDraggable&&(c.off(e,"dragover",this),c.off(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),m.sortables.splice(m.sortables.indexOf(this.el),1),this.el=e=null}});return S.create=function(e,t){return new S(e,t)},S.version="1.9.0",e.attach("intg.Sortable",S)});
//# sourceMappingURL=sourcemaps/Sortable.js.map
