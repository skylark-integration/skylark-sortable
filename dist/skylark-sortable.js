/**
 * skylark-sortable - A version of sortable.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-sortable/
 * @license MIT
 */
!function(e,t){var r=t.define,require=t.require,n="function"==typeof r&&r.amd,o=!n&&"undefined"!=typeof exports;if(!n&&!r){var a={};r=t.define=function(e,t,r){"function"==typeof r?(a[e]={factory:r,deps:t.map(function(t){return function(e,t){if("."!==e[0])return e;var r=t.split("/"),n=e.split("/");r.pop();for(var o=0;o<n.length;o++)"."!=n[o]&&(".."==n[o]?r.pop():r.push(n[o]));return r.join("/")}(t,e)}),resolved:!1,exports:null},require(e)):a[e]={factory:null,resolved:!0,exports:r}},require=t.require=function(e){if(!a.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=a[e];if(!module.resolved){var r=[];module.deps.forEach(function(e){r.push(require(e))}),module.exports=module.factory.apply(t,r)||null,module.resolved=!0}return module.exports}}if(!r)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("skylark-langx-hoster/detects/browser",["../hoster"],function(e){return e.detects.browser=function(){return"undefined"!=typeof window&&void 0!==window.document?function(e){e=e.toLowerCase();var t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(iemobile)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],r=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(silk)/.exec(e)||/(android)/.exec(e)||/(win)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||/(playbook)/.exec(e)||/(bb)/.exec(e)||/(blackberry)/.exec(e)||[],n={},o={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",versionNumber:t[4]||t[2]||"0",platform:r[0]||""};o.browser&&(n[o.browser]=!0,n.version=o.version,n.versionNumber=parseInt(o.versionNumber,10));o.platform&&(n[o.platform]=!0);(n.android||n.bb||n.blackberry||n.ipad||n.iphone||n.ipod||n.kindle||n.playbook||n.silk||n["windows phone"])&&(n.mobile=!0);(n.cros||n.mac||n.linux||n.win)&&(n.desktop=!0);(n.chrome||n.opr||n.safari)&&(n.webkit=!0);if(n.rv||n.iemobile){o.browser="ie",n.ie=!0}if(n.edge){delete n.edge;o.browser="edge",n.edge=!0}if(n.safari&&n.blackberry){o.browser="blackberry",n.blackberry=!0}if(n.safari&&n.playbook){o.browser="playbook",n.playbook=!0}if(n.bb){var a="blackberry";o.browser=a,n[a]=!0}if(n.opr){o.browser="opera",n.opera=!0}if(n.safari&&n.android){o.browser="android",n.android=!0}if(n.safari&&n.kindle){o.browser="kindle",n.kindle=!0}if(n.safari&&n.silk){o.browser="silk",n.silk=!0}return n.name=o.browser,n.platform=o.platform,n}(navigator.userAgent):null}}),e("skylark-langx-hoster/is-browser",["./hoster","./detects/browser"],function(e,t){return void 0==e.isBrowser&&(e.isBrowser=t()),e.isBrowser}),e("skylark-domx-layouts/oriented",["skylark-domx-geom","skylark-domx-styler","skylark-domx-finder","./Orientation"],function(e,t,r,n){return function(o,a){var i=t.css(o),l=e.contentRect(o).width,s=r.childAt(o,0,a),d=r.childAt(o,1,a),c=s&&t.css(s),g=d&&t.css(d),u=s&&e.marginSize(s).width,p=d&&e.marginSize(d).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?n.Vertical:n.Horizontal;if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?n.Vertical:n.Horizontal;if(s&&"none"!==c.float){var f="left"===c.float?"left":"right";return!d||"both"!==g.clear&&g.clear!==f?n.Horizontal:n.Vertical}return s&&("block"===c.display||"flex"===c.display||"table"===c.display||"grid"===c.display||u>=l&&"none"===i.float||d&&"none"===i.float&&u+p>l)?n.Vertical:n.Horizontal}}),e("skylark-sortable/dnd",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-query","skylark-domx-browser","skylark-domx-noder","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","skylark-domx-eventer"],function(e,t,r,n,o,a,i,l,s){"use strict";var d="Sortable"+(new Date).getTime(),c={log:function(e,t){r("#console").append("<div>"+e+":"+t+"</div>")},expando:d,activeGroup:null,active:null,putSortable:null,sortables:[],rootEl:null,dragEl:null,cloneEl:null,nextEl:null,parentEl:null,oldIndex:null,awaitingDragStarted:!1,prepare:function(e,t){this.dragging=e,this.active=e.sortable,this.dragEl=t},start:function(e,t){this.dragging=e,this.active=e.sortable},over:function(e){},end:function(e){this._nulling()},nearestEmptyInsertDetectEvent:function(e){if(c.dragEl){var t=c._detectNearestEmptySortable(e.clientX,e.clientY);if(t){var r={};for(var n in e)r[n]=e[n];r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[d]._onDragOver(r)}}},_detectNearestEmptySortable:function(e,t){for(var r=this.sortables,n=0;n<r.length;n++)if(!a.lastChild(r[n],{ignoreHidden:!0,excluding:[this.ghostEl]})){var o=i.boundingRect(r[n]),l=r[n][d].options.emptyInsertThreshold,s=e>=o.left-l&&e<=o.right+l,c=t>=o.top-l&&t<=o.bottom+l;if(l&&s&&c)return r[n]}},_disableDraggable:function(e){e.draggable=!1},_nulling:function(){c.dragEl=c.rootEl=c.parentEl=c.nextEl=c.cloneEl=c.tapEvt=c.oldIndex=c.putSortable=c.activeGroup=c.active=null}};return c}),e("skylark-domx-plugins-dnd/draggable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-finder","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-devices-points/touch","skylark-domx-plugins-base","./dnd","./manager"],function(e,t,r,n,o,a,i,l,s,d,c){a.on,a.off,r.attr,r.removeAttr,o.pagePosition,i.addClass,o.height;var g=s.Plugin.inherit({klassName:"Draggable",pluginName:"lark.dnd.draggable",options:{draggingClass:"dragging",forceFallback:!1},_construct:function(t,r){this.overrided(t,r);var o=this,r=this.options;o.draggingClass=r.draggingClass,["preparing","started","ended","moving"].forEach(function(t){e.isFunction(r[t])&&o.on(t,r[t])}),l.mousy(t),a.on(t,{mousedown:function(e){var t=o.options;t.handle&&(o.dragHandle=n.closest(e.target,t.handle,o._elm),!o.dragHandle)||(t.source?o.dragSource=n.closest(e.target,t.source,o._elm):o.dragSource=o._elm,o.startPos={x:e.clientX,y:e.clientY},c.prepare(o,e))},mouseup:function(e){},dragstart:function(e){c.start(o,e)},dragend:function(e){a.stop(e),c.dragging&&c.end(!1)}})}});return s.register(g,"draggable"),d.Draggable=g}),e("skylark-sortable/draggable",["skylark-langx","skylark-domx-finder","skylark-domx-styler","skylark-domx-eventer","skylark-domx-noder","skylark-domx-plugins-dnd/draggable","./dnd"],function(e,t,r,n,o,a,i){var l,s=[];function d(e,r){return t.index(e,function(e){return!("TEMPLATE"===e.nodeName.toUpperCase()||e===i.cloneEl||r&&!t.matches(e,r))})}return class{constructor(e,t){this.sortable=e;var r=this._elm=e.elm();this.options=t;var n=this;this._dndDraggable=new a(r,{forceFallback:this.options.forceFallback,source:this.options.draggable,handle:this.options.handle,preparing:function(e){n._onPrepare(e)},started:function(e){n._onDragStart(e.originalEvent)},ended:function(e){n._onDragEnd(e.originalEvent)}})}elm(){return this._elm}_onPrepare(e){var n,o,a=this.sortable,c=this._elm,g=this.options,u=g.preventOnFilter,p=e.dragSource,f=g.filter;if(function(e){s.length=0;var t=e.getElementsByTagName("input"),r=t.length;for(;r--;){var n=t[r];n.checked&&s.push(n)}}(c),l!==p){if(i.log("_onTapStart",p.tagName+","+p.className),n=d(p),o=d(p,g.draggable),"function"==typeof f){if(f.call(this,e,p,this))return a._dispatchEvent(a,originalTarget,"filter",p,c,c,n,void 0,o),u&&(e.preventDefault=!0),void(e.dragSource=null)}else if(f&&(f=f.split(",").some(function(r){if(r=t.closest(originalTarget,r.trim(),c,!1))return a._dispatchEvent(a,r,"filter",p,c,c,n,void 0,o),void(e.dragSource=null)})))return u&&(e.preventDefault=!0),void(e.dragSource=null);c.ownerDocument;var h,v=i.dragEl,b=(i.parentEl,i.nextEl,i.oldIndex),m=i.oldDraggableIndex;i.tapEvt;i.log("_prepareDragStart","start"),p&&!v&&p.parentNode===c&&(h=c,v=i.dragEl=p,i.parentEl=v.parentNode,i.nextEl=v.nextSibling,l=p,i.activeGroup=this.options.group,b=i.oldIndex=n,m=i.oldDraggableIndex=o,i.tapEvt={target:v,clientX:e.originalEvent.clientX,clientY:e.originalEvent.clientY},this._lastX=e.originalEvent.clientX,this._lastY=e.originalEvent.clientY,v.style["will-change"]="all",v.style.transition="",v.style.transform="",g.ignore.split(",").forEach(function(e){!function(e,t,r){if(e){var n=e.getElementsByTagName(t),o=0,a=n.length;if(r)for(;o<a;o++)r(n[o],o);return n}}(v,e.trim(),i._disableDraggable)}),i.prepare(this,i.dragEl),a._dispatchEvent(a,h,"choose",v,h,h,b,void 0,m),r.toggleClass(v,g.chosenClass,!0))}else e.dragSource=null}_onDragStart(t,n){i.log("_onDragStart","start");var a=this,l=i.dragEl,s=this._elm,d=t.dataTransfer,c=a.options,g=i.cloneEl=o.clone(l,!0);g.draggable=!1,g.style["will-change"]="",r.toggleClass(g,a.options.chosenClass,!1),a._cloneId=e.defer(function(){a.options.removeCloneOnHide||s.insertBefore(g,l),a.sortable._dispatchEvent(a,s,"clone",l)}),n||r.toggleClass(l,c.dragClass,!0),n||(d&&(d.effectAllowed="move",c.setData&&c.setData.call(a,d,l)),r.css(l,"transform","translateZ(0)")),i.awaitingDragStarted=!0,a._dragStartId=e.defer(function(e,t){i.awaitingDragStarted=!1;var n=i.dragEl,o=this._elm,a=i.oldIndex,l=i.oldDraggableIndex;if(o&&n){i.start(this);var s=this.options;!e&&r.toggleClass(n,s.dragClass,!1),r.toggleClass(n,s.ghostClass,!0),r.css(n,"transform",""),this.sortable._dispatchEvent(this,o,"start",n,o,o,a,void 0,l,void 0,t)}else this._nulling()}.bind(a,n,t))}_onDragEnd(e){this._elm,this.options,i.dragEl,this.sortable,i.putSortable;i.awaitingDragStarted=!1,!1,clearTimeout(this._dragStartTimer),this._cloneId&&(this._cloneId.cancel(),this._cloneId=null),this._dragStartId&&(this._dragStartId.cancel(),this._dragStartId=null),l=null,s.forEach(function(e){e.checked=!0}),s.length=0,i.end()}}}),e("skylark-domx-plugins-dnd/droppable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-finder","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-plugins-base","./dnd","./manager"],function(e,t,r,n,o,a,i,l,s,d){a.on,a.off,r.attr,r.removeAttr,o.pagePosition,i.addClass,o.height;var c=l.Plugin.inherit({klassName:"Droppable",pluginName:"lark.dnd.droppable",options:{draggingClass:"dragging"},_construct:function(t,r){this.overrided(t,r);var n,o,l=this,r=l.options,s=(r.draggingClass,!0);["started","entered","leaved","dropped","overing"].forEach(function(t){e.isFunction(r[t])&&l.on(t,r[t])}),a.on(t,{dragover:function(e){if(e.stopPropagation(),s){var t=a.create("overing",{originalEvent:e,overElm:e.target,transfer:d.draggingTransfer,acceptable:!0});l.trigger(t),t.acceptable&&e.preventDefault()}},dragenter:function(e){l.options;var t=l._elm,r=a.create("entered",{originalEvent:e,transfer:d.draggingTransfer});l.trigger(r),e.stopPropagation(),n&&s&&i.addClass(t,n)},dragleave:function(e){l.options;var t=l._elm;if(!s)return!1;var r=a.create("leaved",{originalEvent:e,transfer:d.draggingTransfer});l.trigger(r),e.stopPropagation(),n&&s&&i.removeClass(t,n)},drop:function(e){l.options;var t=l._elm;if(a.stop(e),d.dragging){n&&s&&i.addClass(t,n);var r=a.create("dropped",{originalEvent:e,transfer:d.draggingTransfer});l.trigger(r),d.end(!0)}}}),d.on("dndStarted",function(e){var r=a.create("started",{transfer:d.draggingTransfer,acceptable:!1});l.trigger(r),s=r.acceptable,n=r.hoverClass,(o=r.activeClass)&&s&&i.addClass(t,o)}).on("dndEnded",function(e){var r=a.create("ended",{transfer:d.draggingTransfer,acceptable:!1});l.trigger(r),n&&s&&i.removeClass(t,n),o&&s&&i.removeClass(t,o),s=!1,o=null,n=null})}});return l.register(c,"droppable"),s.Droppable=c}),e("skylark-sortable/droppable",["skylark-langx","skylark-domx-finder","skylark-domx-styler","skylark-domx-eventer","skylark-domx-noder","skylark-domx-geom","skylark-domx-plugins-dnd/droppable","./dnd"],function(e,t,r,n,o,a,i,l){var s,d,c,g=!1;function u(e,r){for(var n=t.scrollableParent(e,!0),i=a.boundingRect(e)[r];n;){var l=a.boundingRect(n)[r];if(!("top"===r||"left"===r?i>=l:i<=l))return n;if(n===o.scrollingElement())break;n=t.scrollableParent(n,!1)}return!1}function p(){g=!1}function f(e,r){return t.index(e,function(e){return!("TEMPLATE"===e.nodeName.toUpperCase()||e===l.cloneEl||r&&!t.matches(e,r))})}function h(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}return class{constructor(e,t){this.sortable=e;var r=this.el=this._elm=e.elm();this.options=t;var o=this;this._dndDroppable=new i(r,{started:function(e){e.acceptable=!0,e.activeClass="active",e.hoverClass="over"},overing:function(e){l.dragEl&&(o._onDragOver(e.originalEvent),h(e.originalEvent))},dropped:function(e){o._onDrop(e.originalEvent)}}),n.on(r,"drop",this),n.on(r,"selectstart",this)}_onMove(e,t,r,o,i,s,d,c){var g,u,p=e[l.expando],f=p.options.onMove;return g=n.create("move",{to:t,from:e,dragged:r,draggedRect:o,related:i||t,relatedRect:s||a.boundingRect(t),willInsertAfter:c,originalEvent:d}),e.dispatchEvent(g),f&&(u=f.call(p,g,d)),u}_onDragOver(e){var n,o,i,h,v,b,m,k=this._elm,x=e.target,y=this.options,E=y.group,w=l.active,_=l.activeGroup===E,C=y.sort,D=this.sortable,S=l.dragEl,T=l.active.elm(),I=l.putSortable,P=l.nextEl,N=l.oldIndex,A=l.oldDraggableIndex;if(!g){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),s=!0,x=t.closest(x,y.draggable,k,!0),S.contains(e.target)||x.animated)return U(!1);if(w&&!y.disabled&&(_?C||(i=!T.contains(S)):I===this||(this.lastPutMode=l.activeGroup.checkPull(this,w,S,e))&&E.checkPut(this,w,S,e))){var R=D._getDirection(e,x);if(n=a.boundingRect(S),i)return this._hideClone(),l.parentEl=T,P?T.insertBefore(S,P):T.appendChild(S),U(!0);var O=function(e){return t.lastChild(e,{ignoreHidden:!0,excluding:[]})}(k);if(!O||function(e,r,n){var o=a.boundingRect(t.lastChild(n,{ignoreHidden:!0,excluding:[]})),i="vertical"===r?e.clientY:e.clientX,l="vertical"===r?e.clientX:e.clientY,s="vertical"===r?o.bottom:o.right,d="vertical"===r?o.left:o.top,c="vertical"===r?o.right:o.bottom;return"vertical"===r?l>c+10||l<=c&&i>s&&l>=d:i>s&&l>d||i<=s&&l>c+10}(e,R,k)&&!O.animated){if(O&&k===e.target&&(x=O),x&&(o=a.boundingRect(x)),_?w._hideClone():w._showClone(this),!1!==this._onMove(T,k,S,n,x,o,e,!!x))return k.appendChild(S),l.parentEl=k,V(),U(!0)}else if(x&&x!==S&&x.parentNode===k){var B,M=0,H=x.sortableMouseAligned,F=S.parentNode!==k,X="vertical"===R?"top":"left",Y=u(x,"top")||u(S,"top"),z=Y?Y.scrollTop:void 0;if(v!==x&&(h=null,B=a.boundingRect(x)[X],d=!1),function(e,t,r){var n=a.boundingRect(e),o=a.boundingRect(t),i="vertical"===r?n.left:n.top,l="vertical"===r?n.right:n.bottom,s="vertical"===r?n.width:n.height,d="vertical"===r?o.left:o.top,c="vertical"===r?o.right:o.bottom,g="vertical"===r?o.width:o.height;return i===d||l===c||i+s/2===d+g/2}(S,x,R)&&H||F||Y||y.invertSwap||"insert"===h||"swap"===h?("swap"!==h&&(c=y.invertSwap||F),M=function(e,t,r,n,o,i,l){var s=a.boundingRect(t),c="vertical"===r?e.clientY:e.clientX,g="vertical"===r?s.height:s.width,u="vertical"===r?s.top:s.left,p="vertical"===r?s.bottom:s.right,f=a.boundingRect(S),h=!1;if(!i)if(l&&m<g*n)if(!d&&(1===b?c>u+g*o/2:c<p-g*o/2)&&(d=!0),d)h=!0;else{"vertical"===r?f.top:f.left,"vertical"===r?f.bottom:f.right;if(1===b?c<u+m:c>p-m)return-1*b}else if(c>u+g*(1-n)/2&&c<p-g*(1-n)/2)return L(t);if((h=h||i)&&(c<u+g*o/2||c>p-g*o/2))return c>u+g/2?1:-1;return 0}(e,x,R,y.swapThreshold,null==y.invertedSwapThreshold?y.swapThreshold:y.invertedSwapThreshold,c,v===x),h="swap"):(M=L(x),h="insert"),0===M)return U(!1);v=x,b=M,o=a.boundingRect(x);var q=x.nextElementSibling,j=!1;j=1===M;var G=this._onMove(T,k,S,n,x,o,e,j);if(!1!==G)return 1!==G&&-1!==G||(j=1===G),g=!0,setTimeout(p,30),_?w._hideClone():w._showClone(this),j&&!q?k.appendChild(S):x.parentNode.insertBefore(S,j?q:x),Y&&a.scrollBy(Y,0,z-Y.scrollTop),l.parentEl=S.parentNode,void 0===B||c||(m=Math.abs(B-a.boundingRect(x)[X])),V(),U(!0)}if(k.contains(S))return U(!1)}return!1}function U(t){return t&&(_?w._hideClone():w._showClone(D),w&&(r.toggleClass(S,I?I.options.ghostClass:w.options.ghostClass,!1),r.toggleClass(S,y.ghostClass,!0)),I!==D&&D!==l.active?I=l.putSortable=D:D===l.active&&(I=l.putSortable=null),n&&D._animate(n,S),x&&o&&D._animate(o,x)),(x===S&&!S.animated||x===k&&!x.animated)&&(v=null),y.dragoverBubble||e.rootEl||x===document||(l.over(e),!t&&l.nearestEmptyInsertDetectEvent(e)),!y.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),!0}function V(){D._dispatchEvent(D,T,"change",x,k,T,N,f(S),A,f(S,y.draggable),e)}function L(e){var t=f(S),r=f(e);return t<r?1:-1}}_onDrop(e){this.el;var t,a,i=this.options,g=this.sortable,u=l.active.elm(),p=l.dragEl,h=l.putSortable,v=l.parentEl,b=l.oldIndex,m=l.oldDraggableIndex,k=l.nextEl;c=!1,d=!1,g.nativeDraggable&&n.off(document,"drop",this),this._offUpEvents(),e&&(s&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),(u===v||h&&"clone"!==h.lastPutMode)&&o.remove(l.cloneEl),p&&(l._disableDraggable(p),p.style["will-change"]="",r.toggleClass(p,h?h.options.ghostClass:this.options.ghostClass,!1),r.toggleClass(p,this.options.chosenClass,!1),g._dispatchEvent(this,u,"unchoose",p,v,u,b,null,m,null,e),u!==v?(t=f(p),a=f(p,i.draggable),t>=0&&(g._dispatchEvent(null,v,"add",p,v,u,b,t,m,a,e),g._dispatchEvent(this,u,"remove",p,v,u,b,t,m,a,e),g._dispatchEvent(null,v,"sort",p,v,u,b,t,m,a,e),g._dispatchEvent(this,u,"sort",p,v,u,b,t,m,a,e)),h&&h.save()):p.nextSibling!==k&&(t=f(p),a=f(p,i.draggable),t>=0&&(g._dispatchEvent(this,u,"update",p,v,u,b,t,m,a,e),g._dispatchEvent(this,u,"sort",p,v,u,b,t,m,a,e))),l.active&&(null!=t&&-1!==t||(t=b,a=m),g._dispatchEvent(this,u,"end",p,v,u,b,t,m,a,e),g.save()))),this._nulling()}_offUpEvents(){var e=this.el.ownerDocument;n.off(e,"mouseup",this._onDrop),n.off(document,"selectstart",this)}_nulling(){s=null}handleEvent(e){switch(e.type){case"drop":this._onDrop(e);break;case"dragenter":case"dragover":l.dragEl&&(this._onDragOver(e),h(e));break;case"selectstart":e.preventDefault()}}destroy(){this.sortable;his._dndDroppable.destroy()}}}),e("skylark-sortable/Sortable",["skylark-langx/skylark","skylark-langx/langx","skylark-langx-hoster/is-browser","skylark-langx-hoster/is-mobile","skylark-domx-query","skylark-domx-browser","skylark-domx-noder","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","skylark-domx-eventer","skylark-domx-transforms","skylark-domx-layouts/oriented","skylark-domx-plugins-base","skylark-devices-points/touch","./dnd","./draggable","./droppable"],function(e,t,r,n,o,a,i,l,s,d,c,g,u,p,f,h,v,b){"use strict";var m=window,k=m.document,x=m.parseInt,y=m.setTimeout,E=(m.Polymer,r&&r.ie,r&&r.edge,r&&r.firefox,r&&r.safari,n&&n.apple.device,"draggable"in k.createElement("div")&&!n.apple.device),w=(a.support.cssPointerEvents,function(e){function t(e,r){return function(n,o,a,i){var l=n.options.group.name&&o.options.group.name&&n.options.group.name===o.options.group.name;if(null==e&&(r||l))return!0;if(null==e||!1===e)return!1;if(r&&"clone"===e)return e;if("function"==typeof e)return t(e(n,o,a,i),r)(n,o,a,i);var s=(r?n:o).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var r={},n=e.group;n&&"object"==typeof n||(n={name:n}),r.name=n.name,r.checkPull=t(n.pull,!0),r.checkPut=t(n.put),r.revertClone=n.revertClone,e.group=r}),_=p.Plugin.inherit({klassName:"Sortable",pluginName:"intg.sortable",options:{group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(e,r,n,o){return u(this.el,t.mixin({excluding:[o,n]},this.options))},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:x(window.devicePixelRatio,10)||1,fallbackOnBody:!0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackTolerance:0,fallbackOffset:{x:0,y:0},emptyInsertThreshold:5},_construct:function(e,t){for(var r in this.overrided(e,t),this.el=e,e[h.expando]=this,(t=this.options).draggable=t.draggable||/[uo]l/i.test(e.nodeName)?">li":">*",w(t),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&E,this.nativeDraggable&&(this.options.touchStartThreshold=1),h.sortables.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),this.draggable=new v(this,this.options),this.droppable=new b(this,this.options)},_getDirection:function(e,t){var r=h.dragEl;return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,r,null):this.options.direction},_animate:function(e,t){var r=this.options.animation;h.dragEl;if(r){var n=s.boundingRect(t);if(1===e.nodeType&&(e=s.boundingRect(e)),e.left+e.width/2!==n.left+n.width/2||e.top+e.height/2!==n.top+n.height/2){var o=g.matrix(this.el),a=o&&o.a,l=o&&o.d;d.css(t,"transition","none"),d.css(t,"transform","translate3d("+(e.left-n.left)/(a||1)+"px,"+(e.top-n.top)/(l||1)+"px,0)"),i.reflow(t),d.css(t,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),d.css(t,"transform","translate3d(0,0,0)")}"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=y(function(){d.css(t,"transition",""),d.css(t,"transform",""),t.animated=!1},r)}},_hideClone:function(){},_showClone:function(e){var t=h.active.el,r=h.nextEl;"clone"===e.lastPutMode?h.cloneEl.cloneHidden&&(t.contains(h.dragEl)&&!this.options.group.revertClone?t.insertBefore(h.cloneEl,h.dragEl):r?t.insertBefore(h.cloneEl,r):t.appendChild(h.cloneEl),this.options.group.revertClone&&this._animate(h.dragEl,h.cloneEl),d.show(h.cloneEl),h.cloneEl.cloneHidden=!1):this._hideClone()},_dispatchEvent:function(e,t,r,n,o,a,i,l,s,d,g){var u,p=(e=e||t[h.expando]).options,f="on"+r.charAt(0).toUpperCase()+r.substr(1),v=h.putSortable;u=c.create(r,{to:o||t,from:a||t,item:n||t,clone:h.cloneEl,oldIndex:i,newIndex:l,oldDraggableIndex:s,newDraggableIndex:d,originalEvent:g,pullMode:v?v.lastPutMode:void 0}),t&&t.dispatchEvent(u),p[f]&&p[f].call(e,u)},toArray:function(){for(var e,t=[],r=this.el.children,n=0,o=r.length,a=this.options;n<o;n++)e=r[n],l.closest(e,a.draggable,this.el,!1)&&t.push(e.getAttribute(a.dataIdAttr)||i.generateId(e));return t},sort:function(e){var t={},r=this.el;this.toArray().forEach(function(e,n){var o=r.children[n];l.closest(o,this.options.draggable,r,!1)&&(t[e]=o)},this),e.forEach(function(e){t[e]&&(r.removeChild(t[e]),r.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return l.closest(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var r=this.options;if(void 0===t)return r[e];r[e]=t,"group"===e&&w(r)},destroy:function(){var e=this.el;e[h.expando]=null,Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),h.sortables.splice(h.sortables.indexOf(this.el),1),this.el=e=null}});return _.create=function(e,t){return new _(e,t)},_.version="1.9.0",e.attach("intg.Sortable",_)}),e("skylark-sortable/main",["skylark-langx","skylark-domx-eventer","skylark-domx-finder","skylark-domx-noder","skylark-domx-styler","./Sortable"],function(e,t,r,n,o,a){return a.utils={on:t.on,off:t.off,css:o.css,is:function(e,t){return!!r.closest(e,t,e,!1)},extend:e.mixin,throttle:e.debounce,closest:r.closest,toggleClass:o.toggleClass,clone:function(e){return n.clone(e,!0)},nextTick:function(t){return e.defer(t)},cancelNextTick:function(e){return e&&e.stop()},getChild:function(e,t,n){return n.excluding=[],n.closesting=n.draggable,r.childAt(e,t,n)}},a}),e("skylark-sortable",["skylark-sortable/main"],function(e){return e})}(r),!n){var i=require("skylark-langx-ns");o?module.exports=i:t.skylarkjs=i}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-sortable.js.map
