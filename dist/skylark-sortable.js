/**
 * skylark-sortable - A version of sortable.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-sortable/
 * @license MIT
 */
!function(e,t){var r=t.define,require=t.require,o="function"==typeof r&&r.amd,n=!o&&"undefined"!=typeof exports;if(!o&&!r){var l={};r=t.define=function(e,t,r){"function"==typeof r?(l[e]={factory:r,deps:t.map(function(t){return function(e,t){if("."!==e[0])return e;var r=t.split("/"),o=e.split("/");r.pop();for(var n=0;n<o.length;n++)"."!=o[n]&&(".."==o[n]?r.pop():r.push(o[n]));return r.join("/")}(t,e)}),resolved:!1,exports:null},require(e)):l[e]={factory:null,resolved:!0,exports:r}},require=t.require=function(e){if(!l.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=l[e];if(!module.resolved){var r=[];module.deps.forEach(function(e){r.push(require(e))}),module.exports=module.factory.apply(t,r)||null,module.resolved=!0}return module.exports}}if(!r)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("skylark-langx-hoster/detects/browser",["../hoster"],function(e){return e.detects.browser=function(){return"undefined"!=typeof window&&void 0!==window.document?function(e){e=e.toLowerCase();var t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(iemobile)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],r=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(silk)/.exec(e)||/(android)/.exec(e)||/(win)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||/(playbook)/.exec(e)||/(bb)/.exec(e)||/(blackberry)/.exec(e)||[],o={},n={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",versionNumber:t[4]||t[2]||"0",platform:r[0]||""};n.browser&&(o[n.browser]=!0,o.version=n.version,o.versionNumber=parseInt(n.versionNumber,10));n.platform&&(o[n.platform]=!0);(o.android||o.bb||o.blackberry||o.ipad||o.iphone||o.ipod||o.kindle||o.playbook||o.silk||o["windows phone"])&&(o.mobile=!0);(o.cros||o.mac||o.linux||o.win)&&(o.desktop=!0);(o.chrome||o.opr||o.safari)&&(o.webkit=!0);if(o.rv||o.iemobile){n.browser="ie",o.ie=!0}if(o.edge){delete o.edge;n.browser="edge",o.edge=!0}if(o.safari&&o.blackberry){n.browser="blackberry",o.blackberry=!0}if(o.safari&&o.playbook){n.browser="playbook",o.playbook=!0}if(o.bb){var l="blackberry";n.browser=l,o[l]=!0}if(o.opr){n.browser="opera",o.opera=!0}if(o.safari&&o.android){n.browser="android",o.android=!0}if(o.safari&&o.kindle){n.browser="kindle",o.kindle=!0}if(o.safari&&o.silk){n.browser="silk",o.silk=!0}return o.name=n.browser,o.platform=n.platform,o}(navigator.userAgent):null}}),e("skylark-langx-hoster/is-browser",["./hoster","./detects/browser"],function(e,t){return void 0==e.isBrowser&&(e.isBrowser=t()),e.isBrowser}),e("skylark-domx-layouts/oriented",["skylark-domx-geom","skylark-domx-styler","skylark-domx-finder","./Orientation"],function(e,t,r,o){return function(n,l){var a=t.css(n),i=e.contentRect(n).width,s=r.childAt(n,0,l),d=r.childAt(n,1,l),c=s&&t.css(s),h=d&&t.css(d),g=s&&e.marginSize(s).width,u=d&&e.marginSize(d).width;if("flex"===a.display)return"column"===a.flexDirection||"column-reverse"===a.flexDirection?o.Vertical:o.Horizontal;if("grid"===a.display)return a.gridTemplateColumns.split(" ").length<=1?o.Vertical:o.Horizontal;if(s&&"none"!==c.float){var p="left"===c.float?"left":"right";return!d||"both"!==h.clear&&h.clear!==p?o.Horizontal:o.Vertical}return s&&("block"===c.display||"flex"===c.display||"table"===c.display||"grid"===c.display||g>=i&&"none"===a.float||d&&"none"===a.float&&g+u>i)?o.Vertical:o.Horizontal}}),e("skylark-sortable/fallback/ghoster",["skylark-langx/skylark","skylark-langx/langx","skylark-langx-hoster/is-browser","skylark-langx-hoster/is-mobile","skylark-domx-query","skylark-domx-browser","skylark-domx-noder","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","skylark-domx-eventer","skylark-domx-transforms","skylark-domx-layouts/oriented","skylark-devices-points/touch"],function(e,t,r,o,n,l,a,i,s,d,c,h,g,u){"use strict";function p(e,t,r,o){if(e.getBoundingClientRect||e===window){var{top:n,left:l,bottom:a,right:i,width:d,height:c}=s.boundingRect(e);if(t&&e!==window){var g=h.matrix(r||e),u=g&&g.a,p=g&&g.d;g&&(a=(n/=p)+(c/=p),i=(l/=u)+(d/=u))}return{top:n,left:l,bottom:a,right:i,width:d,height:c}}}var f={ghostEl:null,PositionGhostAbsolutely:o.apple.device,ghostRelativeParent:null,ghostRelativeParentInitialScroll:[],_appendGhost:function(e,t,r){var o=this.ghostEl;if(!o){var n=p(e,!0,t,!this.PositionGhostAbsolutely);d.css(e);if(this.PositionGhostAbsolutely){for(var l=this.ghostRelativeParent=t;"static"===d.css(l,"position")&&"none"===d.css(l,"transform")&&l!==document;)l=l.parentNode;if(l!==document){var i=p(l,!0);n.top-=i.top,n.left-=i.left}l!==document.body&&l!==document.documentElement?(l===document&&(l=this.ghostRelativeParent=a.scrollingElement()),n.top+=l.scrollTop,n.left+=l.scrollLeft):l=this.ghostRelativeParent=a.scrollingElement();var c=s.scrollOffset(l);ghostRelativeParentInitialScroll=[c.offsetLeft,c.offsetTop]}o=this.ghostEl=e.cloneNode(!0),d.toggleClass(o,r.ghostClass,!1),d.toggleClass(o,r.fallbackClass,!0),d.toggleClass(o,r.dragClass,!0),d.css(o,{"box-sizing":"border-box",margin:0,top:n.top,left:n.left,width:n.width,height:n.height,opacity:"0.8",position:this.PositionGhostAbsolutely?"absolute":"fixed",zIndex:"100000",pointerEvents:"none"}),t.appendChild(o)}},getRelativeScrollOffset:function(){return this.PositionGhostAbsolutely&&this.ghostRelativeParent&&autoscroll._getRelativeScrollOffset(this.ghostRelativeParent)},remove:function(){this.ghostEl&&a.remove(this.ghostEl),this.ghostEl=null}};return f}),e("skylark-sortable/fallback/MousedDragDrop",["skylark-langx/langx","skylark-domx-query","skylark-domx-eventer","skylark-domx-styler","skylark-domx-finder","skylark-domx-transforms","skylark-domx-plugins-scrolls/auto-scroll","./ghoster"],function(e,t,r,o,n,l,a,i){"use strict";var s=e.Emitter.inherit({_construct:function(e){this.dnd=e;var r=t(document);this.listenTo(r,"mousemove",this._onMouseMove),this.listenTo(r,"mouseup",this._onMouseUp)},_onMouseUp:function(e){var t=this.dnd;t.putSortable&&t.putSortable.droppable._onDrop(e),t.dragging&&t.dragging._onDragEnd(e),i.remove(),this.destroy()},_onMouseMove:function(e){var t=this.dnd,r=i.ghostEl,n=t.dragging,a=t.dragEl,s=t.tapEvt;if(s){var d=n.options,c=d.fallbackTolerance,h=d.fallbackOffset,g=r&&l.matrix(r),u=r&&g&&g.a,p=r&&g&&g.d,f=i.getRelativeScrollOffset(),v=(e.clientX-s.clientX+h.x)/(u||1)+(f?f[0]-ghostRelativeParentInitialScroll[0]:0)/(u||1),m=(e.clientY-s.clientY+h.y)/(p||1)+(f?f[1]-ghostRelativeParentInitialScroll[1]:0)/(p||1),b=e.touches?"translate3d("+v+"px,"+m+"px,0)":"translate("+v+"px,"+m+"px)";if(!this._dragStarted&&!t.awaitingDragStarted){if(c&&Math.min(Math.abs(e.clientX-n._lastX),Math.abs(e.clientY-n._lastY))<c)return;n._onDragStart(e,!0),i._appendGhost(a,document.body,n.options),this._dragStarted=!0,this._loopId=setInterval(this._emulateDragOver.bind(this),50)}this._handleAutoScroll(e,!0),this.touchEvt=e,r&&o.css(r,"transform",b),e.preventDefault()}},_emulateDragOver:function(e){var t=this.dnd,r=(t.dragEl,this.touchEvt);if(r){if(this._lastX===r.clientX&&this._lastY===r.clientY&&!e)return;this._lastX=r.clientX,this._lastY=r.clientY;for(var o=document.elementFromPoint(r.clientX,r.clientY),n=o;o&&o.shadowRoot&&(o=o.shadowRoot.elementFromPoint(r.clientX,r.clientY))!==n;)n=o;if(n)do{if(n[t.expando])if(n[t.expando].droppable._onDragOver({clientX:r.clientX,clientY:r.clientY,target:o,rootEl:n}))break;o=n}while(n=n.parentNode)}},_handleAutoScroll:function(e,t){var r=this.dnd;if(r.dragEl&&r.active.options.scroll){var o=e.clientX,l=e.clientY;document.elementFromPoint(o,l);if(!this.pointerElemChangedInterval||o!==this.lastPointerElemX||l!==this.lastPointerElemY){this.pointerElemChangedInterval&&clearInterval(this.pointerElemChangedInterval);var i=null;this.pointerElemChangedInterval=setInterval(function(){var e=n.scrollableParent(document.elementFromPoint(o,l),!0);e!==i&&(i=e,this.autoscroller&&(this.autoscroller.destroy(),this.autoscroller=null),this.autoscroller=new a(i,r.active.options),this.autoscroller.handle(o,l))},10),this.lastPointerElemX=o,this.lastPointerElemY=l}}},destroy:function(){this.unlistenTo(),this._loopId&&clearInterval(this._loopId),this.pointerElemChangedInterval&&clearInterval(this.pointerElemChangedInterval),this.autoscroller&&(this.autoscroller.destroy(),this.autoscroller=null),this._dragStarted=!1}});return s}),e("skylark-sortable/dnd",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-query","skylark-domx-browser","skylark-domx-noder","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","skylark-domx-eventer","./fallback/MousedDragDrop"],function(e,t,r,o,n,l,a,i,s,d){"use strict";var c="Sortable"+(new Date).getTime(),h={log:function(e,t){r("#console").append("<div>"+e+":"+t+"</div>")},expando:c,activeGroup:null,active:null,putSortable:null,sortables:[],rootEl:null,dragEl:null,cloneEl:null,nextEl:null,parentEl:null,oldIndex:null,awaitingDragStarted:!1,prepare:function(e,r){this.dragging=e,this.active=e.sortable,this.dragEl=r,this.active.nativeDraggable?(r.draggable=!0,s.on(h.dragEl,"dragend",e=>{this.dragging._onDragEnd(e)}),s.on(h.dragEl,"dragstart",e=>{this.dragging._onDragStart(e)})):this._fallbacker=new d(this),h.log("_triggerDragStart","start"),h.log("_triggerDragStart","nativeDraggable is "+this.active.nativeDraggable);try{document.selection?t.defer(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},start:function(e,t){this.dragging=e,this.active=e.sortable},over:function(e){},end:function(e){this._nulling()},nearestEmptyInsertDetectEvent:function(e){if(h.dragEl){var t=h._detectNearestEmptySortable(e.clientX,e.clientY);if(t){var r={};for(var o in e)r[o]=e[o];r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[c]._onDragOver(r)}}},_detectNearestEmptySortable:function(e,t){for(var r=this.sortables,o=0;o<r.length;o++)if(!l.lastChild(r[o],{ignoreHidden:!0,excluding:[this.ghostEl]})){var n=a.boundingRect(r[o]),i=r[o][c].options.emptyInsertThreshold,s=e>=n.left-i&&e<=n.right+i,d=t>=n.top-i&&t<=n.bottom+i;if(i&&s&&d)return r[o]}},_disableDraggable:function(e){e.draggable=!1},_nulling:function(){h.dragEl=h.rootEl=h.parentEl=h.nextEl=h.cloneEl=h.tapEvt=h.oldIndex=h.putSortable=h.activeGroup=h.active=null}};return h}),e("skylark-sortable/draggable",["skylark-langx","skylark-domx-finder","skylark-domx-styler","skylark-domx-eventer","skylark-domx-noder","skylark-devices-points/touch","./dnd"],function(e,t,r,o,n,l,a){var i,s=[];function d(e,r){return t.index(e,function(e){return!("TEMPLATE"===e.nodeName.toUpperCase()||e===a.cloneEl||r&&!t.matches(e,r))})}return class{constructor(e,t){this.sortable=e;var r=this._elm=e.elm();this.options=t,l.mousy(r),o.on(r,"mousedown",this._onMouseDown,this)}elm(){return this._elm}_onMouseDown(e){var o,n,l=this.sortable,c=this._elm,h=this.options,g=h.preventOnFilter,u=e.type,p=e.target,f=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||p,v=h.filter;if(function(e){s.length=0;var t=e.getElementsByTagName("input"),r=t.length;for(;r--;){var o=t[r];o.checked&&s.push(o)}}(c),!(/mousedown/.test(u)&&0!==e.button||h.disabled||f.isContentEditable||(p=t.closest(p,h.draggable,c,!1),i===p))){if(a.log("_onTapStart",p.tagName+","+p.className),o=d(p),n=d(p,h.draggable),"function"==typeof v){if(v.call(this,e,p,this))return l._dispatchEvent(l,f,"filter",p,c,c,o,void 0,n),void(g&&e.cancelable&&e.preventDefault())}else if(v&&(v=v.split(",").some(function(e){if(e=t.closest(f,e.trim(),c,!1))return l._dispatchEvent(l,e,"filter",p,c,c,o,void 0,n),!0})))return void(g&&e.cancelable&&e.preventDefault());if(!h.handle||t.closest(f,h.handle,c,!1)){c.ownerDocument;var m,b=a.dragEl,k=(a.parentEl,a.nextEl,a.oldIndex),y=a.oldDraggableIndex;a.tapEvt;a.log("_prepareDragStart","start"),p&&!b&&p.parentNode===c&&(m=c,b=a.dragEl=p,a.parentEl=b.parentNode,a.nextEl=b.nextSibling,i=p,a.activeGroup=this.options.group,k=a.oldIndex=o,y=a.oldDraggableIndex=n,a.tapEvt={target:b,clientX:e.clientX,clientY:e.clientY},this._lastX=e.clientX,this._lastY=e.clientY,b.style["will-change"]="all",b.style.transition="",b.style.transform="",h.ignore.split(",").forEach(function(e){!function(e,t,r){if(e){var o=e.getElementsByTagName(t),n=0,l=o.length;if(r)for(;n<l;n++)r(o[n],n);return o}}(b,e.trim(),a._disableDraggable)}),a.prepare(this,a.dragEl),l._dispatchEvent(l,m,"choose",b,m,m,k,void 0,y),r.toggleClass(b,h.chosenClass,!0))}}}_onDragStart(t,o){a.log("_onDragStart","start");var l=this,i=a.dragEl,s=this._elm,d=t.dataTransfer,c=l.options,h=a.cloneEl=n.clone(i,!0);h.draggable=!1,h.style["will-change"]="",r.toggleClass(h,l.options.chosenClass,!1),l._cloneId=e.defer(function(){l.options.removeCloneOnHide||s.insertBefore(h,i),l.sortable._dispatchEvent(l,s,"clone",i)}),o||r.toggleClass(i,c.dragClass,!0),o||(d&&(d.effectAllowed="move",c.setData&&c.setData.call(l,d,i)),r.css(i,"transform","translateZ(0)")),a.awaitingDragStarted=!0,l._dragStartId=e.defer(function(e,t){a.awaitingDragStarted=!1;var o=a.dragEl,n=this._elm,l=a.oldIndex,i=a.oldDraggableIndex;if(n&&o){a.start(this);var s=this.options;!e&&r.toggleClass(o,s.dragClass,!1),r.toggleClass(o,s.ghostClass,!0),r.css(o,"transform",""),this.sortable._dispatchEvent(this,n,"start",o,n,n,l,void 0,i,void 0,t)}else this._nulling()}.bind(l,o,t))}_onDragEnd(e){this._elm,this.options,a.dragEl;var t=this.sortable;a.putSortable;a.awaitingDragStarted=!1,!1,clearTimeout(this._dragStartTimer),this._cloneId&&(this._cloneId.cancel(),this._cloneId=null),this._dragStartId&&(this._dragStartId.cancel(),this._dragStartId=null),t.nativeDraggable&&(o.off(a.dragEl,"dragstart",this._onDragStart),o.off(a.dragEl,"dragend",this._onDragEnd)),i=null,s.forEach(function(e){e.checked=!0}),s.length=0,a.end()}destroy(){o.off(el,"mousedown",this._onMouseDown)}}}),e("skylark-sortable/droppable",["skylark-langx","skylark-domx-finder","skylark-domx-styler","skylark-domx-eventer","skylark-domx-noder","skylark-domx-geom","skylark-devices-points/touch","./dnd"],function(e,t,r,o,n,l,a,i){var s,d,c,h=!1;function g(e,r){for(var o=t.scrollableParent(e,!0),a=l.boundingRect(e)[r];o;){var i=l.boundingRect(o)[r];if(!("top"===r||"left"===r?a>=i:a<=i))return o;if(o===n.scrollingElement())break;o=t.scrollableParent(o,!1)}return!1}function u(){h=!1}function p(e,r){return t.index(e,function(e){return!("TEMPLATE"===e.nodeName.toUpperCase()||e===i.cloneEl||r&&!t.matches(e,r))})}return class{constructor(e,t){this.sortable=e;var r=this.el=this._elm=e.elm();this.options=t,e.nativeDraggable&&(o.on(r,"dragover",this),o.on(r,"dragenter",this),o.on(r,"drop",this)),o.on(r,"selectstart",this)}_onMove(e,t,r,n,a,s,d,c){var h,g,u=e[i.expando],p=u.options.onMove;return h=o.create("move",{to:t,from:e,dragged:r,draggedRect:n,related:a||t,relatedRect:s||l.boundingRect(t),willInsertAfter:c,originalEvent:d}),e.dispatchEvent(h),p&&(g=p.call(u,h,d)),g}_onDragOver(e){var o,n,a,f,v,m,b,k=this._elm,y=e.target,x=this.options,E=x.group,w=i.active,_=i.activeGroup===E,D=x.sort,C=this.sortable,S=i.dragEl,I=i.active.elm(),P=i.putSortable,T=i.nextEl,R=i.oldIndex,M=i.oldDraggableIndex;if(!h){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),s=!0,y=t.closest(y,x.draggable,k,!0),S.contains(e.target)||y.animated)return j(!1);if(w&&!x.disabled&&(_?D||(a=!I.contains(S)):P===this||(this.lastPutMode=i.activeGroup.checkPull(this,w,S,e))&&E.checkPut(this,w,S,e))){var A=C._getDirection(e,y);if(o=l.boundingRect(S),a)return this._hideClone(),i.parentEl=I,T?I.insertBefore(S,T):I.appendChild(S),j(!0);var O=function(e){return t.lastChild(e,{ignoreHidden:!0,excluding:[]})}(k);if(!O||function(e,r,o){var n=l.boundingRect(t.lastChild(o,{ignoreHidden:!0,excluding:[]})),a="vertical"===r?e.clientY:e.clientX,i="vertical"===r?e.clientX:e.clientY,s="vertical"===r?n.bottom:n.right,d="vertical"===r?n.left:n.top,c="vertical"===r?n.right:n.bottom;return"vertical"===r?i>c+10||i<=c&&a>s&&i>=d:a>s&&i>d||a<=s&&i>c+10}(e,A,k)&&!O.animated){if(O&&k===e.target&&(y=O),y&&(n=l.boundingRect(y)),_?w._hideClone():w._showClone(this),!1!==this._onMove(I,k,S,o,y,n,e,!!y))return k.appendChild(S),i.parentEl=k,L(),j(!0)}else if(y&&y!==S&&y.parentNode===k){var N,X=0,Y=y.sortableMouseAligned,B=S.parentNode!==k,G="vertical"===A?"top":"left",H=g(y,"top")||g(S,"top"),z=H?H.scrollTop:void 0;if(v!==y&&(f=null,N=l.boundingRect(y)[G],d=!1),function(e,t,r){var o=l.boundingRect(e),n=l.boundingRect(t),a="vertical"===r?o.left:o.top,i="vertical"===r?o.right:o.bottom,s="vertical"===r?o.width:o.height,d="vertical"===r?n.left:n.top,c="vertical"===r?n.right:n.bottom,h="vertical"===r?n.width:n.height;return a===d||i===c||a+s/2===d+h/2}(S,y,A)&&Y||B||H||x.invertSwap||"insert"===f||"swap"===f?("swap"!==f&&(c=x.invertSwap||B),X=function(e,t,r,o,n,a,i){var s=l.boundingRect(t),c="vertical"===r?e.clientY:e.clientX,h="vertical"===r?s.height:s.width,g="vertical"===r?s.top:s.left,u="vertical"===r?s.bottom:s.right,p=l.boundingRect(S),f=!1;if(!a)if(i&&b<h*o)if(!d&&(1===m?c>g+h*n/2:c<u-h*n/2)&&(d=!0),d)f=!0;else{"vertical"===r?p.top:p.left,"vertical"===r?p.bottom:p.right;if(1===m?c<g+b:c>u-b)return-1*m}else if(c>g+h*(1-o)/2&&c<u-h*(1-o)/2)return V(t);if((f=f||a)&&(c<g+h*n/2||c>u-h*n/2))return c>g+h/2?1:-1;return 0}(e,y,A,x.swapThreshold,null==x.invertedSwapThreshold?x.swapThreshold:x.invertedSwapThreshold,c,v===y),f="swap"):(X=V(y),f="insert"),0===X)return j(!1);v=y,m=X,n=l.boundingRect(y);var q=y.nextElementSibling,F=!1;F=1===X;var U=this._onMove(I,k,S,o,y,n,e,F);if(!1!==U)return 1!==U&&-1!==U||(F=1===U),h=!0,setTimeout(u,30),_?w._hideClone():w._showClone(this),F&&!q?k.appendChild(S):y.parentNode.insertBefore(S,F?q:y),H&&l.scrollBy(H,0,z-H.scrollTop),i.parentEl=S.parentNode,void 0===N||c||(b=Math.abs(N-l.boundingRect(y)[G])),L(),j(!0)}if(k.contains(S))return j(!1)}return!1}function j(t){return t&&(_?w._hideClone():w._showClone(C),w&&(r.toggleClass(S,P?P.options.ghostClass:w.options.ghostClass,!1),r.toggleClass(S,x.ghostClass,!0)),P!==C&&C!==i.active?P=i.putSortable=C:C===i.active&&(P=i.putSortable=null),o&&C._animate(o,S),y&&n&&C._animate(n,y)),(y===S&&!S.animated||y===k&&!y.animated)&&(v=null),x.dragoverBubble||e.rootEl||y===document||(i.over(e),!t&&i.nearestEmptyInsertDetectEvent(e)),!x.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),!0}function L(){C._dispatchEvent(C,I,"change",y,k,I,R,p(S),M,p(S,x.draggable),e)}function V(e){var t=p(S),r=p(e);return t<r?1:-1}}_onDrop(e){this.el;var t,l,a=this.options,h=this.sortable,g=i.active.elm(),u=i.dragEl,f=i.putSortable,v=i.parentEl,m=i.oldIndex,b=i.oldDraggableIndex,k=i.nextEl;c=!1,d=!1,h.nativeDraggable&&o.off(document,"drop",this),this._offUpEvents(),e&&(s&&(e.cancelable&&e.preventDefault(),!a.dropBubble&&e.stopPropagation()),(g===v||f&&"clone"!==f.lastPutMode)&&n.remove(i.cloneEl),u&&(i._disableDraggable(u),u.style["will-change"]="",r.toggleClass(u,f?f.options.ghostClass:this.options.ghostClass,!1),r.toggleClass(u,this.options.chosenClass,!1),h._dispatchEvent(this,g,"unchoose",u,v,g,m,null,b,null,e),g!==v?(t=p(u),l=p(u,a.draggable),t>=0&&(h._dispatchEvent(null,v,"add",u,v,g,m,t,b,l,e),h._dispatchEvent(this,g,"remove",u,v,g,m,t,b,l,e),h._dispatchEvent(null,v,"sort",u,v,g,m,t,b,l,e),h._dispatchEvent(this,g,"sort",u,v,g,m,t,b,l,e)),f&&f.save()):u.nextSibling!==k&&(t=p(u),l=p(u,a.draggable),t>=0&&(h._dispatchEvent(this,g,"update",u,v,g,m,t,b,l,e),h._dispatchEvent(this,g,"sort",u,v,g,m,t,b,l,e))),i.active&&(null!=t&&-1!==t||(t=m,l=b),h._dispatchEvent(this,g,"end",u,v,g,m,t,b,l,e),h.save()))),this._nulling()}_offUpEvents(){var e=this.el.ownerDocument;o.off(e,"mouseup",this._onDrop),o.off(document,"selectstart",this)}_nulling(){s=null}handleEvent(e){switch(e.type){case"drop":this._onDrop(e);break;case"dragenter":case"dragover":i.dragEl&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}}destroy(){var e=this.sortable;e.nativeDraggable&&(o.off(el,"dragover",this),o.off(el,"dragenter",this))}}}),e("skylark-sortable/Sortable",["skylark-langx/skylark","skylark-langx/langx","skylark-langx-hoster/is-browser","skylark-langx-hoster/is-mobile","skylark-domx-query","skylark-domx-browser","skylark-domx-noder","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","skylark-domx-eventer","skylark-domx-transforms","skylark-domx-layouts/oriented","skylark-domx-plugins-base","skylark-devices-points/touch","./dnd","./draggable","./droppable"],function(e,t,r,o,n,l,a,i,s,d,c,h,g,u,p,f,v,m){"use strict";var b=window,k=b.document,y=b.parseInt,x=b.setTimeout,E=(b.Polymer,r&&r.ie,r&&r.edge,r&&r.firefox,r&&r.safari,o&&o.apple.device,"draggable"in k.createElement("div")&&!o.apple.device),w=(l.support.cssPointerEvents,function(e){function t(e,r){return function(o,n,l,a){var i=o.options.group.name&&n.options.group.name&&o.options.group.name===n.options.group.name;if(null==e&&(r||i))return!0;if(null==e||!1===e)return!1;if(r&&"clone"===e)return e;if("function"==typeof e)return t(e(o,n,l,a),r)(o,n,l,a);var s=(r?o:n).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var r={},o=e.group;o&&"object"==typeof o||(o={name:o}),r.name=o.name,r.checkPull=t(o.pull,!0),r.checkPut=t(o.put),r.revertClone=o.revertClone,e.group=r}),_=u.Plugin.inherit({klassName:"Sortable",pluginName:"intg.sortable",options:{group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(e,r,o,n){return g(this.el,t.mixin({excluding:[n,o]},this.options))},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:y(window.devicePixelRatio,10)||1,fallbackOnBody:!0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackTolerance:0,fallbackOffset:{x:0,y:0},emptyInsertThreshold:5},_construct:function(e,t){for(var r in this.overrided(e,t),this.el=e,e[f.expando]=this,(t=this.options).draggable=t.draggable||/[uo]l/i.test(e.nodeName)?">li":">*",w(t),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&E,this.nativeDraggable&&(this.options.touchStartThreshold=1),f.sortables.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),this.draggable=new v(this,this.options),this.droppable=new m(this,this.options)},_getDirection:function(e,t){var r=f.dragEl;return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,r,null):this.options.direction},_animate:function(e,t){var r=this.options.animation;f.dragEl;if(r){var o=s.boundingRect(t);if(1===e.nodeType&&(e=s.boundingRect(e)),e.left+e.width/2!==o.left+o.width/2||e.top+e.height/2!==o.top+o.height/2){var n=h.matrix(this.el),l=n&&n.a,i=n&&n.d;d.css(t,"transition","none"),d.css(t,"transform","translate3d("+(e.left-o.left)/(l||1)+"px,"+(e.top-o.top)/(i||1)+"px,0)"),a.reflow(t),d.css(t,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),d.css(t,"transform","translate3d(0,0,0)")}"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=x(function(){d.css(t,"transition",""),d.css(t,"transform",""),t.animated=!1},r)}},_hideClone:function(){},_showClone:function(e){var t=f.active.el,r=f.nextEl;"clone"===e.lastPutMode?f.cloneEl.cloneHidden&&(t.contains(f.dragEl)&&!this.options.group.revertClone?t.insertBefore(f.cloneEl,f.dragEl):r?t.insertBefore(f.cloneEl,r):t.appendChild(f.cloneEl),this.options.group.revertClone&&this._animate(f.dragEl,f.cloneEl),d.show(f.cloneEl),f.cloneEl.cloneHidden=!1):this._hideClone()},_dispatchEvent:function(e,t,r,o,n,l,a,i,s,d,h){var g,u=(e=e||t[f.expando]).options,p="on"+r.charAt(0).toUpperCase()+r.substr(1),v=f.putSortable;g=c.create(r,{to:n||t,from:l||t,item:o||t,clone:f.cloneEl,oldIndex:a,newIndex:i,oldDraggableIndex:s,newDraggableIndex:d,originalEvent:h,pullMode:v?v.lastPutMode:void 0}),t&&t.dispatchEvent(g),u[p]&&u[p].call(e,g)},toArray:function(){for(var e,t=[],r=this.el.children,o=0,n=r.length,l=this.options;o<n;o++)e=r[o],i.closest(e,l.draggable,this.el,!1)&&t.push(e.getAttribute(l.dataIdAttr)||a.generateId(e));return t},sort:function(e){var t={},r=this.el;this.toArray().forEach(function(e,o){var n=r.children[o];i.closest(n,this.options.draggable,r,!1)&&(t[e]=n)},this),e.forEach(function(e){t[e]&&(r.removeChild(t[e]),r.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return i.closest(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var r=this.options;if(void 0===t)return r[e];r[e]=t,"group"===e&&w(r)},destroy:function(){var e=this.el;e[f.expando]=null,Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),f.sortables.splice(f.sortables.indexOf(this.el),1),this.el=e=null}});return _.create=function(e,t){return new _(e,t)},_.version="1.9.0",e.attach("intg.Sortable",_)}),e("skylark-sortable/main",["skylark-langx","skylark-domx-eventer","skylark-domx-finder","skylark-domx-noder","skylark-domx-styler","./Sortable"],function(e,t,r,o,n,l){return l.utils={on:t.on,off:t.off,css:n.css,is:function(e,t){return!!r.closest(e,t,e,!1)},extend:e.mixin,throttle:e.debounce,closest:r.closest,toggleClass:n.toggleClass,clone:function(e){return o.clone(e,!0)},nextTick:function(t){return e.defer(t)},cancelNextTick:function(e){return e&&e.stop()},getChild:function(e,t,o){return o.excluding=[],o.closesting=o.draggable,r.childAt(e,t,o)}},l}),e("skylark-sortable",["skylark-sortable/main"],function(e){return e})}(r),!o){var a=require("skylark-langx-ns");n?module.exports=a:t.skylarkjs=a}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-sortable.js.map
