/**
 * skylark-sortable - A version of sortable.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-sortable/
 * @license MIT
 */
(function(factory,globals,define,require) {
  var isAmd = (typeof define === 'function' && define.amd),
      isCmd = (!isAmd && typeof exports !== 'undefined');

  if (!isAmd && !define) {
    var map = {};
    function absolute(relative, base) {
        if (relative[0]!==".") {
          return relative;
        }
        var stack = base.split("/"),
            parts = relative.split("/");
        stack.pop(); 
        for (var i=0; i<parts.length; i++) {
            if (parts[i] == ".")
                continue;
            if (parts[i] == "..")
                stack.pop();
            else
                stack.push(parts[i]);
        }
        return stack.join("/");
    }
    define = globals.define = function(id, deps, factory) {
        if (typeof factory == 'function') {
            map[id] = {
                factory: factory,
                deps: deps.map(function(dep){
                  return absolute(dep,id);
                }),
                resolved: false,
                exports: null
            };
            require(id);
        } else {
            map[id] = {
                factory : null,
                resolved : true,
                exports : factory
            };
        }
    };
    require = globals.require = function(id) {
        if (!map.hasOwnProperty(id)) {
            throw new Error('Module ' + id + ' has not been defined');
        }
        var module = map[id];
        if (!module.resolved) {
            var args = [];

            module.deps.forEach(function(dep){
                args.push(require(dep));
            })

            module.exports = module.factory.apply(globals, args) || null;
            module.resolved = true;
        }
        return module.exports;
    };
  }
  
  if (!define) {
     throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");
  }

  factory(define,require);

  if (!isAmd) {
    var skylarkjs = require("skylark-langx-ns");

    if (isCmd) {
      module.exports = skylarkjs;
    } else {
      globals.skylarkjs  = skylarkjs;
    }
  }

})(function(define,require) {

define("skylark-langx-hoster/detects/browser",["../hoster"],function(e){return e.detects.browser=function(){var e,t,r;return"undefined"!=typeof window&&void 0!==window.document?(e=(e=navigator.userAgent).toLowerCase(),t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(iemobile)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||0<=e.indexOf("trident")&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],e=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(silk)/.exec(e)||/(android)/.exec(e)||/(win)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||/(playbook)/.exec(e)||/(bb)/.exec(e)||/(blackberry)/.exec(e)||[],r={},(t={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",versionNumber:t[4]||t[2]||"0",platform:e[0]||""}).browser&&(r[t.browser]=!0,r.version=t.version,r.versionNumber=parseInt(t.versionNumber,10)),t.platform&&(r[t.platform]=!0),(r.android||r.bb||r.blackberry||r.ipad||r.iphone||r.ipod||r.kindle||r.playbook||r.silk||r["windows phone"])&&(r.mobile=!0),(r.cros||r.mac||r.linux||r.win)&&(r.desktop=!0),(r.chrome||r.opr||r.safari)&&(r.webkit=!0),(r.rv||r.iemobile)&&(t.browser="ie",r.ie=!0),r.edge&&(delete r.edge,r[t.browser="edge"]=!0),r.safari&&r.blackberry&&(r[t.browser="blackberry"]=!0),r.safari&&r.playbook&&(r[t.browser="playbook"]=!0),r.bb&&(r[t.browser="blackberry"]=!0),r.opr&&(r[t.browser="opera"]=!0),r.safari&&r.android&&(r[t.browser="android"]=!0),r.safari&&r.kindle&&(r[t.browser="kindle"]=!0),r.safari&&r.silk&&(r[t.browser="silk"]=!0),r.name=t.browser,r.platform=t.platform,r):null}}),define("skylark-langx-hoster/is-browser",["./hoster","./detects/browser"],function(e,t){return null==e.isBrowser&&(e.isBrowser=t()),e.isBrowser}),define("skylark-domx-layouts/oriented",["skylark-domx-geom","skylark-domx-styler","skylark-domx-finder","./Orientation"],function(d,c,g,u){return function(e,t){var r,n=c.css(e),a=d.contentRect(e).width,o=g.childAt(e,0,t),e=g.childAt(e,1,t),t=o&&c.css(o),l=e&&c.css(e),i=o&&d.marginSize(o).width,s=e&&d.marginSize(e).width;return"flex"===n.display?"column"===n.flexDirection||"column-reverse"===n.flexDirection?u.Vertical:u.Horizontal:"grid"===n.display?n.gridTemplateColumns.split(" ").length<=1?u.Vertical:u.Horizontal:o&&"none"!==t.float?(r="left"===t.float?"left":"right",!e||"both"!==l.clear&&l.clear!==r?u.Horizontal:u.Vertical):o&&("block"===t.display||"flex"===t.display||"table"===t.display||"grid"===t.display||a<=i&&"none"===n.float||e&&"none"===n.float&&a<i+s)?u.Vertical:u.Horizontal}}),define("skylark-sortable/dnd",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-query","skylark-domx-browser","skylark-domx-noder","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","skylark-domx-eventer"],function(e,t,r,n,a,i,s,o,l){"use strict";var d="Sortable"+(new Date).getTime(),c={log:function(e,t){r("#console").append("<div>"+e+":"+t+"</div>")},expando:d,activeGroup:null,active:null,putSortable:null,sortables:[],rootEl:null,dragEl:null,cloneEl:null,nextEl:null,parentEl:null,oldIndex:null,awaitingDragStarted:!1,prepare:function(e,t){this.dragging=e,this.active=e.sortable,this.dragEl=t},start:function(e,t){this.dragging=e,this.active=e.sortable},over:function(e){},end:function(e){this._nulling()},nearestEmptyInsertDetectEvent:function(e){if(c.dragEl){var t=c._detectNearestEmptySortable(e.clientX,e.clientY);if(t){var r,n={};for(r in e)n[r]=e[r];n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[d]._onDragOver(n)}}},_detectNearestEmptySortable:function(e,t){for(var r=this.sortables,n=0;n<r.length;n++)if(!i.lastChild(r[n],{ignoreHidden:!0,excluding:[this.ghostEl]})){var a=s.boundingRect(r[n]),o=r[n][d].options.emptyInsertThreshold,l=e>=a.left-o&&e<=a.right+o,a=t>=a.top-o&&t<=a.bottom+o;if(o&&l&&a)return r[n]}},_disableDraggable:function(e){e.draggable=!1},_nulling:function(){c.dragEl=c.rootEl=c.parentEl=c.nextEl=c.cloneEl=c.tapEvt=c.oldIndex=c.putSortable=c.activeGroup=c.active=null}};return c}),define("skylark-domx-plugins-dnd/draggable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-finder","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-devices-points/touch","skylark-domx-plugins-base","./dnd","./manager"],function(n,e,t,a,r,o,l,i,s,d,c){o.on,o.off,t.attr,t.removeAttr,r.pagePosition,l.addClass,r.height;t=s.Plugin.inherit({klassName:"Draggable",pluginName:"lark.dnd.draggable",options:{draggingClass:"dragging",forceFallback:!1},_construct:function(e,t){this.overrided(e,t);var r=this,t=this.options;r.draggingClass=t.draggingClass,["preparing","started","ended","moving"].forEach(function(e){n.isFunction(t[e])&&r.on(e,t[e])}),i.mousy(e),o.on(e,{mousedown:function(e){var t=r.options;t.handle&&(n.isFunction(t.handle)?r.dragHandle=t.handle(e.target,r._elm):r.dragHandle=a.closest(e.target,t.handle,r._elm),!r.dragHandle)||(t.source?n.isFunction(t.source)?r.dragSource=t.source(e.target,r._elm):r.dragSource=a.closest(e.target,t.source,r._elm):r.dragSource=r._elm,r.startPos={x:e.clientX,y:e.clientY},c.prepare(r,e))},mouseup:function(e){},dragstart:function(e){c.dragging===r&&c.start(r,e)},dragend:function(e){c.dragging===r&&(o.stop(e),c.dragging)&&c.end(!1)}})}});return s.register(t,"draggable"),d.Draggable=t}),define("skylark-sortable/draggable",["skylark-langx","skylark-domx-finder","skylark-domx-styler","skylark-domx-eventer","skylark-domx-noder","skylark-domx-plugins-dnd/draggable","./dnd"],function(s,g,u,e,d,n,p){var h,a=[];function f(e,t,r){if(e){var n=e.getElementsByTagName(t),a=0,o=n.length;if(r)for(;a<o;a++)r(n[a],a)}}function v(e,t){return g.index(e,function(e){return!("TEMPLATE"===e.nodeName.toUpperCase()||e===p.cloneEl||t&&!g.matches(e,t))})}function b(e){a.length=0;for(var t=e.getElementsByTagName("input"),r=t.length;r--;){var n=t[r];n.checked&&a.push(n)}}return class{constructor(e,t){this.sortable=e;var e=this._elm=e.elm(),r=(this.options=t,this);this._dndDraggable=new n(e,{forceFallback:this.options.forceFallback,source:this.options.draggable,handle:this.options.handle,preparing:function(e){r._onPrepare(e)},started:function(e){r._onDragStart(e.originalEvent)},ended:function(e){r._onDragEnd(e.originalEvent)}})}elm(){return this._elm}_onPrepare(t){var r,n,a=this.sortable,o=this._elm,e=this.options,l=e.preventOnFilter,i=t.dragSource,s=e.filter;if(b(o),h===i)t.dragSource=null;else{if(p.log("_onTapStart",i.tagName+","+i.className),r=v(i),n=v(i,e.draggable),"function"==typeof s){if(s.call(this,t,i,this))return a._dispatchEvent(a,originalTarget,"filter",i,o,o,r,void 0,n),l&&(t.preventDefault=!0),void(t.dragSource=null)}else if(s=s&&s.split(",").some(function(e){(e=g.closest(originalTarget,e.trim(),o,!1))&&(a._dispatchEvent(a,e,"filter",i,o,o,r,void 0,n),t.dragSource=null)}))return l&&(t.preventDefault=!0),void(t.dragSource=null);o.ownerDocument;var d,c=p.dragEl;p.parentEl,p.nextEl,p.oldIndex,p.oldDraggableIndex,p.tapEvt;p.log("_prepareDragStart","start"),i&&!c&&i.parentNode===o&&(s=o,c=p.dragEl=i,p.parentEl=c.parentNode,p.nextEl=c.nextSibling,h=i,p.activeGroup=this.options.group,l=p.oldIndex=r,d=p.oldDraggableIndex=n,p.tapEvt={target:c,clientX:t.originalEvent.clientX,clientY:t.originalEvent.clientY},this._lastX=t.originalEvent.clientX,this._lastY=t.originalEvent.clientY,c.style["will-change"]="all",c.style.transition="",c.style.transform="",e.ignore.split(",").forEach(function(e){f(c,e.trim(),p._disableDraggable)}),p.prepare(this,p.dragEl),a._dispatchEvent(a,s,"choose",c,s,s,l,void 0,d),u.toggleClass(c,e.chosenClass,!0))}}_onDragStart(e,t){p.log("_onDragStart","start");var r=this,n=p.dragEl,a=this._elm,o=e.dataTransfer,l=r.options,i=p.cloneEl=d.clone(n,!0);i.draggable=!1,i.style["will-change"]="",u.toggleClass(i,r.options.chosenClass,!1),r._cloneId=s.defer(function(){r.options.removeCloneOnHide||a.insertBefore(i,n),r.sortable._dispatchEvent(r,a,"clone",n)}),t||u.toggleClass(n,l.dragClass,!0),t||(o&&(o.effectAllowed="move",l.setData)&&l.setData.call(r,o,n),u.css(n,"transform","translateZ(0)")),p.awaitingDragStarted=!0,r._dragStartId=s.defer(function(e,t){p.awaitingDragStarted=!1;var r,n=p.dragEl,a=this._elm,o=p.oldIndex,l=p.oldDraggableIndex;a&&n?(p.start(this),r=this.options,e||u.toggleClass(n,r.dragClass,!1),u.toggleClass(n,r.ghostClass,!0),u.css(n,"transform",""),this.sortable._dispatchEvent(this,a,"start",n,a,a,o,void 0,l,void 0,t)):this._nulling()}.bind(r,t,e))}_onDragEnd(e){this._elm,this.options,p.dragEl,this.sortable,p.putSortable;p.awaitingDragStarted=!1,clearTimeout(this._dragStartTimer),this._cloneId&&(this._cloneId.cancel(),this._cloneId=null),this._dragStartId&&(this._dragStartId.cancel(),this._dragStartId=null),h=null,a.forEach(function(e){e.checked=!0}),a.length=0,p.end()}}}),define("skylark-domx-plugins-dnd/droppable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-finder","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-plugins-base","./dnd","./manager"],function(i,e,t,r,n,s,d,a,o,c){s.on,s.off,t.attr,t.removeAttr,n.pagePosition,d.addClass,n.height;t=a.Plugin.inherit({klassName:"Droppable",pluginName:"lark.dnd.droppable",options:{draggingClass:"dragging"},_construct:function(r,t){this.overrided(r,t);var n,a,o=this,l=((t=o.options).draggingClass,!0);["started","entered","leaved","dropped","overing"].forEach(function(e){i.isFunction(t[e])&&o.on(e,t[e])}),s.on(r,{dragover:function(e){var t;e.stopPropagation(),l&&(t=s.create("overing",{originalEvent:e,overElm:e.target,transfer:c.draggingTransfer,acceptable:!0}),o.trigger(t),t.acceptable)&&e.preventDefault()},dragenter:function(e){o.options;var t=o._elm,r=s.create("entered",{originalEvent:e,transfer:c.draggingTransfer});o.trigger(r),e.stopPropagation(),n&&l&&d.addClass(t,n)},dragleave:function(e){o.options;var t=o._elm;if(!l)return!1;var r=s.create("leaved",{originalEvent:e,transfer:c.draggingTransfer});o.trigger(r),e.stopPropagation(),n&&l&&d.removeClass(t,n)},drop:function(e){o.options;var t=o._elm;s.stop(e),c.dragging&&(n&&l&&d.addClass(t,n),t=s.create("dropped",{originalEvent:e,transfer:c.draggingTransfer}),o.trigger(t),c.end(!0))}}),c.on("dndStarted",function(e){e=s.create("started",{transfer:c.draggingTransfer,acceptable:!1,dragging:e.dragging});o.trigger(e),l=e.acceptable,n=e.hoverClass,(a=e.activeClass)&&l&&d.addClass(r,a)}).on("dndEnded",function(e){var t=s.create("ended",{transfer:c.draggingTransfer,acceptable:!1});o.trigger(t),n&&l&&d.removeClass(r,n),a&&l&&d.removeClass(r,a),l=!1,n=a=null})}});return a.register(t,"droppable"),o.Droppable=t}),define("skylark-sortable/droppable",["skylark-langx","skylark-domx-finder","skylark-domx-styler","skylark-domx-eventer","skylark-domx-noder","skylark-domx-geom","skylark-domx-plugins-dnd/droppable","./dnd"],function(e,I,P,u,p,N,n,A){var R,B,O,H=!1;function M(e,t){for(var r=I.scrollableParent(e,!0),n=N.boundingRect(e)[t];r;){var a=N.boundingRect(r)[t],a="top"===t||"left"===t?a<=n:n<=a;if(!a)return r;if(r===p.scrollingElement())break;r=I.scrollableParent(r,!1)}return!1}function F(){H=!1}function X(e){return I.lastChild(e,{ignoreHidden:!0,excluding:[]})}function Y(e,t,r){var r=N.boundingRect(I.lastChild(r,{ignoreHidden:!0,excluding:[]})),n="vertical"===t?e.clientY:e.clientX,e="vertical"===t?e.clientX:e.clientY,a="vertical"===t?r.bottom:r.right,o="vertical"===t?r.left:r.top,r="vertical"===t?r.right:r.bottom;return"vertical"===t?r+10<e||e<=r&&a<n&&o<=e:a<n&&o<e||n<=a&&r+10<e}function z(e,t,r){var e=N.boundingRect(e),t=N.boundingRect(t),n="vertical"===r?e.left:e.top,a="vertical"===r?e.right:e.bottom,e="vertical"===r?e.width:e.height,o="vertical"===r?t.left:t.top,l="vertical"===r?t.right:t.bottom,r="vertical"===r?t.width:t.height;return n===o||a===l||n+e/2===o+r/2}function G(e,t){return I.index(e,function(e){return!("TEMPLATE"===e.nodeName.toUpperCase()||e===A.cloneEl||t&&!I.matches(e,t))})}function a(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}return class{constructor(e,t){this.sortable=e;var e=this.el=this._elm=e.elm(),r=(this.options=t,this);this._dndDroppable=new n(e,{started:function(e){e.acceptable=!0,e.activeClass="active",e.hoverClass="over"},overing:function(e){A.dragEl&&(r._onDragOver(e.originalEvent),a(e.originalEvent))},dropped:function(e){r._onDrop(e.originalEvent)}}),u.on(e,"drop",this),u.on(e,"selectstart",this)}_onMove(e,t,r,n,a,o,l,i){var s,d=e[A.expando],c=d.options.onMove,r=u.create("move",{to:t,from:e,dragged:r,draggedRect:n,related:a||t,relatedRect:o||N.boundingRect(t),willInsertAfter:i,originalEvent:l});return e.dispatchEvent(r),s=c?c.call(d,r,l):s}_onDragOver(t){var e,u,r=this._elm,n=t.target,a=this.options,o=a.group,l=A.active,i=A.activeGroup===o,s=a.sort,d=this.sortable,p=A.dragEl,c=A.active.elm(),g=A.putSortable,h=A.nextEl,f=A.oldIndex,v=A.oldDraggableIndex;if(!H){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),R=!0,n=I.closest(n,a.draggable,r,!0),p.contains(t.target)||n.animated)return D(!1);if(l&&!a.disabled&&(i?s||(k=!c.contains(p)):g===this||(this.lastPutMode=A.activeGroup.checkPull(this,l,p,t))&&o.checkPut(this,l,p,t))){var s=d._getDirection(t,n),b=N.boundingRect(p);if(k)return this._hideClone(),A.parentEl=c,h?c.insertBefore(p,h):c.appendChild(p),D(!0);o=X(r);if(!o||Y(t,s,r)&&!o.animated){if((n=o&&r===t.target?o:n)&&(C=N.boundingRect(n)),i?l._hideClone():l._showClone(this),!1!==this._onMove(c,r,p,b,n,C,t,!!n))return r.appendChild(p),A.parentEl=r,S(),D(!0)}else if(n&&n!==p&&n.parentNode===r){var m,k=0,h=n.sortableMouseAligned,o=p.parentNode!==r,x="vertical"===s?"top":"left",y=M(n,"top")||M(p,"top"),E=y?y.scrollTop:void 0;if(w!==n&&(e=null,m=N.boundingRect(n)[x],B=!1),e=z(p,n,s)&&h||o||y||a.invertSwap||"insert"===e||"swap"===e?("swap"!==e&&(O=a.invertSwap||o),k=function(e,t,r,n,a,o,l){var i=N.boundingRect(t),e="vertical"===r?e.clientY:e.clientX,s="vertical"===r?i.height:i.width,d="vertical"===r?i.top:i.left,i="vertical"===r?i.bottom:i.right,c=N.boundingRect(p),g=!1;if(!o)if(l&&u<s*n)if(B=!B&&(1===_?d+s*a/2<e:e<i-s*a/2)?!0:B)g=!0;else{"vertical"===r?c.top:c.left,"vertical"===r?c.bottom:c.right;if(1===_?e<d+u:i-u<e)return-1*_}else if(d+s*(1-n)/2<e&&e<i-s*(1-n)/2)return T(t);return(g=g||o)&&(e<d+s*a/2||i-s*a/2<e)?d+s/2<e?1:-1:0}(t,n,s,a.swapThreshold,null==a.invertedSwapThreshold?a.swapThreshold:a.invertedSwapThreshold,O,w===n),"swap"):(k=T(n),"insert"),0===k)return D(!1);var w=n,_=k,C=N.boundingRect(n),h=n.nextElementSibling,o=!1,o=1===k,s=this._onMove(c,r,p,b,n,C,t,o);if(!1!==s)return 1!==s&&-1!==s||(o=1===s),H=!0,setTimeout(F,30),i?l._hideClone():l._showClone(this),o&&!h?r.appendChild(p):n.parentNode.insertBefore(p,o?h:n),y&&N.scrollBy(y,0,E-y.scrollTop),A.parentEl=p.parentNode,void 0===m||O||(u=Math.abs(m-N.boundingRect(n)[x])),S(),D(!0)}if(r.contains(p))return D(!1)}return!1}function D(e){return e&&(i?l._hideClone():l._showClone(d),l&&(P.toggleClass(p,(g||l).options.ghostClass,!1),P.toggleClass(p,a.ghostClass,!0)),g!==d&&d!==A.active?g=A.putSortable=d:d===A.active&&(g=A.putSortable=null),b&&d._animate(b,p),n)&&C&&d._animate(C,n),(n===p&&!p.animated||n===r&&!n.animated)&&(w=null),a.dragoverBubble||t.rootEl||n===document||(A.over(t),e)||A.nearestEmptyInsertDetectEvent(t),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),!0}function S(){d._dispatchEvent(d,c,"change",n,r,c,f,G(p),v,G(p,a.draggable),t)}function T(e){return G(p)<G(e)?1:-1}}_onDrop(e){this.el;var t,r,n=this.options,a=this.sortable,o=A.active.elm(),l=A.dragEl,i=A.putSortable,s=A.parentEl,d=A.oldIndex,c=A.oldDraggableIndex,g=A.nextEl;B=O=!1,a.nativeDraggable&&u.off(document,"drop",this),this._offUpEvents(),e&&(R&&(e.cancelable&&e.preventDefault(),n.dropBubble||e.stopPropagation()),(o===s||i&&"clone"!==i.lastPutMode)&&p.remove(A.cloneEl),l)&&(A._disableDraggable(l),l.style["will-change"]="",P.toggleClass(l,(i||this).options.ghostClass,!1),P.toggleClass(l,this.options.chosenClass,!1),a._dispatchEvent(this,o,"unchoose",l,s,o,d,null,c,null,e),o!==s?(t=G(l),r=G(l,n.draggable),0<=t&&(a._dispatchEvent(null,s,"add",l,s,o,d,t,c,r,e),a._dispatchEvent(this,o,"remove",l,s,o,d,t,c,r,e),a._dispatchEvent(null,s,"sort",l,s,o,d,t,c,r,e),a._dispatchEvent(this,o,"sort",l,s,o,d,t,c,r,e)),i&&i.save()):l.nextSibling!==g&&(t=G(l),r=G(l,n.draggable),0<=t)&&(a._dispatchEvent(this,o,"update",l,s,o,d,t,c,r,e),a._dispatchEvent(this,o,"sort",l,s,o,d,t,c,r,e)),A.active)&&(null!=t&&-1!==t||(t=d,r=c),a._dispatchEvent(this,o,"end",l,s,o,d,t,c,r,e),a.save()),this._nulling()}_offUpEvents(){var e=this.el.ownerDocument;u.off(e,"mouseup",this._onDrop),u.off(document,"selectstart",this)}_nulling(){R=null}handleEvent(e){switch(e.type){case"drop":this._onDrop(e);break;case"dragenter":case"dragover":A.dragEl&&(this._onDragOver(e),a(e));break;case"selectstart":e.preventDefault()}}destroy(){this.sortable;his._dndDroppable.destroy()}}}),define("skylark-sortable/Sortable",["skylark-langx/skylark","skylark-langx/langx","skylark-langx-hoster/is-browser","skylark-langx-hoster/is-mobile","skylark-domx-query","skylark-domx-browser","skylark-domx-noder","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","skylark-domx-eventer","skylark-domx-transforms","skylark-domx-layouts/oriented","skylark-domx-plugins-base","skylark-devices-points/touch","./dnd","./draggable","./droppable"],function(e,a,t,r,n,o,l,i,s,d,h,c,g,u,p,f,v,b){"use strict";function m(e){function i(o,l){return function(e,t,r,n){var a=e.options.group.name&&t.options.group.name&&e.options.group.name===t.options.group.name;return!(null!=o||!l&&!a)||null!=o&&!1!==o&&(l&&"clone"===o?o:"function"==typeof o?i(o(e,t,r,n),l)(e,t,r,n):(a=(l?e:t).options.group.name,!0===o||"string"==typeof o&&o===a||o.join&&-1<o.indexOf(a)))}}var t={},r=e.group;t.name=(r=r&&"object"==typeof r?r:{name:r}).name,t.checkPull=i(r.pull,!0),t.checkPut=i(r.put),t.revertClone=r.revertClone,e.group=t}var k=window,x=k.document,y=k.parseInt,E=k.setTimeout,w=(k.Polymer,t&&t.ie,t&&t.edge,t&&t.firefox,t&&t.safari,r&&r.apple.device,"draggable"in x.createElement("div")&&!r.apple.device),_=(o.support.cssPointerEvents,u.Plugin.inherit({klassName:"Sortable",pluginName:"intg.sortable",options:{group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(e,t,r,n){return g(this.el,a.mixin({excluding:[n,r]},this.options))},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:y(window.devicePixelRatio,10)||1,fallbackOnBody:!0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackTolerance:0,fallbackOffset:{x:0,y:0},emptyInsertThreshold:5},_construct:function(e,t){for(var r in this.overrided(e,t),(t=((this.el=e)[f.expando]=this).options).draggable=t.draggable||(/[uo]l/i.test(e.nodeName)?">li":">*"),m(t),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&w,this.nativeDraggable&&(this.options.touchStartThreshold=1),f.sortables.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),this.draggable=new v(this,this.options),this.droppable=new b(this,this.options)},_getDirection:function(e,t){var r=f.dragEl;return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,r,null):this.options.direction},_animate:function(e,t){var r,n,a,o=this.options.animation;f.dragEl;o&&(r=s.boundingRect(t),(e=1===e.nodeType?s.boundingRect(e):e).left+e.width/2===r.left+r.width/2&&e.top+e.height/2===r.top+r.height/2||(n=(a=c.matrix(this.el))&&a.a,a=a&&a.d,d.css(t,"transition","none"),d.css(t,"transform","translate3d("+(e.left-r.left)/(n||1)+"px,"+(e.top-r.top)/(a||1)+"px,0)"),l.reflow(t),d.css(t,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),d.css(t,"transform","translate3d(0,0,0)")),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=E(function(){d.css(t,"transition",""),d.css(t,"transform",""),t.animated=!1},o))},_hideClone:function(){},_showClone:function(e){var t=f.active.el,r=f.nextEl;"clone"!==e.lastPutMode?this._hideClone():f.cloneEl.cloneHidden&&(t.contains(f.dragEl)&&!this.options.group.revertClone?t.insertBefore(f.cloneEl,f.dragEl):r?t.insertBefore(f.cloneEl,r):t.appendChild(f.cloneEl),this.options.group.revertClone&&this._animate(f.dragEl,f.cloneEl),d.show(f.cloneEl),f.cloneEl.cloneHidden=!1)},_dispatchEvent:function(e,t,r,n,a,o,l,i,s,d,c){var g=(e=e||t[f.expando]).options,u="on"+r.charAt(0).toUpperCase()+r.substr(1),p=f.putSortable,r=h.create(r,{to:a||t,from:o||t,item:n||t,clone:f.cloneEl,oldIndex:l,newIndex:i,oldDraggableIndex:s,newDraggableIndex:d,originalEvent:c,pullMode:p?p.lastPutMode:void 0});t&&t.dispatchEvent(r),g[u]&&g[u].call(e,r)},toArray:function(){for(var e,t=[],r=this.el.children,n=0,a=r.length,o=this.options;n<a;n++)e=r[n],i.closest(e,o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||l.generateId(e));return t},sort:function(e){var r={},n=this.el;this.toArray().forEach(function(e,t){t=n.children[t];i.closest(t,this.options.draggable,n,!1)&&(r[e]=t)},this),e.forEach(function(e){r[e]&&(n.removeChild(r[e]),n.appendChild(r[e]))})},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return i.closest(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var r=this.options;if(void 0===t)return r[e];r[e]=t,"group"===e&&m(r)},destroy:function(){var e=this.el;e[f.expando]=null,Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),f.sortables.splice(f.sortables.indexOf(this.el),1),this.el=e=null}}));return _.create=function(e,t){return new _(e,t)},_.version="1.9.0",e.attach("intg.Sortable",_)}),define("skylark-sortable/main",["skylark-langx","skylark-domx-eventer","skylark-domx-finder","skylark-domx-noder","skylark-domx-styler","./Sortable"],function(t,e,n,r,a,o){return o.utils={on:e.on,off:e.off,css:a.css,is:function(e,t){return!!n.closest(e,t,e,!1)},extend:t.mixin,throttle:t.debounce,closest:n.closest,toggleClass:a.toggleClass,clone:function(e){return r.clone(e,!0)},nextTick:function(e){return t.defer(e)},cancelNextTick:function(e){return e&&e.stop()},getChild:function(e,t,r){return r.excluding=[],r.closesting=r.draggable,n.childAt(e,t,r)}},o}),define("skylark-sortable",["skylark-sortable/main"],function(e){return e});
},this,define,require);
//# sourceMappingURL=sourcemaps/skylark-sortable.js.map
