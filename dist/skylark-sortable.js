/**
 * skylark-sortable - A version of sortable.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-sortable/
 * @license MIT
 */
!function(e,t){var o=t.define,require=t.require,r="function"==typeof o&&o.amd,n=!r&&"undefined"!=typeof exports;if(!r&&!o){var i={};o=t.define=function(e,t,o){"function"==typeof o?(i[e]={factory:o,deps:t.map(function(t){return function(e,t){if("."!==e[0])return e;var o=t.split("/"),r=e.split("/");o.pop();for(var n=0;n<r.length;n++)"."!=r[n]&&(".."==r[n]?o.pop():o.push(r[n]));return o.join("/")}(t,e)}),resolved:!1,exports:null},require(e)):i[e]={factory:null,resolved:!0,exports:o}},require=t.require=function(e){if(!i.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=i[e];if(!module.resolved){var o=[];module.deps.forEach(function(e){o.push(require(e))}),module.exports=module.factory.apply(t,o)||null,module.resolved=!0}return module.exports}}if(!o)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("skylark-langx-hoster/detects/browser",["../hoster"],function(e){return e.detects.browser=function(){return"undefined"!=typeof window&&void 0!==window.document?function(e){e=e.toLowerCase();var t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(iemobile)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],o=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(silk)/.exec(e)||/(android)/.exec(e)||/(win)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||/(playbook)/.exec(e)||/(bb)/.exec(e)||/(blackberry)/.exec(e)||[],r={},n={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",versionNumber:t[4]||t[2]||"0",platform:o[0]||""};n.browser&&(r[n.browser]=!0,r.version=n.version,r.versionNumber=parseInt(n.versionNumber,10));n.platform&&(r[n.platform]=!0);(r.android||r.bb||r.blackberry||r.ipad||r.iphone||r.ipod||r.kindle||r.playbook||r.silk||r["windows phone"])&&(r.mobile=!0);(r.cros||r.mac||r.linux||r.win)&&(r.desktop=!0);(r.chrome||r.opr||r.safari)&&(r.webkit=!0);if(r.rv||r.iemobile){n.browser="ie",r.ie=!0}if(r.edge){delete r.edge;n.browser="edge",r.edge=!0}if(r.safari&&r.blackberry){n.browser="blackberry",r.blackberry=!0}if(r.safari&&r.playbook){n.browser="playbook",r.playbook=!0}if(r.bb){var i="blackberry";n.browser=i,r[i]=!0}if(r.opr){n.browser="opera",r.opera=!0}if(r.safari&&r.android){n.browser="android",r.android=!0}if(r.safari&&r.kindle){n.browser="kindle",r.kindle=!0}if(r.safari&&r.silk){n.browser="silk",r.silk=!0}return r.name=n.browser,r.platform=n.platform,r}(navigator.userAgent):null}}),e("skylark-langx-hoster/isBrowser",["./hoster","./detects/browser"],function(e,t){return void 0==e.isBrowser&&(e.isBrowser=t()),e.isBrowser}),e("skylark-domx-layouts/oriented",["skylark-domx-geom","skylark-domx-styler","skylark-domx-finder","./Orientation"],function(e,t,o,r){return function(n,i){var l=t.css(n),a=e.contentRect(n).width,s=o.childAt(n,0,i),c=o.childAt(n,1,i),d=s&&t.css(s),u=c&&t.css(c),h=s&&e.marginSize(s).width,f=c&&e.marginSize(c).width;if("flex"===l.display)return"column"===l.flexDirection||"column-reverse"===l.flexDirection?r.Vertical:r.Horizontal;if("grid"===l.display)return l.gridTemplateColumns.split(" ").length<=1?r.Vertical:r.Horizontal;if(s&&"none"!==d.float){var g="left"===d.float?"left":"right";return!c||"both"!==u.clear&&u.clear!==g?r.Horizontal:r.Vertical}return s&&("block"===d.display||"flex"===d.display||"table"===d.display||"grid"===d.display||h>=a&&"none"===l[CSSFloatProperty]||c&&"none"===l[CSSFloatProperty]&&h+f>a)?r.Vertical:r.Horizontal}}),e("skylark-sortable/autoscroll",["skylark-langx/langx","skylark-langx-hoster/isBrowser","skylark-domx-geom","skylark-domx-styler","skylark-domx-scrolls/scrollingElement"],function(e,t,o,r,n){var i=[],l=!1,a=t&&t.ie,s=t&&t.edge,c=(t&&t.firefox,t&&t.safari);var d,u=function(e,t){if(!e||!e.getBoundingClientRect)return n();var o=e,i=!1;do{if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var l=r.css(o);if(o.clientWidth<o.scrollWidth&&("auto"==l.overflowX||"scroll"==l.overflowX)||o.clientHeight<o.scrollHeight&&("auto"==l.overflowY||"scroll"==l.overflowY)){if(!o||!o.getBoundingClientRect||o===document.body)return n();if(i||t)return o;i=!0}}}while(o=o.parentNode);return n()},h=g(function(e,t,a,s){if(t.scroll){var c=a?a[expando]:window,d=t.scrollSensitivity,h=t.scrollSpeed,g=e.clientX,p=e.clientY,v=n(),m=!1;scrollParentEl!==a&&(f(),scrollEl=t.scroll,scrollCustomFn=t.scrollFn,!0===scrollEl&&(scrollEl=u(a,!0),scrollParentEl=scrollEl));var b=0,y=scrollEl;do{var _,w,k,x,C,D,S,T,E,I=y,P=o.boundingRect(I),R=P.top,A=P.bottom,N=P.left,X=P.right,Y=P.width,O=P.height;if(_=I.scrollWidth,w=I.scrollHeight,k=r.css(I),T=I.scrollLeft,E=I.scrollTop,I===v?(D=Y<_&&("auto"===k.overflowX||"scroll"===k.overflowX||"visible"===k.overflowX),S=O<w&&("auto"===k.overflowY||"scroll"===k.overflowY||"visible"===k.overflowY)):(D=Y<_&&("auto"===k.overflowX||"scroll"===k.overflowX),S=O<w&&("auto"===k.overflowY||"scroll"===k.overflowY)),x=D&&(abs(X-g)<=d&&T+Y<_)-(abs(N-g)<=d&&!!T),C=S&&(abs(A-p)<=d&&E+O<w)-(abs(R-p)<=d&&!!E),!i[b])for(var B=0;B<=b;B++)i[B]||(i[B]={});i[b].vx==x&&i[b].vy==C&&i[b].el===I||(i[b].el=I,i[b].vx=x,i[b].vy=C,clearInterval(i[b].pid),!I||0==x&&0==C||(m=!0,i[b].pid=setInterval(function(){s&&0===this.layer&&(Sortable.active._emulateDragOver(!0),Sortable.active._onTouchMove(touchEvt,!0));var t=i[this.layer].vy?i[this.layer].vy*h:0,r=i[this.layer].vx?i[this.layer].vx*h:0;"function"==typeof scrollCustomFn&&"continue"!==scrollCustomFn.call(c,r,t,e,touchEvt,i[this.layer].el)||o.scrollBy(i[this.layer].el,r,t)}.bind({layer:b}),24))),b++}while(t.bubbleScroll&&y!==v&&(y=u(y,!1)));l=m}},30),f=function(){i.forEach(function(e){clearInterval(e.pid)}),i=[]};function g(t,o){return e.debounce(t,o)}return{autoScrolls:i,_isScrolledPast:function(e,t){var r=u(e,!0),i=o.boundingRect(e)[t];for(;r;){var l=o.boundingRect(r)[t];if(!("top"===t||"left"===t?i>=l:i<=l))return r;if(r===n())break;r=u(r,!1)}return!1},_getRelativeScrollOffset:function(e){var t=0,o=0,r=n();if(e)do{var i=transforms.matrix(e),l=i.a,a=i.d;t+=e.scrollLeft*l,o+=e.scrollTop*a}while(e!==r&&(e=e.parentNode));return[t,o]},_autoScroll:h,_clearAutoScrolls:f,_handleAutoScroll:function(e,t,o){var r=e.clientX,i=e.clientY,g=document.elementFromPoint(r,i);if(o||s||a||c){d=h(e,t,g,o);var p=u(g,!0);!l||pointerElemChangedInterval&&r===lastPointerElemX&&i===lastPointerElemY||(pointerElemChangedInterval&&clearInterval(pointerElemChangedInterval),pointerElemChangedInterval=setInterval(function(){if(dragEl){var n=u(document.elementFromPoint(r,i),!0);n!==p&&(p=n,f(),d=h(e,t,p,o))}},10),lastPointerElemX=r,lastPointerElemY=i)}else{if(!t.bubbleScroll||u(g,!0)===n())return void f();d=h(e,t,u(g,!1),!1)}},_throttle:g,_cancelThrottle:function(){d&&d.stop&&(d.stop(),d=void 0)}}}),e("skylark-sortable/Sortable",["skylark-langx/skylark","skylark-langx/langx","skylark-langx-hoster/isBrowser","skylark-langx-hoster/isMobile","skylark-domx-query","skylark-domx-browser","skylark-domx-noder","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","skylark-domx-eventer","skylark-domx-transforms","skylark-domx-scrolls/scrollingElement","skylark-domx-layouts/oriented","skylark-devices-points/touch","./autoscroll"],function(e,t,o,r,n,i,l,a,s,c,d,u,h,f,g,p){function v(e,t){n("#console").append("<div>"+e+":"+t+"</div>")}var m,b,y,_,w,k,x,C,D,S,T,E,I,P,R,A,N,X,Y,O,B,M,F,H=!1,G=!1,z=[],L=!1,W=!1,j=[],q="Sortable"+(new Date).getTime(),U=window,V=U.document,Z=U.parseInt,J=U.setTimeout,K=(U.Polymer,o&&o.ie),Q=o&&o.edge,$=o&&o.firefox,ee=o&&o.safari,te=(r&&r.apple.device,r.apple.device),oe="draggable"in V.createElement("div")&&!r.apple.device,re=i.support.cssPointerEvents;_silent=!1,_alignedSilent=!1,abs=Math.abs,min=Math.min,max=Math.max,savedInputChecked=[],_detectDirection=function(e,t){return t.excluding=[y,m],f(e,t)},_detectNearestEmptySortable=function(e,t){for(var o=0;o<z.length;o++)if(!le(z[o])){var r=s.boundingRect(z[o]),n=z[o][q].options.emptyInsertThreshold,i=e>=r.left-n&&e<=r.right+n,l=t>=r.top-n&&t<=r.bottom+n;if(n&&i&&l)return z[o]}},_isClientInRowColumn=function(e,t,o,r,n){var i=s.boundingRect(o),l="vertical"===r?i.left:i.top,a="vertical"===r?i.right:i.bottom,c="vertical"===r?e:t;return l<c&&c<a},_isElInRowColumn=function(e,t,o){var r=e===m&&F||s.boundingRect(e),n=t===m&&F||s.boundingRect(t),i="vertical"===o?r.left:r.top,l="vertical"===o?r.right:r.bottom,a="vertical"===o?r.width:r.height,c="vertical"===o?n.left:n.top,d="vertical"===o?n.right:n.bottom,u="vertical"===o?n.width:n.height;return i===c||l===d||i+a/2===c+u/2},_prepareGroup=function(e){function t(e,o){return function(r,n,i,l){var a=r.options.group.name&&n.options.group.name&&r.options.group.name===n.options.group.name;if(null==e&&(o||a))return!0;if(null==e||!1===e)return!1;if(o&&"clone"===e)return e;if("function"==typeof e)return t(e(r,n,i,l),o)(r,n,i,l);var s=(o?r:n).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var o={},r=e.group;r&&"object"==typeof r||(r={name:r}),o.name=r.name,o.checkPull=t(r.pull,!0),o.checkPut=t(r.put),o.revertClone=r.revertClone,e.group=o},_checkAlignment=function(e){m&&m.parentNode&&m.parentNode[q]&&m.parentNode[q]._computeIsAligned(e)},_hideGhostForTarget=function(){!re&&y&&c.css(y,"display","none")},_unhideGhostForTarget=function(){!re&&y&&c.css(y,"display","")},V.addEventListener("click",function(e){if(G)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),G=!1,!1},!0);var ne=function(e){if(m){e=e.touches?e.touches[0]:e;var t=_detectNearestEmptySortable(e.clientX,e.clientY);if(t){var o={};for(var r in e)o[r]=e[r];o.target=o.rootEl=t,o.preventDefault=void 0,o.stopPropagation=void 0,t[q]._onDragOver(o)}}};function ie(e,t,o){if(e){var r=e.getElementsByTagName(t),n=0,i=r.length;if(o)for(;n<i;n++)o(r[n],n);return r}return[]}function le(e){return a.lastChild(e,{ignoreHidden:!0,excluding:[y]})}function ae(e){var t=ce(m),o=ce(e);return t<o?1:-1}function se(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,o=t.length,r=0;o--;)r+=t.charCodeAt(o);return r.toString(36)}function ce(e,t){return a.index(e,function(e){return!("TEMPLATE"===e.nodeName.toUpperCase()||e===_||t&&!a.matches(e,t))})}function de(e){return t.defer(e)}function ue(e){return e&&e.stop()}function he(e,t,o,r){if(e.getBoundingClientRect||e===U){var{top:n,left:i,bottom:l,right:a,width:c,height:d}=s.boundingRect(e);if(t&&e!==U){var h=u.matrix(o||e),f=h&&h.a,g=h&&h.d;h&&(l=(n/=g)+(d/=g),a=(i/=f)+(c/=f))}return{top:n,left:i,bottom:l,right:a,width:c,height:d}}}function fe(e,o){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, not "+{}.toString.call(e);this.el=e,this.options=o=t.mixin({},o),e[q]=this;var r={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:Z(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==fe.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var n in r)!(n in o)&&(o[n]=r[n]);for(var i in _prepareGroup(o),this)"_"===i.charAt(0)&&"function"==typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!o.forceFallback&&oe,this.nativeDraggable&&(this.options.touchStartThreshold=1),g.mousy(e),d.on(e,"mousedown",this._onTapStart),this.nativeDraggable&&(d.on(e,"dragover",this),d.on(e,"dragenter",this)),z.push(this.el),o.store&&o.store.get&&this.sort(o.store.get(this)||[])}function ge(e,t,o,r,n,i,l,a,s,c,u){var h,f=(e=e||t[q]).options,g="on"+o.charAt(0).toUpperCase()+o.substr(1);h=d.create(o,{to:n||t,from:i||t,item:r||t,clone:_,oldIndex:l,newIndex:a,oldDraggableIndex:s,newDraggableIndex:c,originalEvent:u,pullMode:I?I.lastPutMode:void 0}),t&&t.dispatchEvent(h),f[g]&&f[g].call(e,h)}function pe(e,t,o,r,n,i,l,a){var c,u,h=e[q],f=h.options.onMove;return c=d.create("move",{to:t,from:e,dragged:o,draggedRect:r,related:n||t,relatedRect:i||s.boundingRect(t),willInsertAfter:a,originalEvent:l}),e.dispatchEvent(c),f&&(u=f.call(h,c,l)),u}function ve(e){e.draggable=!1}function me(){_silent=!1}return d.on(V,"touchmove",function(e){(fe.active||H)&&e.cancelable&&e.preventDefault()}),fe.prototype={constructor:fe,_computeIsAligned:function(e){var t;if(y&&!re?(_hideGhostForTarget(),t=V.elementFromPoint(e.clientX,e.clientY),_unhideGhostForTarget()):t=e.target,t=a.closest(t,this.options.draggable,this.el,!1),!_alignedSilent&&m&&m.parentNode===this.el){for(var o=this.el.children,r=0;r<o.length;r++)a.closest(o[r],this.options.draggable,this.el,!1)&&o[r]!==t&&(o[r].sortableMouseAligned=_isClientInRowColumn(e.clientX,e.clientY,o[r],this._getDirection(e,null),this.options));a.closest(t,this.options.draggable,this.el,!0)||(X=null),_alignedSilent=!0,J(function(){_alignedSilent=!1},30)}},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,m):this.options.direction},_onTapStart:function(e){var t,o,r=this,n=this.el,i=this.options,l=i.preventOnFilter,s=e.type,c=e.touches&&e.touches[0],d=(c||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||d,h=i.filter;if(function(e){savedInputChecked.length=0;var t=e.getElementsByTagName("input"),o=t.length;for(;o--;){var r=t[o];r.checked&&savedInputChecked.push(r)}}(n),!m&&!(/mousedown|pointerdown/.test(s)&&0!==e.button||i.disabled||u.isContentEditable||(d=a.closest(d,i.draggable,n,!1),x===d))){if(v("_onTapStart",d.tagName+","+d.className),t=ce(d),o=ce(d,i.draggable),"function"==typeof h){if(h.call(this,e,d,this))return ge(r,u,"filter",d,n,n,t,void 0,o),void(l&&e.cancelable&&e.preventDefault())}else if(h&&(h=h.split(",").some(function(e){if(e=a.closest(u,e.trim(),n,!1))return ge(r,e,"filter",d,n,n,t,void 0,o),!0})))return void(l&&e.cancelable&&e.preventDefault());i.handle&&!a.closest(u,i.handle,n,!1)||this._prepareDragStart(e,c,d,t,o)}},_handleAutoScroll:function(e,t){if(m&&this.options.scroll)return p._handleAutoScroll(e,this.options,t)},_prepareDragStart:function(e,t,o,r,n){var i,l=this,a=l.el,s=l.options,u=a.ownerDocument;v("_prepareDragStart","start"),o&&!m&&o.parentNode===a&&(w=a,b=(m=o).parentNode,k=m.nextSibling,x=o,E=s.group,C=r,S=n,R={target:m,clientX:(t||e).clientX,clientY:(t||e).clientY},this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,m.style["will-change"]="all",m.style.transition="",m.style.transform="",i=function(){l._disableDelayedDragEvents(),!$&&l.nativeDraggable&&(m.draggable=!0),l._triggerDragStart(e,t),ge(l,w,"choose",m,w,w,C,void 0,S),c.toggleClass(m,s.chosenClass,!0)},s.ignore.split(",").forEach(function(e){ie(m,e.trim(),ve)}),d.on(u,"dragover",ne),d.on(u,"mousemove",ne),d.on(u,"mouseup",l._onDrop),$&&this.nativeDraggable&&(this.options.touchStartThreshold=4,m.draggable=!0),!s.delay||s.delayOnTouchOnly&&!t||this.nativeDraggable&&(Q||K)?i():(d.on(u,"mouseup",l._disableDelayedDrag),d.on(u,"mousemove",l._delayedDragTouchMoveHandler),l._dragStartTimer=J(i,s.delay)))},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;max(abs(t.clientX-this._lastX),abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){m&&ve(m),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;d.off(e,"mouseup",this._disableDelayedDrag),d.off(e,"mousemove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){v("_triggerDragStart","start"),v("_triggerDragStart","nativeDraggable is "+this.nativeDraggable),this.nativeDraggable?(d.on(m,"dragend",this),d.on(w,"dragstart",this._onDragStart)):d.on(V,"mousemove",this._onTouchMove);try{V.selection?de(function(){V.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(H=!1,w&&m){this.nativeDraggable&&(d.on(V,"dragover",this._handleAutoScroll),d.on(V,"dragover",_checkAlignment));var o=this.options;!e&&c.toggleClass(m,o.dragClass,!1),c.toggleClass(m,o.ghostClass,!0),c.css(m,"transform",""),fe.active=this,e&&this._appendGhost(),ge(this,w,"start",m,w,w,C,void 0,S,void 0,t)}else this._nulling()},_emulateDragOver:function(e){if(A){if(this._lastX===A.clientX&&this._lastY===A.clientY&&!e)return;this._lastX=A.clientX,this._lastY=A.clientY,_hideGhostForTarget();for(var t=V.elementFromPoint(A.clientX,A.clientY),o=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(A.clientX,A.clientY))!==o;)o=t;if(o)do{if(o[q])if(o[q]._onDragOver({clientX:A.clientX,clientY:A.clientY,target:t,rootEl:o})&&!this.options.dragoverBubble)break;t=o}while(o=o.parentNode);m.parentNode[q]._computeIsAligned(A),_unhideGhostForTarget()}},_onTouchMove:function(e,t){if(v("_onTouchMove","start"),R){var o=this.options,r=o.fallbackTolerance,n=o.fallbackOffset,i=e.touches?e.touches[0]:e,l=y&&u.matrix(y),a=y&&l&&l.a,s=y&&l&&l.d,d=te&&M&&_getRelativeScrollOffset(M),h=(i.clientX-R.clientX+n.x)/(a||1)+(d?d[0]-j[0]:0)/(a||1),f=(i.clientY-R.clientY+n.y)/(s||1)+(d?d[1]-j[1]:0)/(s||1),g=e.touches?"translate3d("+h+"px,"+f+"px,0)":"translate("+h+"px,"+f+"px)";if(!fe.active&&!H){if(r&&min(abs(i.clientX-this._lastX),abs(i.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}!t&&this._handleAutoScroll(i,!0),N=!0,A=i,y&&(c.css(y,"webkitTransform",g),c.css(y,"mozTransform",g),c.css(y,"msTransform",g),c.css(y,"transform",g)),e.preventDefault()}},_appendGhost:function(){if(!y){var e=this.options.fallbackOnBody?V.body:w,t=he(m,!0,e,!te),o=(c.css(m),this.options);if(te){for(M=e;"static"===c.css(M,"position")&&"none"===c.css(M,"transform")&&M!==V;)M=M.parentNode;if(M!==V){var r=he(M,!0);t.top-=r.top,t.left-=r.left}M!==V.body&&M!==V.documentElement?(M===V&&(M=h()),t.top+=M.scrollTop,t.left+=M.scrollLeft):M=h(),j=_getRelativeScrollOffset(M)}y=m.cloneNode(!0),c.toggleClass(y,o.ghostClass,!1),c.toggleClass(y,o.fallbackClass,!0),c.toggleClass(y,o.dragClass,!0),c.css(y,"box-sizing","border-box"),c.css(y,"margin",0),c.css(y,"top",t.top),c.css(y,"left",t.left),c.css(y,"width",t.width),c.css(y,"height",t.height),c.css(y,"opacity","0.8"),c.css(y,"position",te?"absolute":"fixed"),c.css(y,"zIndex","100000"),c.css(y,"pointerEvents","none"),e.appendChild(y)}},_animate:function(e,t){var o=this.options.animation;if(o){var r=s.boundingRect(t);if(t===m&&(F=r),1===e.nodeType&&(e=s.boundingRect(e)),e.left+e.width/2!==r.left+r.width/2||e.top+e.height/2!==r.top+r.height/2){var n=u.matrix(this.el),i=n&&n.a,l=n&&n.d;c.css(t,"transition","none"),c.css(t,"transform","translate3d("+(e.left-r.left)/(i||1)+"px,"+(e.top-r.top)/(l||1)+"px,0)"),this._repaint(t),c.css(t,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),c.css(t,"transform","translate3d(0,0,0)")}"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=J(function(){c.css(t,"transition",""),c.css(t,"transform",""),t.animated=!1},o)}},_repaint:function(e){return e.offsetWidth},_offMoveEvents:function(){d.off(V,"dragover",ne),d.off(V,"mousemove",ne)},_offUpEvents:function(){var e=this.el.ownerDocument;d.off(e,"mouseup",this._onDrop),d.off(V,"selectstart",this)},_onDragStart:function(e,t){var o=this,r=e.dataTransfer,n=o.options;(_=l.clone(m,!0)).draggable=!1,_.style["will-change"]="",this._hideClone(),c.toggleClass(_,o.options.chosenClass,!1),o._cloneId=de(function(){o.options.removeCloneOnHide||w.insertBefore(_,m),ge(o,w,"clone",m)}),!t&&c.toggleClass(m,n.dragClass,!0),t?(G=!0,o._loopId=setInterval(o._emulateDragOver,50)):(d.off(V,"mouseup",o._onDrop),r&&(r.effectAllowed="move",n.setData&&n.setData.call(o,r,m)),d.on(V,"drop",o),c.css(m,"transform","translateZ(0)")),H=!0,o._dragStartId=de(o._dragStarted.bind(o,t,e)),d.on(V,"selectstart",o),ee&&c.css(V.body,"user-select","none")},_onDragOver:function(e){var t,o,r,n=this.el,i=e.target,l=this.options,d=l.group,u=fe.active,h=E===d,f=l.sort,g=this;if(!_silent){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),N=!0,i=a.closest(i,l.draggable,n,!0),m.contains(e.target)||i.animated)return j(!1);if(i!==m&&(G=!1),u&&!l.disabled&&(h?f||(r=!w.contains(m)):I===this||(this.lastPutMode=E.checkPull(this,u,m,e))&&d.checkPut(this,u,m,e))){var v=this._getDirection(e,i);if(t=s.boundingRect(m),r)return this._hideClone(),b=w,k?w.insertBefore(m,k):w.appendChild(m),j(!0);var y=le(n);if(!y||function(e,t,o){var r=s.boundingRect(le(o)),n="vertical"===t?e.clientY:e.clientX,i="vertical"===t?e.clientX:e.clientY,l="vertical"===t?r.bottom:r.right,a="vertical"===t?r.left:r.top,c="vertical"===t?r.right:r.bottom;return"vertical"===t?i>c+10||i<=c&&n>l&&i>=a:n>l&&i>a||n<=l&&i>c+10}(e,v,n)&&!y.animated){if(y&&n===e.target&&(i=y),i&&(o=s.boundingRect(i)),h?u._hideClone():u._showClone(this),!1!==pe(w,n,m,t,i,o,e,!!i))return n.appendChild(m),b=n,F=null,U(),j(!0)}else if(i&&i!==m&&i.parentNode===n){var _,x=0,D=i.sortableMouseAligned,T=m.parentNode!==n,P="vertical"===v?"top":"left",R=p._isScrolledPast(i,"top")||p._isScrolledPast(m,"top"),A=R?R.scrollTop:void 0;if(X!==i&&(O=null,_=s.boundingRect(i)[P],L=!1),_isElInRowColumn(m,i,v)&&D||T||R||l.invertSwap||"insert"===O||"swap"===O?("swap"!==O&&(W=l.invertSwap||T),x=function(e,t,o,r,n,i,l){var a=s.boundingRect(t),c="vertical"===o?e.clientY:e.clientX,d="vertical"===o?a.height:a.width,u="vertical"===o?a.top:a.left,h="vertical"===o?a.bottom:a.right,f=s.boundingRect(m),g=!1;if(!i)if(l&&B<d*r)if(!L&&(1===Y?c>u+d*n/2:c<h-d*n/2)&&(L=!0),L)g=!0;else{"vertical"===o?f.top:f.left,"vertical"===o?f.bottom:f.right;if(1===Y?c<u+B:c>h-B)return-1*Y}else if(c>u+d*(1-r)/2&&c<h-d*(1-r)/2)return ae(t);if((g=g||i)&&(c<u+d*n/2||c>h-d*n/2))return c>u+d/2?1:-1;return 0}(e,i,v,l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,W,X===i),O="swap"):(x=ae(i),O="insert"),0===x)return j(!1);F=null,X=i,Y=x,o=s.boundingRect(i);var M=i.nextElementSibling,H=!1,z=pe(w,n,m,t,i,o,e,H=1===x);if(!1!==z)return 1!==z&&-1!==z||(H=1===z),_silent=!0,J(me,30),h?u._hideClone():u._showClone(this),H&&!M?n.appendChild(m):i.parentNode.insertBefore(m,H?M:i),R&&s.scrollBy(R,0,A-R.scrollTop),b=m.parentNode,void 0===_||W||(B=abs(_-s.boundingRect(i)[P])),U(),j(!0)}if(n.contains(m))return j(!1)}return!1}function j(r){return r&&(h?u._hideClone():u._showClone(g),u&&(c.toggleClass(m,I?I.options.ghostClass:u.options.ghostClass,!1),c.toggleClass(m,l.ghostClass,!0)),I!==g&&g!==fe.active?I=g:g===fe.active&&(I=null),t&&g._animate(t,m),i&&o&&g._animate(o,i)),(i===m&&!m.animated||i===n&&!i.animated)&&(X=null),l.dragoverBubble||e.rootEl||i===V||(g._handleAutoScroll(e),m.parentNode[q]._computeIsAligned(e),!r&&ne(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),!0}function U(){ge(g,w,"change",i,n,w,C,ce(m),S,ce(m,l.draggable),e)}},_onDrop:function(e){var t=this.el,o=this.options;H=!1,scrolling=!1,W=!1,L=!1,clearInterval(this._loopId),clearInterval(P),p._clearAutoScrolls(),p._cancelThrottle(),clearTimeout(this._dragStartTimer),ue(this._cloneId),ue(this._dragStartId),d.off(V,"mousemove",this._onTouchMove),this.nativeDraggable&&(d.off(V,"drop",this),d.off(t,"dragstart",this._onDragStart),d.off(V,"dragover",this._handleAutoScroll),d.off(V,"dragover",_checkAlignment)),ee&&c.css(V.body,"user-select",""),this._offMoveEvents(),this._offUpEvents(),e&&(N&&(e.cancelable&&e.preventDefault(),!o.dropBubble&&e.stopPropagation()),y&&y.parentNode&&y.parentNode.removeChild(y),(w===b||I&&"clone"!==I.lastPutMode)&&_&&_.parentNode&&_.parentNode.removeChild(_),m&&(this.nativeDraggable&&d.off(m,"dragend",this),ve(m),m.style["will-change"]="",c.toggleClass(m,I?I.options.ghostClass:this.options.ghostClass,!1),c.toggleClass(m,this.options.chosenClass,!1),ge(this,w,"unchoose",m,b,w,C,null,S,null,e),w!==b?(D=ce(m),T=ce(m,o.draggable),D>=0&&(ge(null,b,"add",m,b,w,C,D,S,T,e),ge(this,w,"remove",m,b,w,C,D,S,T,e),ge(null,b,"sort",m,b,w,C,D,S,T,e),ge(this,w,"sort",m,b,w,C,D,S,T,e)),I&&I.save()):m.nextSibling!==k&&(D=ce(m),T=ce(m,o.draggable),D>=0&&(ge(this,w,"update",m,b,w,C,D,S,T,e),ge(this,w,"sort",m,b,w,C,D,S,T,e))),fe.active&&(null!=D&&-1!==D||(D=C,T=S),ge(this,w,"end",m,b,w,C,D,S,T,e),this.save()))),this._nulling()},_nulling:function(){w=m=b=y=k=_=x=p.autoScrolls.length=P=R=A=N=D=C=X=Y=F=I=E=fe.active=null,savedInputChecked.forEach(function(e){e.checked=!0}),savedInputChecked.length=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":m&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],o=this.el.children,r=0,n=o.length,i=this.options;r<n;r++)e=o[r],a.closest(e,i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||se(e));return t},sort:function(e){var t={},o=this.el;this.toArray().forEach(function(e,r){var n=o.children[r];a.closest(n,this.options.draggable,o,!1)&&(t[e]=n)},this),e.forEach(function(e){t[e]&&(o.removeChild(t[e]),o.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return a.closest(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var o=this.options;if(void 0===t)return o[e];o[e]=t,"group"===e&&_prepareGroup(o)},destroy:function(){var e=this.el;e[q]=null,d.off(e,"mousedown",this._onTapStart),this.nativeDraggable&&(d.off(e,"dragover",this),d.off(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),z.splice(z.indexOf(this.el),1),this.el=e=null},_hideClone:function(){_.cloneHidden||(c.css(_,"display","none"),_.cloneHidden=!0,_.parentNode&&this.options.removeCloneOnHide&&_.parentNode.removeChild(_))},_showClone:function(e){"clone"===e.lastPutMode?_.cloneHidden&&(w.contains(m)&&!this.options.group.revertClone?w.insertBefore(_,m):k?w.insertBefore(_,k):w.appendChild(_),this.options.group.revertClone&&this._animate(m,_),c.css(_,"display",""),_.cloneHidden=!1):this._hideClone()}},fe.utils={on:d.on,off:d.off,css:c.css,find:ie,is:function(e,t){return!!a.closest(e,t,e,!1)},extend:t.mixin,throttle:p._throttle,closest:a.closest,toggleClass:c.toggleClass,clone:function(e){return l.clone(e,!0)},index:ce,nextTick:de,cancelNextTick:ue,detectDirection:_detectDirection,getChild:function(e,t,o){return o.excluding=[],o.closesting=o.draggable,a.childAt(e,t,o)}},fe.create=function(e,t){return new fe(e,t)},fe.version="1.9.0",e.attach("intg.Sortable",fe)}),e("skylark-sortable/main",["./Sortable"],function(e){return e}),e("skylark-sortable",["skylark-sortable/main"],function(e){return e})}(o),!r){var l=require("skylark-langx-ns");n?module.exports=l:t.skylarkjs=l}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-sortable.js.map
