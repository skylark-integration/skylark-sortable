/**
 * skylark-sortable - A version of sortable.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-sortable/
 * @license MIT
 */
!function(e,t){var o=t.define,require=t.require,r="function"==typeof o&&o.amd,n=!r&&"undefined"!=typeof exports;if(!r&&!o){var l={};o=t.define=function(e,t,o){"function"==typeof o?(l[e]={factory:o,deps:t.map(function(t){return function(e,t){if("."!==e[0])return e;var o=t.split("/"),r=e.split("/");o.pop();for(var n=0;n<r.length;n++)"."!=r[n]&&(".."==r[n]?o.pop():o.push(r[n]));return o.join("/")}(t,e)}),resolved:!1,exports:null},require(e)):l[e]={factory:null,resolved:!0,exports:o}},require=t.require=function(e){if(!l.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=l[e];if(!module.resolved){var o=[];module.deps.forEach(function(e){o.push(require(e))}),module.exports=module.factory.apply(t,o)||null,module.resolved=!0}return module.exports}}if(!o)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("skylark-langx-hoster/detects/browser",["../hoster"],function(e){return e.detects.browser=function(){return"undefined"!=typeof window&&void 0!==window.document?function(e){e=e.toLowerCase();var t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(iemobile)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],o=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(silk)/.exec(e)||/(android)/.exec(e)||/(win)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||/(playbook)/.exec(e)||/(bb)/.exec(e)||/(blackberry)/.exec(e)||[],r={},n={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",versionNumber:t[4]||t[2]||"0",platform:o[0]||""};n.browser&&(r[n.browser]=!0,r.version=n.version,r.versionNumber=parseInt(n.versionNumber,10));n.platform&&(r[n.platform]=!0);(r.android||r.bb||r.blackberry||r.ipad||r.iphone||r.ipod||r.kindle||r.playbook||r.silk||r["windows phone"])&&(r.mobile=!0);(r.cros||r.mac||r.linux||r.win)&&(r.desktop=!0);(r.chrome||r.opr||r.safari)&&(r.webkit=!0);if(r.rv||r.iemobile){n.browser="ie",r.ie=!0}if(r.edge){delete r.edge;n.browser="edge",r.edge=!0}if(r.safari&&r.blackberry){n.browser="blackberry",r.blackberry=!0}if(r.safari&&r.playbook){n.browser="playbook",r.playbook=!0}if(r.bb){var l="blackberry";n.browser=l,r[l]=!0}if(r.opr){n.browser="opera",r.opera=!0}if(r.safari&&r.android){n.browser="android",r.android=!0}if(r.safari&&r.kindle){n.browser="kindle",r.kindle=!0}if(r.safari&&r.silk){n.browser="silk",r.silk=!0}return r.name=n.browser,r.platform=n.platform,r}(navigator.userAgent):null}}),e("skylark-langx-hoster/isBrowser",["./hoster","./detects/browser"],function(e,t){return void 0==e.isBrowser&&(e.isBrowser=t()),e.isBrowser}),e("skylark-domx-layouts/oriented",["skylark-domx-geom","skylark-domx-styler","skylark-domx-finder","./Orientation"],function(e,t,o,r){return function(n,l){var i=t.css(n),a=e.contentRect(n).width,s=o.childAt(n,0,l),c=o.childAt(n,1,l),d=s&&t.css(s),u=c&&t.css(c),h=s&&e.marginSize(s).width,f=c&&e.marginSize(c).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?r.Vertical:r.Horizontal;if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?r.Vertical:r.Horizontal;if(s&&"none"!==d.float){var g="left"===d.float?"left":"right";return!c||"both"!==u.clear&&u.clear!==g?r.Horizontal:r.Vertical}return s&&("block"===d.display||"flex"===d.display||"table"===d.display||"grid"===d.display||h>=a&&"none"===i.float||c&&"none"===i.float&&h+f>a)?r.Vertical:r.Horizontal}}),e("skylark-sortable/dnd",["skylark-langx/skylark","skylark-langx/langx","skylark-langx-hoster/isBrowser","skylark-langx-hoster/isMobile","skylark-domx-query","skylark-domx-browser","skylark-domx-noder","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","skylark-domx-eventer","skylark-domx-transforms","skylark-domx-scrolls/scrollingElement","skylark-domx-layouts/oriented","skylark-devices-points/touch"],function(e,t,o,r,n,l,i,a,s,c,d,u,h,f,g){var p="Sortable"+(new Date).getTime(),v={expando:p,active:null,putSortable:null,sortables:[],dragEl:null,cloneEl:null,touchEvt:null,prepare:function(e){var t=e.el,o=t.ownerDocument;d.on(o,"dragover",this.nearestEmptyInsertDetectEvent),d.on(o,"mousemove",this.nearestEmptyInsertDetectEvent)},start:function(e,t){},over:function(){},end:function(e){},nearestEmptyInsertDetectEvent:function(e){if(v.dragEl){e=e.touches?e.touches[0]:e;var t=v._detectNearestEmptySortable(e.clientX,e.clientY);if(t){var o={};for(var r in e)o[r]=e[r];o.target=o.rootEl=t,o.preventDefault=void 0,o.stopPropagation=void 0,t[p]._onDragOver(o)}}},_detectNearestEmptySortable:function(e,t){for(var o=this.sortables,r=0;r<o.length;r++)if(!a.lastChild(o[r],{ignoreHidden:!0,excluding:[this.ghostEl]})){var n=s.boundingRect(o[r]),l=o[r][p].options.emptyInsertThreshold,i=e>=n.left-l&&e<=n.right+l,c=t>=n.top-l&&t<=n.bottom+l;if(l&&i&&c)return o[r]}},_checkAlignment:function(e){this.dragEl&&this.dragEl.parentNode&&this.dragEl.parentNode[p]&&this.dragEl.parentNode[p]._computeIsAligned(e)},_emulateDragOver:function(e){var t=this.dragEl,o=this.touchEvt;if(o){if(this._lastX===o.clientX&&this._lastY===o.clientY&&!e)return;this._lastX=o.clientX,this._lastY=o.clientY;for(var r=document.elementFromPoint(o.clientX,o.clientY),n=r;r&&r.shadowRoot&&(r=r.shadowRoot.elementFromPoint(o.clientX,o.clientY))!==n;)n=r;if(n)do{if(n[p])if(n[p]._onDragOver({clientX:o.clientX,clientY:o.clientY,target:r,rootEl:n}))break;r=n}while(n=n.parentNode);t.parentNode[p]._computeIsAligned(o)}},_onMove:function(e,t,o,r,n,l,i,a){var c,u,h=e[p],f=h.options.onMove;return c=d.create("move",{to:t,from:e,dragged:o,draggedRect:r,related:n||t,relatedRect:l||s.boundingRect(t),willInsertAfter:a,originalEvent:i}),e.dispatchEvent(c),f&&(u=f.call(h,c,i)),u},_dispatchEvent:function(e,t,o,r,n,l,i,a,s,c,u){var h,f=(e=e||t[p]).options,g="on"+o.charAt(0).toUpperCase()+o.substr(1),v=this.putSortable;h=d.create(o,{to:n||t,from:l||t,item:r||t,clone:this.cloneEl,oldIndex:i,newIndex:a,oldDraggableIndex:s,newDraggableIndex:c,originalEvent:u,pullMode:v?v.lastPutMode:void 0}),t&&t.dispatchEvent(h),f[g]&&f[g].call(e,h)}};return v}),e("skylark-sortable/autoscroll",["skylark-langx/langx","skylark-langx-hoster/isBrowser","skylark-domx-geom","skylark-domx-styler","skylark-domx-scrolls/scrollingElement","./dnd"],function(e,t,o,r,n,l){var i=[],a=!1,s=null,c=t&&t.ie,d=t&&t.edge,u=(t&&t.firefox,t&&t.safari);var h,f=function(e,t){if(!e||!e.getBoundingClientRect)return n();var o=e,l=!1;do{if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var i=r.css(o);if(o.clientWidth<o.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||o.clientHeight<o.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!o||!o.getBoundingClientRect||o===document.body)return n();if(l||t)return o;l=!0}}}while(o=o.parentNode);return n()},g=v(function(e,t,c,d){if(t.scroll){var u=c?c[l.expando]:window,h=t.scrollSensitivity,g=t.scrollSpeed,v=e.clientX,m=e.clientY,b=n(),k=!1;s!==c&&(p(),scrollEl=t.scroll,scrollCustomFn=t.scrollFn,!0===scrollEl&&(scrollEl=f(c,!0),s=scrollEl));var y=0,_=scrollEl;do{var x,E,w,C,D,S,T,I,P,R=_,A=o.boundingRect(R),N=A.top,X=A.bottom,Y=A.left,M=A.right,O=A.width,B=A.height;if(x=R.scrollWidth,E=R.scrollHeight,w=r.css(R),I=R.scrollLeft,P=R.scrollTop,R===b?(S=O<x&&("auto"===w.overflowX||"scroll"===w.overflowX||"visible"===w.overflowX),T=B<E&&("auto"===w.overflowY||"scroll"===w.overflowY||"visible"===w.overflowY)):(S=O<x&&("auto"===w.overflowX||"scroll"===w.overflowX),T=B<E&&("auto"===w.overflowY||"scroll"===w.overflowY)),C=S&&(abs(M-v)<=h&&I+O<x)-(abs(Y-v)<=h&&!!I),D=T&&(abs(X-m)<=h&&P+B<E)-(abs(N-m)<=h&&!!P),!i[y])for(var H=0;H<=y;H++)i[H]||(i[H]={});i[y].vx==C&&i[y].vy==D&&i[y].el===R||(i[y].el=R,i[y].vx=C,i[y].vy=D,clearInterval(i[y].pid),!R||0==C&&0==D||(k=!0,i[y].pid=setInterval(function(){d&&0===this.layer&&(Sortable.active._emulateDragOver(!0),Sortable.active._onTouchMove(touchEvt,!0));var t=i[this.layer].vy?i[this.layer].vy*g:0,r=i[this.layer].vx?i[this.layer].vx*g:0;"function"==typeof scrollCustomFn&&"continue"!==scrollCustomFn.call(u,r,t,e,touchEvt,i[this.layer].el)||o.scrollBy(i[this.layer].el,r,t)}.bind({layer:y}),24))),y++}while(t.bubbleScroll&&_!==b&&(_=f(_,!1)));a=k}},30),p=function(){i.forEach(function(e){clearInterval(e.pid)}),i=[]};function v(t,o){return e.debounce(t,o)}return{autoScrolls:i,_isScrolledPast:function(e,t){var r=f(e,!0),l=o.boundingRect(e)[t];for(;r;){var i=o.boundingRect(r)[t];if(!("top"===t||"left"===t?l>=i:l<=i))return r;if(r===n())break;r=f(r,!1)}return!1},_getRelativeScrollOffset:function(e){var t=0,o=0,r=n();if(e)do{var l=transforms.matrix(e),i=l.a,a=l.d;t+=e.scrollLeft*i,o+=e.scrollTop*a}while(e!==r&&(e=e.parentNode));return[t,o]},_autoScroll:g,_clearAutoScrolls:p,_handleAutoScroll:function(e,t,o){var r=e.clientX,l=e.clientY,i=document.elementFromPoint(r,l);if(o||d||c||u){h=g(e,t,i,o);var s=f(i,!0);!a||pointerElemChangedInterval&&r===lastPointerElemX&&l===lastPointerElemY||(pointerElemChangedInterval&&clearInterval(pointerElemChangedInterval),pointerElemChangedInterval=setInterval(function(){if(dragEl){var n=f(document.elementFromPoint(r,l),!0);n!==s&&(s=n,p(),h=g(e,t,s,o))}},10),lastPointerElemX=r,lastPointerElemY=l)}else{if(!t.bubbleScroll||f(i,!0)===n())return void p();h=g(e,t,f(i,!1),!1)}},_throttle:v,_cancelThrottle:function(){h&&h.stop&&(h.stop(),h=void 0)}}}),e("skylark-sortable/containers",["skylark-langx/skylark","skylark-langx/langx","skylark-langx-hoster/isBrowser","skylark-langx-hoster/isMobile","skylark-domx-query","skylark-domx-browser","skylark-domx-noder","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","skylark-domx-eventer","skylark-domx-transforms","skylark-domx-scrolls/scrollingElement","skylark-domx-layouts/oriented","skylark-devices-points/touch","./autoscroll","./dnd"],function(e,t,o,r,n,l,i,a,s,c,d,u,h,f,g,p,v){return{_index:function(e,t){return a.index(e,function(e){return!("TEMPLATE"===e.nodeName.toUpperCase()||e===v.cloneEl||t&&!a.matches(e,t))})},_isElInRowColumn:function(e,t,o){v.dragEl;var r=s.boundingRect(e),n=s.boundingRect(t),l="vertical"===o?r.left:r.top,i="vertical"===o?r.right:r.bottom,a="vertical"===o?r.width:r.height,c="vertical"===o?n.left:n.top,d="vertical"===o?n.right:n.bottom,u="vertical"===o?n.width:n.height;return l===c||i===d||l+a/2===c+u/2},_isClientInRowColumn:function(e,t,o,r,n){var l=s.boundingRect(o),i="vertical"===r?l.left:l.top,a="vertical"===r?l.right:l.bottom,c="vertical"===r?e:t;return i<c&&c<a}}}),e("skylark-sortable/Sortable",["skylark-langx/skylark","skylark-langx/langx","skylark-langx-hoster/isBrowser","skylark-langx-hoster/isMobile","skylark-domx-query","skylark-domx-browser","skylark-domx-noder","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","skylark-domx-eventer","skylark-domx-transforms","skylark-domx-scrolls/scrollingElement","skylark-domx-layouts/oriented","skylark-devices-points/touch","./autoscroll","./containers","./dnd"],function(e,t,o,r,n,l,i,a,s,c,d,u,h,f,g,p,v,m){function b(e,t){n("#console").append("<div>"+e+":"+t+"</div>")}var k,y,_,x,E,w,C,D,S,T,I,P,R,A,N,X,Y,M=!1,O=!1,B=!1,H=!1,F=[],z=window,q=z.document,L=z.parseInt,W=z.setTimeout,j=(z.Polymer,o&&o.ie),G=o&&o.edge,U=o&&o.firefox,V=o&&o.safari,Z=(r&&r.apple.device,r.apple.device),J="draggable"in q.createElement("div")&&!r.apple.device;l.support.cssPointerEvents;function K(e,t,o){if(e){var r=e.getElementsByTagName(t),n=0,l=r.length;if(o)for(;n<l;n++)o(r[n],n);return r}return[]}function Q(e){return a.lastChild(e,{ignoreHidden:!0,excluding:[m.ghostEl]})}function $(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,o=t.length,r=0;o--;)r+=t.charCodeAt(o);return r.toString(36)}function ee(e){return t.defer(e)}function te(e){return e&&e.stop()}function oe(e,t,o,r){if(e.getBoundingClientRect||e===z){var{top:n,left:l,bottom:i,right:a,width:c,height:d}=s.boundingRect(e);if(t&&e!==z){var h=u.matrix(o||e),f=h&&h.a,g=h&&h.d;h&&(i=(n/=g)+(d/=g),a=(l/=f)+(c/=f))}return{top:n,left:l,bottom:i,right:a,width:c,height:d}}}function re(e,o){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, not "+{}.toString.call(e);this.el=e,this.options=o=t.mixin({},o),e[m.expando]=this;var r={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(o,r,n,l){return f(e,t.mixin({excluding:[l,n]},this.options))},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:L(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==re.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var n in r)!(n in o)&&(o[n]=r[n]);for(var l in _prepareGroup(o),this)"_"===l.charAt(0)&&"function"==typeof this[l]&&(this[l]=this[l].bind(this));this.nativeDraggable=!o.forceFallback&&J,this.nativeDraggable&&(this.options.touchStartThreshold=1),g.mousy(e),d.on(e,"mousedown",this._onTapStart),this.nativeDraggable&&(d.on(e,"dragover",this),d.on(e,"dragenter",this)),m.sortables.push(this.el),o.store&&o.store.get&&this.sort(o.store.get(this)||[])}function ne(e){e.draggable=!1}function le(){_silent=!1}return _silent=!1,_alignedSilent=!1,abs=Math.abs,min=Math.min,max=Math.max,savedInputChecked=[],_prepareGroup=function(e){function t(e,o){return function(r,n,l,i){var a=r.options.group.name&&n.options.group.name&&r.options.group.name===n.options.group.name;if(null==e&&(o||a))return!0;if(null==e||!1===e)return!1;if(o&&"clone"===e)return e;if("function"==typeof e)return t(e(r,n,l,i),o)(r,n,l,i);var s=(o?r:n).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var o={},r=e.group;r&&"object"==typeof r||(r={name:r}),o.name=r.name,o.checkPull=t(r.pull,!0),o.checkPut=t(r.put),o.revertClone=r.revertClone,e.group=o},q.addEventListener("click",function(e){if(O)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),O=!1,!1},!0),d.on(q,"touchmove",function(e){(re.active||M)&&e.cancelable&&e.preventDefault()}),re.prototype={constructor:re,_computeIsAligned:function(e){var t,o=m.dragEl;if(t=e.target,t=a.closest(t,this.options.draggable,this.el,!1),!_alignedSilent&&o&&o.parentNode===this.el){for(var r=this.el.children,n=0;n<r.length;n++)a.closest(r[n],this.options.draggable,this.el,!1)&&r[n]!==t&&(r[n].sortableMouseAligned=v._isClientInRowColumn(e.clientX,e.clientY,r[n],this._getDirection(e,null),this.options));a.closest(t,this.options.draggable,this.el,!0)||(R=null),_alignedSilent=!0,W(function(){_alignedSilent=!1},30)}},_getDirection:function(e,t){var o=m.dragEl;return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,o,m.ghostEl):this.options.direction},_onTapStart:function(e){var t,o,r=this,n=this.el,l=this.options,i=l.preventOnFilter,s=e.type,c=e.touches&&e.touches[0],d=(c||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||d,h=l.filter;if(function(e){savedInputChecked.length=0;var t=e.getElementsByTagName("input"),o=t.length;for(;o--;){var r=t[o];r.checked&&savedInputChecked.push(r)}}(n),!m.dragEl&&!(/mousedown|pointerdown/.test(s)&&0!==e.button||l.disabled||u.isContentEditable||(d=a.closest(d,l.draggable,n,!1),x===d))){if(b("_onTapStart",d.tagName+","+d.className),t=v._index(d),o=v._index(d,l.draggable),"function"==typeof h){if(h.call(this,e,d,this))return m._dispatchEvent(r,u,"filter",d,n,n,t,void 0,o),void(i&&e.cancelable&&e.preventDefault())}else if(h&&(h=h.split(",").some(function(e){if(e=a.closest(u,e.trim(),n,!1))return m._dispatchEvent(r,e,"filter",d,n,n,t,void 0,o),!0})))return void(i&&e.cancelable&&e.preventDefault());l.handle&&!a.closest(u,l.handle,n,!1)||this._prepareDragStart(e,c,d,t,o)}},_handleAutoScroll:function(e,t){if(m.dragEl&&this.options.scroll)return p._handleAutoScroll(e,this.options,t)},_prepareDragStart:function(e,t,o,r,n){var l,i=this,a=i.el,s=i.options,u=a.ownerDocument,h=m.dragEl;b("_prepareDragStart","start"),o&&!h&&o.parentNode===a&&(y=a,h=m.dragEl=o,k=h.parentNode,_=h.nextSibling,x=o,S=s.group,E=r,C=n,I={target:h,clientX:(t||e).clientX,clientY:(t||e).clientY},this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,h.style["will-change"]="all",h.style.transition="",h.style.transform="",l=function(){i._disableDelayedDragEvents(),!U&&i.nativeDraggable&&(h.draggable=!0),i._triggerDragStart(e,t),m._dispatchEvent(i,y,"choose",h,y,y,E,void 0,C),c.toggleClass(h,s.chosenClass,!0)},s.ignore.split(",").forEach(function(e){K(h,e.trim(),ne)}),m.prepare(this),d.on(u,"mouseup",i._onDrop),U&&this.nativeDraggable&&(this.options.touchStartThreshold=4,h.draggable=!0),!s.delay||s.delayOnTouchOnly&&!t||this.nativeDraggable&&(G||j)?l():(d.on(u,"mouseup",i._disableDelayedDrag),d.on(u,"mousemove",i._delayedDragTouchMoveHandler),i._dragStartTimer=W(l,s.delay)))},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;max(abs(t.clientX-this._lastX),abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){m.dragEl&&ne(m.dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;d.off(e,"mouseup",this._disableDelayedDrag),d.off(e,"mousemove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){b("_triggerDragStart","start"),b("_triggerDragStart","nativeDraggable is "+this.nativeDraggable),this.nativeDraggable?(d.on(m.dragEl,"dragend",this),d.on(y,"dragstart",this._onDragStart)):d.on(q,"mousemove",this._onTouchMove);try{q.selection?ee(function(){q.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){M=!1;var o=m.dragEl;if(y&&o){this.nativeDraggable&&(d.on(q,"dragover",this._handleAutoScroll),d.on(q,"dragover",m._checkAlignment));var r=this.options;!e&&c.toggleClass(o,r.dragClass,!1),c.toggleClass(o,r.ghostClass,!0),c.css(o,"transform",""),m.active=this,e&&this._appendGhost(),m._dispatchEvent(this,y,"start",o,y,y,E,void 0,C,void 0,t)}else this._nulling()},_onTouchMove:function(e,t){b("_onTouchMove","start");var o=m.ghostEl;if(I){var r=this.options,n=r.fallbackTolerance,l=r.fallbackOffset,i=e.touches?e.touches[0]:e,a=o&&u.matrix(o),s=o&&a&&a.a,d=o&&a&&a.d,h=Z&&Y&&p._getRelativeScrollOffset(Y),f=(i.clientX-I.clientX+l.x)/(s||1)+(h?h[0]-F[0]:0)/(s||1),g=(i.clientY-I.clientY+l.y)/(d||1)+(h?h[1]-F[1]:0)/(d||1),v=e.touches?"translate3d("+f+"px,"+g+"px,0)":"translate("+f+"px,"+g+"px)";if(!m.active&&!M){if(n&&min(abs(i.clientX-this._lastX),abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}!t&&this._handleAutoScroll(i,!0),P=!0,m.touchEvt=i,o&&(c.css(o,"webkitTransform",v),c.css(o,"mozTransform",v),c.css(o,"msTransform",v),c.css(o,"transform",v)),e.preventDefault()}},_appendGhost:function(){var e=m.dragEl,t=m.ghostEl;if(!t){var o=this.options.fallbackOnBody?q.body:y,r=oe(e,!0,o,!Z),n=(c.css(e),this.options);if(Z){for(Y=o;"static"===c.css(Y,"position")&&"none"===c.css(Y,"transform")&&Y!==q;)Y=Y.parentNode;if(Y!==q){var l=oe(Y,!0);r.top-=l.top,r.left-=l.left}Y!==q.body&&Y!==q.documentElement?(Y===q&&(Y=h()),r.top+=Y.scrollTop,r.left+=Y.scrollLeft):Y=h(),F=p._getRelativeScrollOffset(Y)}t=m.ghostEl=e.cloneNode(!0),c.toggleClass(t,n.ghostClass,!1),c.toggleClass(t,n.fallbackClass,!0),c.toggleClass(t,n.dragClass,!0),c.css(t,"box-sizing","border-box"),c.css(t,"margin",0),c.css(t,"top",r.top),c.css(t,"left",r.left),c.css(t,"width",r.width),c.css(t,"height",r.height),c.css(t,"opacity","0.8"),c.css(t,"position",Z?"absolute":"fixed"),c.css(t,"zIndex","100000"),c.css(t,"pointerEvents","none"),o.appendChild(t)}},_animate:function(e,t){var o=this.options.animation,r=m.dragEl;if(o){var n=s.boundingRect(t);if(t===r&&n,1===e.nodeType&&(e=s.boundingRect(e)),e.left+e.width/2!==n.left+n.width/2||e.top+e.height/2!==n.top+n.height/2){var l=u.matrix(this.el),i=l&&l.a,a=l&&l.d;c.css(t,"transition","none"),c.css(t,"transform","translate3d("+(e.left-n.left)/(i||1)+"px,"+(e.top-n.top)/(a||1)+"px,0)"),this._repaint(t),c.css(t,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),c.css(t,"transform","translate3d(0,0,0)")}"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=W(function(){c.css(t,"transition",""),c.css(t,"transform",""),t.animated=!1},o)}},_repaint:function(e){return e.offsetWidth},_offMoveEvents:function(){d.off(q,"dragover",m.nearestEmptyInsertDetectEvent),d.off(q,"mousemove",m.nearestEmptyInsertDetectEvent)},_offUpEvents:function(){var e=this.el.ownerDocument;d.off(e,"mouseup",this._onDrop),d.off(q,"selectstart",this)},_onDragStart:function(e,t){var o=this,r=m.dragEl,n=e.dataTransfer,l=o.options,a=m.cloneEl=i.clone(r,!0);a.draggable=!1,a.style["will-change"]="",this._hideClone(),c.toggleClass(a,o.options.chosenClass,!1),o._cloneId=ee(function(){o.options.removeCloneOnHide||y.insertBefore(a,r),m._dispatchEvent(o,y,"clone",r)}),!t&&c.toggleClass(r,l.dragClass,!0),t?(O=!0,o._loopId=setInterval(m._emulateDragOver.bind(m),50)):(d.off(q,"mouseup",o._onDrop),n&&(n.effectAllowed="move",l.setData&&l.setData.call(o,n,r)),d.on(q,"drop",o),c.css(r,"transform","translateZ(0)")),M=!0,o._dragStartId=ee(o._dragStarted.bind(o,t,e)),d.on(q,"selectstart",o),V&&c.css(q.body,"user-select","none")},_onDragOver:function(e){var t,o,r,n=this.el,l=e.target,i=this.options,d=i.group,u=m.active,h=S===d,f=i.sort,g=this,b=m.dragEl,x=m.putSortable;if(!_silent){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),P=!0,l=a.closest(l,i.draggable,n,!0),b.contains(e.target)||l.animated)return V(!1);if(l!==b&&(O=!1),u&&!i.disabled&&(h?f||(r=!y.contains(b)):x===this||(this.lastPutMode=S.checkPull(this,u,b,e))&&d.checkPut(this,u,b,e))){var w=this._getDirection(e,l);if(t=s.boundingRect(b),r)return this._hideClone(),k=y,_?y.insertBefore(b,_):y.appendChild(b),V(!0);var D=Q(n);if(!D||function(e,t,o){var r=s.boundingRect(Q(o)),n="vertical"===t?e.clientY:e.clientX,l="vertical"===t?e.clientX:e.clientY,i="vertical"===t?r.bottom:r.right,a="vertical"===t?r.left:r.top,c="vertical"===t?r.right:r.bottom;return"vertical"===t?l>c+10||l<=c&&n>i&&l>=a:n>i&&l>a||n<=i&&l>c+10}(e,w,n)&&!D.animated){if(D&&n===e.target&&(l=D),l&&(o=s.boundingRect(l)),h?u._hideClone():u._showClone(this),!1!==m._onMove(y,n,b,t,l,o,e,!!l))return n.appendChild(b),k=n,null,Z(),V(!0)}else if(l&&l!==b&&l.parentNode===n){var T,I=0,Y=l.sortableMouseAligned,M=b.parentNode!==n,F="vertical"===w?"top":"left",z=p._isScrolledPast(l,"top")||p._isScrolledPast(b,"top"),L=z?z.scrollTop:void 0;if(R!==l&&(N=null,T=s.boundingRect(l)[F],B=!1),v._isElInRowColumn(b,l,w)&&Y||M||z||i.invertSwap||"insert"===N||"swap"===N?("swap"!==N&&(H=i.invertSwap||M),I=function(e,t,o,r,n,l,i){var a=s.boundingRect(t),c="vertical"===o?e.clientY:e.clientX,d="vertical"===o?a.height:a.width,u="vertical"===o?a.top:a.left,h="vertical"===o?a.bottom:a.right,f=s.boundingRect(b),g=!1;if(!l)if(i&&X<d*r)if(!B&&(1===A?c>u+d*n/2:c<h-d*n/2)&&(B=!0),B)g=!0;else{"vertical"===o?f.top:f.left,"vertical"===o?f.bottom:f.right;if(1===A?c<u+X:c>h-X)return-1*A}else if(c>u+d*(1-r)/2&&c<h-d*(1-r)/2)return J(t);if((g=g||l)&&(c<u+d*n/2||c>h-d*n/2))return c>u+d/2?1:-1;return 0}(e,l,w,i.swapThreshold,null==i.invertedSwapThreshold?i.swapThreshold:i.invertedSwapThreshold,H,R===l),N="swap"):(I=J(l),N="insert"),0===I)return V(!1);null,R=l,A=I,o=s.boundingRect(l);var j=l.nextElementSibling,G=!1;G=1===I;var U=m._onMove(y,n,b,t,l,o,e,G);if(!1!==U)return 1!==U&&-1!==U||(G=1===U),_silent=!0,W(le,30),h?u._hideClone():u._showClone(this),G&&!j?n.appendChild(b):l.parentNode.insertBefore(b,G?j:l),z&&s.scrollBy(z,0,L-z.scrollTop),k=b.parentNode,void 0===T||H||(X=abs(T-s.boundingRect(l)[F])),Z(),V(!0)}if(n.contains(b))return V(!1)}return!1}function V(r){return r&&(h?u._hideClone():u._showClone(g),u&&(c.toggleClass(b,x?x.options.ghostClass:u.options.ghostClass,!1),c.toggleClass(b,i.ghostClass,!0)),x!==g&&g!==m.active?x=m.putSortable=g:g===m.active&&(x=m.putSortable=null),t&&g._animate(t,b),l&&o&&g._animate(o,l)),(l===b&&!b.animated||l===n&&!l.animated)&&(R=null),i.dragoverBubble||e.rootEl||l===q||(g._handleAutoScroll(e),b.parentNode[m.expando]._computeIsAligned(e),!r&&m.nearestEmptyInsertDetectEvent(e)),!i.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),!0}function Z(){m._dispatchEvent(g,y,"change",l,n,y,E,v._index(b),C,v._index(b,i.draggable),e)}function J(e){var t=v._index(b),o=v._index(e);return t<o?1:-1}},_onDrop:function(e){var t=this.el,o=this.options,r=m.dragEl,n=m.putSortable;M=!1,scrolling=!1,H=!1,B=!1,clearInterval(this._loopId),clearInterval(T),p._clearAutoScrolls(),p._cancelThrottle(),clearTimeout(this._dragStartTimer),te(this._cloneId),te(this._dragStartId),d.off(q,"mousemove",this._onTouchMove),this.nativeDraggable&&(d.off(q,"drop",this),d.off(t,"dragstart",this._onDragStart),d.off(q,"dragover",this._handleAutoScroll),d.off(q,"dragover",m._checkAlignment)),V&&c.css(q.body,"user-select",""),this._offMoveEvents(),this._offUpEvents(),e&&(P&&(e.cancelable&&e.preventDefault(),!o.dropBubble&&e.stopPropagation()),m.ghostEl&&m.ghostEl.parentNode&&m.ghostEl.parentNode.removeChild(m.ghostEl),(y===k||n&&"clone"!==n.lastPutMode)&&m.cloneEl&&m.cloneEl.parentNode&&m.cloneEl.parentNode.removeChild(m.cloneEl),r&&(this.nativeDraggable&&d.off(r,"dragend",this),ne(r),r.style["will-change"]="",c.toggleClass(r,n?n.options.ghostClass:this.options.ghostClass,!1),c.toggleClass(r,this.options.chosenClass,!1),m._dispatchEvent(this,y,"unchoose",r,k,y,E,null,C,null,e),y!==k?(w=v._index(r),D=v._index(r,o.draggable),w>=0&&(m._dispatchEvent(null,k,"add",r,k,y,E,w,C,D,e),m._dispatchEvent(this,y,"remove",r,k,y,E,w,C,D,e),m._dispatchEvent(null,k,"sort",r,k,y,E,w,C,D,e),m._dispatchEvent(this,y,"sort",r,k,y,E,w,C,D,e)),n&&n.save()):r.nextSibling!==_&&(w=v._index(r),D=v._index(r,o.draggable),w>=0&&(m._dispatchEvent(this,y,"update",r,k,y,E,w,C,D,e),m._dispatchEvent(this,y,"sort",r,k,y,E,w,C,D,e))),m.active&&(null!=w&&-1!==w||(w=E,D=C),m._dispatchEvent(this,y,"end",r,k,y,E,w,C,D,e),this.save()))),this._nulling()},_nulling:function(){y=m.dragEl=k=m.ghostEl=_=m.cloneEl=x=p.scrollParentEl=p.autoScrolls.length=T=I=m.touchEvt=P=w=E=R=A=m.putSortable=S=m.active=null,savedInputChecked.forEach(function(e){e.checked=!0}),savedInputChecked.length=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":m.dragEl&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],o=this.el.children,r=0,n=o.length,l=this.options;r<n;r++)e=o[r],a.closest(e,l.draggable,this.el,!1)&&t.push(e.getAttribute(l.dataIdAttr)||$(e));return t},sort:function(e){var t={},o=this.el;this.toArray().forEach(function(e,r){var n=o.children[r];a.closest(n,this.options.draggable,o,!1)&&(t[e]=n)},this),e.forEach(function(e){t[e]&&(o.removeChild(t[e]),o.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return a.closest(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var o=this.options;if(void 0===t)return o[e];o[e]=t,"group"===e&&_prepareGroup(o)},destroy:function(){var e=this.el;e[m.expando]=null,d.off(e,"mousedown",this._onTapStart),this.nativeDraggable&&(d.off(e,"dragover",this),d.off(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),m.sortables.splice(m.sortables.indexOf(this.el),1),this.el=e=null},_hideClone:function(){m.cloneEl.cloneHidden||(c.css(m.cloneEl,"display","none"),m.cloneEl.cloneHidden=!0,m.cloneEl.parentNode&&this.options.removeCloneOnHide&&m.cloneEl.parentNode.removeChild(m.cloneEl))},_showClone:function(e){"clone"===e.lastPutMode?m.cloneEl.cloneHidden&&(y.contains(m.dragEl)&&!this.options.group.revertClone?y.insertBefore(m.cloneEl,m.dragEl):_?y.insertBefore(m.cloneEl,_):y.appendChild(m.cloneEl),this.options.group.revertClone&&this._animate(m.dragEl,m.cloneEl),c.css(m.cloneEl,"display",""),m.cloneEl.cloneHidden=!1):this._hideClone()}},re.utils={on:d.on,off:d.off,css:c.css,find:K,is:function(e,t){return!!a.closest(e,t,e,!1)},extend:t.mixin,throttle:p._throttle,closest:a.closest,toggleClass:c.toggleClass,clone:function(e){return i.clone(e,!0)},index:v._index,nextTick:ee,cancelNextTick:te,getChild:function(e,t,o){return o.excluding=[],o.closesting=o.draggable,a.childAt(e,t,o)}},re.create=function(e,t){return new re(e,t)},re.version="1.9.0",e.attach("intg.Sortable",re)}),e("skylark-sortable/main",["./Sortable"],function(e){return e}),e("skylark-sortable",["skylark-sortable/main"],function(e){return e})}(o),!r){var i=require("skylark-langx-ns");n?module.exports=i:t.skylarkjs=i}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-sortable.js.map
